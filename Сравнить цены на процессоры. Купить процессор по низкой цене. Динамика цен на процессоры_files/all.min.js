+function(t){'use strict';function o(e){var o=e.attr("data-target");o||(o=e.attr("href"),o=o&&/#[A-Za-z]/.test(o)&&o.replace(/.*(?=#[^\s]*$)/,""));var a=o&&t(o);return a&&a.length?a:e.parent()}function a(a){a&&3===a.which||(t(".dropdown-backdrop").remove(),t("[data-toggle=\"dropdown\"]").each(function(){var e=t(this),i=o(e),r={relatedTarget:this};i.hasClass("open")&&(a&&"click"==a.type&&/input|textarea/i.test(a.target.tagName)&&t.contains(i[0],a.target)||(i.trigger(a=t.Event("hide.bs.dropdown",r)),a.isDefaultPrevented()||(e.attr("aria-expanded","false"),i.removeClass("open").trigger(t.Event("hidden.bs.dropdown",r)))))}))}var i="[data-toggle=\"dropdown\"]",r=function(e){t(e).on("click.bs.dropdown",this.toggle)};r.VERSION="3.3.7",r.prototype.toggle=function(i){var r=t(this);if(!r.is(".disabled, :disabled")){var s=o(r),l=s.hasClass("open");if(a(),!l){"ontouchstart"in document.documentElement&&!s.closest(".navbar-nav").length&&t(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(t(this)).on("click",a);var n={relatedTarget:this};if(s.trigger(i=t.Event("show.bs.dropdown",n)),i.isDefaultPrevented())return;r.trigger("focus").attr("aria-expanded","true"),s.toggleClass("open").trigger(t.Event("shown.bs.dropdown",n))}return!1}},r.prototype.keydown=function(a){if(/(38|40|27|32)/.test(a.which)&&!/input|textarea/i.test(a.target.tagName)){var e=t(this);if(a.preventDefault(),a.stopPropagation(),!e.is(".disabled, :disabled")){var r=o(e),s=r.hasClass("open");if(!s&&27!=a.which||s&&27==a.which)return 27==a.which&&r.find(i).trigger("focus"),e.trigger("click");var l=r.find(".dropdown-menu li:not(.disabled):visible a");if(l.length){var n=l.index(a.target);38==a.which&&0<n&&n--,40==a.which&&n<l.length-1&&n++,~n||(n=0),l.eq(n).trigger("focus")}}}};var s=t.fn.dropdown;t.fn.dropdown=function(e){return this.each(function(){var o=t(this),a=o.data("bs.dropdown");a||o.data("bs.dropdown",a=new r(this)),"string"==typeof e&&a[e].call(o)})},t.fn.dropdown.Constructor=r,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=s,this},t(document).on("click.bs.dropdown.data-api",a).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",i,r.prototype.toggle).on("keydown.bs.dropdown.data-api",i,r.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",r.prototype.keydown)}(jQuery),+function(t){'use strict';var e=Math.round,o=function(e,t){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",e,t)};o.VERSION="3.3.7",o.TRANSITION_DURATION=150,o.DEFAULTS={animation:!0,placement:"top",selector:!1,template:"<div class=\"tooltip\" role=\"tooltip\"><div class=\"tooltip-arrow\"></div><div class=\"tooltip-inner\"></div></div>",trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},o.prototype.init=function(e,o,a){if(this.enabled=!0,this.type=e,this.$element=t(o),this.options=this.getOptions(a),this.$viewport=this.options.viewport&&t(t.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var r=this.options.trigger.split(" "),s=r.length,l;s--;)if(l=r[s],"click"==l)this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this));else if("manual"!=l){var n="hover"==l?"mouseenter":"focusin",d="hover"==l?"mouseleave":"focusout";this.$element.on(n+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(d+"."+this.type,this.options.selector,t.proxy(this.leave,this))}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},o.prototype.getDefaults=function(){return o.DEFAULTS},o.prototype.getOptions=function(e){return e=t.extend({},this.getDefaults(),this.$element.data(),e),e.delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},o.prototype.getDelegateOptions=function(){var e={},o=this.getDefaults();return this._options&&t.each(this._options,function(t,a){o[t]!=a&&(e[t]=a)}),e},o.prototype.enter=function(e){var o=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return(o||(o=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,o)),e instanceof t.Event&&(o.inState["focusin"==e.type?"focus":"hover"]=!0),o.tip().hasClass("in")||"in"==o.hoverState)?void(o.hoverState="in"):(clearTimeout(o.timeout),o.hoverState="in",o.options.delay&&o.options.delay.show?void(o.timeout=setTimeout(function(){"in"==o.hoverState&&o.show()},o.options.delay.show)):o.show())},o.prototype.isInStateTrue=function(){for(var e in this.inState)if(this.inState[e])return!0;return!1},o.prototype.leave=function(e){var o=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);if(o||(o=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,o)),e instanceof t.Event&&(o.inState["focusout"==e.type?"focus":"hover"]=!1),!o.isInStateTrue())return clearTimeout(o.timeout),o.hoverState="out",o.options.delay&&o.options.delay.hide?void(o.timeout=setTimeout(function(){"out"==o.hoverState&&o.hide()},o.options.delay.hide)):o.hide()},o.prototype.show=function(){var a=t.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(a);var e=t.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(a.isDefaultPrevented()||!e)return;var i=this,r=this.tip(),s=this.getUID(this.type);this.setContent(),r.attr("id",s),this.$element.attr("aria-describedby",s),this.options.animation&&r.addClass("fade");var l="function"==typeof this.options.placement?this.options.placement.call(this,r[0],this.$element[0]):this.options.placement,n=/\s?auto?\s?/i,d=n.test(l);d&&(l=l.replace(n,"")||"top"),r.detach().css({top:0,left:0,display:"block"}).addClass(l).data("bs."+this.type,this),this.options.container?r.appendTo(this.options.container):r.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var c=this.getPosition(),p=r[0].offsetWidth,u=r[0].offsetHeight;if(d){var g=l,m=this.getPosition(this.$viewport);l="bottom"==l&&c.bottom+u>m.bottom?"top":"top"==l&&c.top-u<m.top?"bottom":"right"==l&&c.right+p>m.width?"left":"left"==l&&c.left-p<m.left?"right":l,r.removeClass(g).addClass(l)}var h=this.getCalculatedOffset(l,c,p,u);this.applyPlacement(h,l);var f=function(){var e=i.hoverState;i.$element.trigger("shown.bs."+i.type),i.hoverState=null,"out"==e&&i.leave(i)};t.support.transition&&this.$tip.hasClass("fade")?r.one("bsTransitionEnd",f).emulateTransitionEnd(o.TRANSITION_DURATION):f()}},o.prototype.applyPlacement=function(o,a){var i=this.tip(),r=i[0].offsetWidth,s=i[0].offsetHeight,l=parseInt(i.css("margin-top"),10),n=parseInt(i.css("margin-left"),10);isNaN(l)&&(l=0),isNaN(n)&&(n=0),o.top+=l,o.left+=n,t.offset.setOffset(i[0],t.extend({using:function(t){i.css({top:e(t.top),left:e(t.left)})}},o),0),i.addClass("in");var d=i[0].offsetWidth,c=i[0].offsetHeight;"top"==a&&c!=s&&(o.top=o.top+s-c);var p=this.getViewportAdjustedDelta(a,o,d,c);p.left?o.left+=p.left:o.top+=p.top;var u=/top|bottom/.test(a),g=u?2*p.left-r+d:2*p.top-s+c,m=u?"offsetWidth":"offsetHeight";i.offset(o),this.replaceArrow(g,i[0][m],u)},o.prototype.replaceArrow=function(e,t,o){this.arrow().css(o?"left":"top",50*(1-e/t)+"%").css(o?"top":"left","")},o.prototype.setContent=function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},o.prototype.hide=function(a){function i(){"in"!=r.hoverState&&s.detach(),r.$element&&r.$element.removeAttr("aria-describedby").trigger("hidden.bs."+r.type),a&&a()}var r=this,s=t(this.$tip),l=t.Event("hide.bs."+this.type);if(this.$element.trigger(l),!l.isDefaultPrevented())return s.removeClass("in"),t.support.transition&&s.hasClass("fade")?s.one("bsTransitionEnd",i).emulateTransitionEnd(o.TRANSITION_DURATION):i(),this.hoverState=null,this},o.prototype.fixTitle=function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},o.prototype.hasContent=function(){return this.getTitle()},o.prototype.getPosition=function(e){e=e||this.$element;var o=e[0],a="BODY"==o.tagName,i=o.getBoundingClientRect();null==i.width&&(i=t.extend({},i,{width:i.right-i.left,height:i.bottom-i.top}));var r=window.SVGElement&&o instanceof window.SVGElement,s=a?{top:0,left:0}:r?null:e.offset(),l={scroll:a?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop()},n=a?{width:t(window).width(),height:t(window).height()}:null;return t.extend({},i,l,n,s)},o.prototype.getCalculatedOffset=function(e,t,o,a){return"bottom"==e?{top:t.top+t.height,left:t.left+t.width/2-o/2}:"top"==e?{top:t.top-a,left:t.left+t.width/2-o/2}:"left"==e?{top:t.top+t.height/2-a/2,left:t.left-o}:{top:t.top+t.height/2-a/2,left:t.left+t.width}},o.prototype.getViewportAdjustedDelta=function(e,t,o,a){var i={top:0,left:0};if(!this.$viewport)return i;var r=this.options.viewport&&this.options.viewport.padding||0,s=this.getPosition(this.$viewport);if(/right|left/.test(e)){var l=t.top-r-s.scroll,n=t.top+r-s.scroll+a;l<s.top?i.top=s.top-l:n>s.top+s.height&&(i.top=s.top+s.height-n)}else{var d=t.left-r,c=t.left+r+o;d<s.left?i.left=s.left-d:c>s.right&&(i.left=s.left+s.width-c)}return i},o.prototype.getTitle=function(){var e=this.$element,t=this.options,o;return o=e.attr("data-original-title")||("function"==typeof t.title?t.title.call(e[0]):t.title),o},o.prototype.getUID=function(e){do e+=~~(1e6*Math.random());while(document.getElementById(e));return e},o.prototype.tip=function(){if(!this.$tip&&(this.$tip=t(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},o.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},o.prototype.enable=function(){this.enabled=!0},o.prototype.disable=function(){this.enabled=!1},o.prototype.toggleEnabled=function(){this.enabled=!this.enabled},o.prototype.toggle=function(o){var e=this;o&&(e=t(o.currentTarget).data("bs."+this.type),!e&&(e=new this.constructor(o.currentTarget,this.getDelegateOptions()),t(o.currentTarget).data("bs."+this.type,e))),o?(e.inState.click=!e.inState.click,e.isInStateTrue()?e.enter(e):e.leave(e)):e.tip().hasClass("in")?e.leave(e):e.enter(e)},o.prototype.destroy=function(){var e=this;clearTimeout(this.timeout),this.hide(function(){e.$element.off("."+e.type).removeData("bs."+e.type),e.$tip&&e.$tip.detach(),e.$tip=null,e.$arrow=null,e.$viewport=null,e.$element=null})};var a=t.fn.tooltip;t.fn.tooltip=function(e){return this.each(function(){var a=t(this),i=a.data("bs.tooltip");!i&&/destroy|hide/.test(e)||(!i&&a.data("bs.tooltip",i=new o(this,"object"==typeof e&&e)),"string"==typeof e&&i[e]())})},t.fn.tooltip.Constructor=o,t.fn.tooltip.noConflict=function(){return t.fn.tooltip=a,this}}(jQuery),+function(t){'use strict';function o(e,o){return this.each(function(){var i=t(this),r=i.data("bs.modal"),s=t.extend({},a.DEFAULTS,i.data(),"object"==typeof e&&e);r||i.data("bs.modal",r=new a(this,s)),"string"==typeof e?r[e](o):s.show&&r.show(o)})}var a=function(e,o){this.options=o,this.$body=t(document.body),this.$element=t(e),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,t.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};a.VERSION="3.3.7",a.TRANSITION_DURATION=300,a.BACKDROP_TRANSITION_DURATION=150,a.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},a.prototype.toggle=function(e){return this.isShown?this.hide():this.show(e)},a.prototype.show=function(o){var i=this,r=t.Event("show.bs.modal",{relatedTarget:o});this.$element.trigger(r);this.isShown||r.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal","[data-dismiss=\"modal\"]",t.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){i.$element.one("mouseup.dismiss.bs.modal",function(o){t(o.target).is(i.$element)&&(i.ignoreBackdropClick=!0)})}),this.backdrop(function(){var r=t.support.transition&&i.$element.hasClass("fade");i.$element.parent().length||i.$element.appendTo(i.$body),i.$element.show().scrollTop(0),i.adjustDialog(),r&&i.$element[0].offsetWidth,i.$element.addClass("in"),i.enforceFocus();var s=t.Event("shown.bs.modal",{relatedTarget:o});r?i.$dialog.one("bsTransitionEnd",function(){i.$element.trigger("focus").trigger(s)}).emulateTransitionEnd(a.TRANSITION_DURATION):i.$element.trigger("focus").trigger(s)}))},a.prototype.hide=function(o){o&&o.preventDefault(),o=t.Event("hide.bs.modal"),this.$element.trigger(o);!this.isShown||o.isDefaultPrevented()||(this.isShown=!1,this.escape(),this.resize(),t(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),t.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",t.proxy(this.hideModal,this)).emulateTransitionEnd(a.TRANSITION_DURATION):this.hideModal())},a.prototype.enforceFocus=function(){t(document).off("focusin.bs.modal").on("focusin.bs.modal",t.proxy(function(t){document===t.target||this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.trigger("focus")},this))},a.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",t.proxy(function(t){27==t.which&&this.hide()},this)):!this.isShown&&this.$element.off("keydown.dismiss.bs.modal")},a.prototype.resize=function(){this.isShown?t(window).on("resize.bs.modal",t.proxy(this.handleUpdate,this)):t(window).off("resize.bs.modal")},a.prototype.hideModal=function(){var e=this;this.$element.hide(),this.backdrop(function(){e.$body.removeClass("modal-open"),e.resetAdjustments(),e.resetScrollbar(),e.$element.trigger("hidden.bs.modal")})},a.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},a.prototype.backdrop=function(e){var o=this,i=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var r=t.support.transition&&i;if(this.$backdrop=t(document.createElement("div")).addClass("modal-backdrop "+i).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",t.proxy(function(t){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(t.target!==t.currentTarget||("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),r&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;r?this.$backdrop.one("bsTransitionEnd",e).emulateTransitionEnd(a.BACKDROP_TRANSITION_DURATION):e()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var s=function(){o.removeBackdrop(),e&&e()};t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",s).emulateTransitionEnd(a.BACKDROP_TRANSITION_DURATION):s()}else e&&e()},a.prototype.handleUpdate=function(){this.adjustDialog()},a.prototype.adjustDialog=function(){var e=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&e?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!e?this.scrollbarWidth:""})},a.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},a.prototype.checkScrollbar=function(){var e=window.innerWidth;if(!e){var t=document.documentElement.getBoundingClientRect();e=t.right-Math.abs(t.left)}this.bodyIsOverflowing=document.body.clientWidth<e,this.scrollbarWidth=this.measureScrollbar()},a.prototype.setScrollbar=function(){var e=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",e+this.scrollbarWidth)},a.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},a.prototype.measureScrollbar=function(){var e=document.createElement("div");e.className="modal-scrollbar-measure",this.$body.append(e);var t=e.offsetWidth-e.clientWidth;return this.$body[0].removeChild(e),t};var i=t.fn.modal;t.fn.modal=o,t.fn.modal.Constructor=a,t.fn.modal.noConflict=function(){return t.fn.modal=i,this},t(document).on("click.bs.modal.data-api","[data-toggle=\"modal\"]",function(a){var e=t(this),i=e.attr("href"),r=t(e.attr("data-target")||i&&i.replace(/.*(?=#[^\s]+$)/,"")),s=r.data("bs.modal")?"toggle":t.extend({remote:!/#/.test(i)&&i},r.data(),e.data());e.is("a")&&a.preventDefault(),r.one("show.bs.modal",function(t){t.isDefaultPrevented()||r.one("hidden.bs.modal",function(){e.is(":visible")&&e.trigger("focus")})}),o.call(r,s,this)})}(jQuery),+function(t){'use strict';function o(e){return this.each(function(){var o=t(this),i=o.data("bs.tab");i||o.data("bs.tab",i=new a(this)),"string"==typeof e&&i[e]()})}var a=function(e){this.element=t(e)};a.VERSION="3.3.7",a.TRANSITION_DURATION=150,a.prototype.show=function(){var e=this.element,o=e.closest("ul:not(.dropdown-menu)"),a=e.data("target");if(a||(a=e.attr("href"),a=a&&a.replace(/.*(?=#[^\s]*$)/,"")),!e.parent("li").hasClass("active")){var i=o.find(".active:last a"),r=t.Event("hide.bs.tab",{relatedTarget:e[0]}),s=t.Event("show.bs.tab",{relatedTarget:i[0]});if(i.trigger(r),e.trigger(s),!(s.isDefaultPrevented()||r.isDefaultPrevented())){var l=t(a);this.activate(e.closest("li"),o),this.activate(l,l.parent(),function(){i.trigger({type:"hidden.bs.tab",relatedTarget:e[0]}),e.trigger({type:"shown.bs.tab",relatedTarget:i[0]})})}}},a.prototype.activate=function(e,o,i){function r(){s.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find("[data-toggle=\"tab\"]").attr("aria-expanded",!1),e.addClass("active").find("[data-toggle=\"tab\"]").attr("aria-expanded",!0),l?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu").length&&e.closest("li.dropdown").addClass("active").end().find("[data-toggle=\"tab\"]").attr("aria-expanded",!0),i&&i()}var s=o.find("> .active"),l=i&&t.support.transition&&(s.length&&s.hasClass("fade")||!!o.find("> .fade").length);s.length&&l?s.one("bsTransitionEnd",r).emulateTransitionEnd(a.TRANSITION_DURATION):r(),s.removeClass("in")};var i=t.fn.tab;t.fn.tab=o,t.fn.tab.Constructor=a,t.fn.tab.noConflict=function(){return t.fn.tab=i,this};var r=function(a){a.preventDefault(),o.call(t(this),"show")};t(document).on("click.bs.tab.data-api","[data-toggle=\"tab\"]",r).on("click.bs.tab.data-api","[data-toggle=\"pill\"]",r)}(jQuery),+function(e){'use strict';var t=function(e,t){this.init("popover",e,t)};if(!e.fn.tooltip)throw new Error("Popover requires tooltip.js");t.VERSION="3.3.7",t.DEFAULTS=e.extend({},e.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:"<div class=\"popover\" role=\"tooltip\"><div class=\"arrow\"></div><h3 class=\"popover-title\"></h3><div class=\"popover-content\"></div></div>"}),t.prototype=e.extend({},e.fn.tooltip.Constructor.prototype),t.prototype.constructor=t,t.prototype.getDefaults=function(){return t.DEFAULTS},t.prototype.setContent=function(){var e=this.tip(),t=this.getTitle(),o=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof o?"html":"append":"text"](o),e.removeClass("fade top bottom left right in"),e.find(".popover-title").html()||e.find(".popover-title").hide()},t.prototype.hasContent=function(){return this.getTitle()||this.getContent()},t.prototype.getContent=function(){var e=this.$element,t=this.options;return e.attr("data-content")||("function"==typeof t.content?t.content.call(e[0]):t.content)},t.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var o=e.fn.popover;e.fn.popover=function(o){return this.each(function(){var a=e(this),i=a.data("bs.popover");!i&&/destroy|hide/.test(o)||(!i&&a.data("bs.popover",i=new t(this,"object"==typeof o&&o)),"string"==typeof o&&i[o]())})},e.fn.popover.Constructor=t,e.fn.popover.noConflict=function(){return e.fn.popover=o,this}}(jQuery),"use strict",$.ajaxSetup({headers:{"X-CSRF-TOKEN":app.token}}),jQuery.fn.reverse||(jQuery.fn.reverse=[].reverse),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var t=Object(this),o=t.length>>>0,a=arguments[1],r=0,s;r<o;r++)if(s=t[r],e.call(a,s,r,t))return s}}),Number.prototype.money=function(e,t){var t=!("undefined"!=typeof t)||t,o=0,a="\\d(?=(\\d{"+(3||3)+"})+"+"$"+")",i=this.toFixed(Math.max(0,~~o)).replace(new RegExp(a,"g"),"$& ")+" "+(e||"p.");return t?i.replace(/ /g,"&nbsp;"):i},app.isSecure=function(){return"https:"===location.protocol},String.prototype.hasBadWords=function(){return /г[ао]вн|ху[ейёя]|пидо|пизд|блять|ебать|заеб[ао]|\sбля[тд]?/i.test(this)||/asdf|фыва|sfas|ыфв|qwer|zxc|cvz/i.test(this)||/^(.)\1+$/.test(this)||/<script/i.test(this)},Date.prototype.diffString=function(e){var t=Math.floor,o="string"==typeof e?new Date(e):e,a=new DateDiff(o,this),i="",r=t(a.years());r&&(i=" \u043B\u0435\u0442",1==r%10&&11!==r&&(i=" \u0433\u043E\u0434"),1<r%10&&5>r%10&&(10>r||20<r)&&(i=" \u0433\u043E\u0434\u0430"));var s="",l=t(a.months()%12);l&&(s=" \u043C\u0435\u0441\u044F\u0446\u0435\u0432",1===l&&(s=" \u043C\u0435\u0441\u044F\u0446"),1<l&&5>l&&(s=" \u043C\u0435\u0441\u044F\u0446\u0430"));var n="",d=t(a.days()%365);d&&(n=" \u0434\u043D\u0435\u0439",1==d%10&&11!==d&&(n=" \u0434\u0435\u043D\u044C"),1<d%10&&5>d%10&&(10>d||20<d)&&(n=" \u0434\u043D\u044F"));var c="",p=t(a.hours()%24);p&&(c=" \u0447\u0430\u0441\u043E\u0432",1==p%10&&11!==p&&(c=" \u0447\u0430\u0441"),1<p%10&&5>p%10&&(10>p||20<p)&&(c=" \u0447\u0430\u0441\u0430"));var u="",g=t(a.minutes()%60);return g&&(u=" \u043C\u0438\u043D\u0443\u0442",1==g%10&&11!==g&&(u=" \u043C\u0438\u043D\u0443\u0442\u0430"),1<g%10&&5>g%10&&(10>g||20<g)&&(u=" \u043C\u0438\u043D\u0443\u0442\u044B")),((r?""+r+i+" ":"")+(l?""+l+s+" ":"")+(d?""+d+n+" ":"")+(p?""+p+c+" ":"")+(g?""+g+u+" ":"")).trim()},app.tabActive=!0,document.addEventListener("visibilitychange",function(){app.tabActive=!document.hidden},!1),app.userAction=function(e,t,o,a){$.post("/api/user_action/",{action:e,id:t,sid:"undefined"==typeof o?null:o,params:"undefined"==typeof a?null:a})},app.partnersSearchResult=function(e){var t="";e.forEach(function(e){t+="<p class=\"clearfix\" style=\"margin-bottom:10px;\"><span class=\"pull-left\" style=\"margin-right:10px;width:64px;\"><a href=\""+e.adv_url+"\" target=\"_blank\"><img style=\"max-width: 64px\" src=\""+e.image+"\"/></a></span> <a href=\""+e.adv_url+"\" target=\"_blank\">"+e.name+"</a><br/><span class=\"text-muted\">"+e.price_money+"</span> <img src=\"/images/stores/icons/"+e.partner+".gif\"/>&nbsp;<a href=\""+e.adv_url+"\" target=\"_blank\" class=\"underlined\">"+e.partner+"</a></p>"});$("<div class=\"modal fade\">            <div class=\"modal-dialog modal-lg\">            <div class=\"modal-content\">            <div class=\"modal-header\">            <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-hidden=\"true\">\xD7</button>        <h4 class=\"modal-title\">\u041C\u044B \u043D\u0438\u0447\u0435\u0433\u043E \u043D\u0435 \u043D\u0430\u0448\u043B\u0438, \u043F\u043E\u0445\u043E\u0436\u0438\u0435 \u0442\u043E\u0432\u0430\u0440\u044B \u0435\u0441\u0442\u044C \u0443 \u043F\u0430\u0440\u0442\u043D\u0435\u0440\u043E\u0432</h4>        </div>        <div class=\"modal-body\">  "+t+"        </div>        </div>        </div>        </div>").modal("show")},$("form[name=search]").on("submit",function(){var e=$(this).find("[name=sku]"),t=e.val();return 3>t.length?(toastr.warning("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043C\u0438\u043D\u0438\u043C\u0443\u043C 3 \u0441\u0438\u043C\u0432\u043E\u043B\u0430"),!1):e.prop("disabled")?(toastr.warning("\u041F\u043E\u0434\u043E\u0436\u0434\u0438\u0442\u0435, \u0443\u0436\u0435 \u043F\u043E\u0447\u0442\u0438 \u043D\u0430\u0448\u043B\u0438"),!1):(e.prop("disabled",!0),$.post("/api/search",{sku:t},function(o){"error"==o.status?o.partners&&o.partners.length?app.partnersSearchResult(o.partners):toastr.error("\u041F\u043E \u0432\u0430\u0448\u0435\u043C\u0443 \u0437\u0430\u043F\u0440\u043E\u0441\u0443 \u043D\u0438\u0447\u0435\u0433\u043E \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u043E. \u0412\u044B \u043C\u043E\u0436\u0435\u0442\u0435 \u043E\u0442\u043F\u0440\u0430\u0432\u0438\u0442\u044C \u043D\u0430\u043C \u0441\u0441\u044B\u043B\u043A\u0443 \u043D\u0430 \u0442\u043E\u0432\u0430\u0440 \u0438 \u043C\u044B \u0434\u043E\u0431\u0430\u0432\u0438\u043C \u0435\u0433\u043E \u043D\u0430 \u0441\u0430\u0439\u0442!"):("success"==o.status&&toastr.success("\u0410\u0440\u0442\u0438\u043A\u0443\u043B "+t+" \u043D\u0430\u0439\u0434\u0435\u043D!"),window.location.href=o.redirect),e.prop("disabled",!1)}),!1)}),$("#btn-sku-correction").on("click",function(){var e=$(this),t=$(".product-aggregate");t.find(".sku-new-value[data-done=\"0\"]").each(function(e,t){var o=$(t);o.append("<select class=\"input\">             <option value=\"\" class=\"text-muted\">\u0427\u0442\u043E \u043D\u0435 \u0442\u0430\u043A?</option>             <option value=\"1\">\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u0442\u043E\u0432\u0430\u0440</option>             <option value=\"10\">\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0430\u044F \u0446\u0435\u043D\u0430</option>             <option value=\"20\">\u0421\u0441\u044B\u043B\u043A\u0430 \u043D\u0435 \u0440\u0430\u0431\u043E\u0442\u0430\u0435\u0442</option>         </select>"),o.attr("data-done","1")});var o=e.data("state");if(o="undefined"!=typeof o&&o?1:0,0==o)t.find(".sku-current-value").addClass("hidden"),t.find(".sku-new-value").removeClass("hidden"),e.data("state",1),e.addClass("btn-danger"),e.text("\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u0438\u0437\u043C\u0435\u043D\u0435\u043D\u0438\u044F");else{var a=[];t.find(".sku-new-value").each(function(e,t){var o=$(t),i=o.children("select"),r=i.val(),s=o.data("value");r.length&&r&&a.push({store_id:o.data("store-id"),cross_id:o.data("cross-id"),product_id:o.data("product-id"),sku:i.val()})}),a.length?(e.data("state",2),e.attr("disabled","diasbled"),e.off("click"),t.find(".sku-current-value").removeClass("hidden"),t.find(".sku-new-value").addClass("hidden"),$.post("/api/sku_correction/",{items:a},function(){toastr.info("\u0423\u0442\u043E\u0447\u043D\u0435\u043D\u0438\u044F \u043F\u0440\u0438\u043D\u044F\u0442\u044B")})):toastr.warning("\u0423\u043A\u0430\u0436\u0438\u0442\u0435 \u043D\u0435\u0432\u0435\u0440\u043D\u044B\u0435 \u043F\u043E\u0437\u0438\u0446\u0438\u0438")}return!1}),$("#a-submit-product").on("click",function(){var e=$(this);if(e.attr("disabled"))return!1;var t=prompt("\u0423\u043A\u0430\u0436\u0438\u0442\u0435 \u043D\u0430\u0437\u0432\u0430\u043D\u0438\u0435, \u0438\u043B\u0438 \u0441\u0441\u044B\u043B\u043A\u0443 \u043D\u0430 \u0442\u043E\u0432\u0430\u0440");return!!(t&&t.length)&&(6>t.length?toastr.error("\u0421\u043B\u0438\u0448\u043A\u043E\u043C \u043A\u043E\u0440\u043E\u0442\u043A\u043E\u0435 \u0441\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u0435"):t.hasBadWords()?toastr.error("\u0427\u0442\u043E \u0432\u044B \u0438\u043C\u0435\u0435\u0442\u0435 \u0432\u0432\u0438\u0434\u0443? \u041F\u043E\u043F\u0440\u043E\u0431\u0443\u0439\u0442\u0435 \u0441\u0444\u043E\u0440\u043C\u0443\u043B\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0434\u0440\u0443\u0433\u0438\u043C\u0438 \u0441\u043B\u043E\u0432\u0430\u043C\u0438"):$.post("/api/propose_product",{text:t},function(){toastr.success("\u0421\u043F\u0430\u0441\u0438\u0431\u043E, \u0412\u0430\u0448\u0435 \u043F\u0440\u0435\u0434\u043B\u043E\u0436\u0435\u043D\u0438\u0435 \u0431\u0443\u0434\u0435\u0442 \u0440\u0430\u0441\u0441\u043C\u043E\u0442\u0440\u0435\u043D\u043E \u0432 \u0431\u043B\u0438\u0436\u0430\u0439\u0448\u0435\u0435 \u0432\u0440\u0435\u043C\u044F. \u041D\u043E\u0432\u044B\u0435 \u0442\u043E\u0432\u0430\u0440\u044B \u043C\u043E\u0436\u043D\u043E \u043F\u0440\u043E\u0432\u0435\u0440\u0438\u0442\u044C \u043D\u0430 \u0441\u0442\u0440\u0430\u043D\u0438\u0446\u0435 http://hardprice.ru/last20"),e.attr("disabled",1)}),!1)}),app.ratings={voteHandler:function(e){var t=e.is(".rate-up")?1:-1,o=e.parents(".rating-control");this.vote(o.data("class-id"),o.data("entity-id"),t).done(function(a){if(!a.status)toastr.error(a.message);else{var i=e.find("span.value");i.text(Math.abs(t)+parseInt(1*i.text())),e.addClass(0<t?"btn-success":"btn-danger")}o.addClass("disabled"),o.children("a").each(function(e,t){$(t).unbind("click").prop("disabled",!0).addClass("disabled")})}).fail(function(e){var t=e.message||"\u0427\u0442\u043E-\u0442\u043E \u043D\u0435 \u0442\u0430\u043A \u0441 \u0441\u0435\u0440\u0432\u0435\u0440\u043E\u043C, \u043E\u043D \u043F\u043E\u043A\u0430 \u043D\u0435 \u043F\u0440\u0438\u043D\u0438\u043C\u0430\u0435\u0442 \u043B\u0430\u0439\u043A\u0438..";toastr.error(t)})},vote:function(e,t,o){return $.post("/api/content/rating/post",{class_id:e,entity_id:t,value:o})},voteUp:function(){},voteDown:function(){},bindRatings:function(e){"undefined"==typeof e&&(e=$("body")),e.find(".rating-control:not(.disabled) > a").on("click",function(){var e=$(this);return app.ratings.voteHandler(e),!1})}},app.microTemplateDOT=function(e,t){return e.replace(/\%([\w\-_\.]+)\%/gi,function(e,o){var a=t;return o.split(".").forEach(function(e){a=a[e]}),a})},app.microTemplate=function(e,t){for(var o in t)if(t.hasOwnProperty(o)){var a=new RegExp("%"+o+"%","g");e=e.replace(a,t[o])}return e},app.favs={favs:[],has:function(e){var t=$.inArray(e,this.favs);return!!(0<=t)&&t},toggle:function(e){if(!auth.loggedIn())return auth.loginBox(),!1;var t=0<=$.inArray(e,this.favs);t?this.remove(e):this.add(e)},add:function(e){var t=this;$.post("/user/fav/add",{id:e},function(){t.favs.push(e),$(".a-fav[data-id="+e+"]").addClass("btn-success")})},remove:function(e){var t=this;$.post("/user/fav/remove",{id:e},function(){var o=$.inArray(e,t.favs);delete t.favs[o],$(".a-fav[data-id="+e+"]").removeClass("btn-success")})},syncDom:function(e){e=e||$(document);var t=this;e.find(".a-fav").each(function(e,o){var a=$(o),i=!1!==t.has(a.data("id"));i&&a.addClass("btn-success")})},bindEvents:function(e){e=e||$(document),e.find(".a-fav").on("click",function(){app.favs.toggle($(this).data("id"))})}},app.currencies={1:{title:"\u0420\u0443\u0431\u043B\u044C",slug:"RUB",symbol:"\u20BD",value:1},2:{title:"\u0414\u043E\u043B\u043B\u0430\u0440 \u0421\u0428\u0410",slug:"USD",symbol:"$",value:63},3:{title:"\u0415\u0432\u0440\u043E",slug:"EUR",symbol:"\u20AC",value:70},4:{title:"\u0413\u0440\u0438\u0432\u043D\u0430",slug:"UAH",symbol:"\u20B4",value:2.63}},app.region={_regionDialog:null,showRegionDialog:function(){var e=this,t=function(e){var t=$.Deferred();return e._regionDialog?(t.resolve("0"),t):($.get("/api/user/region/switcher").done(function(o){e._regionDialog=!0,$("body").append(o),t.resolve("1")}).fail(function(){t.reject("whut")}),t)}(this);return t.then(function(){$("#regionBox").modal("show")}).fail(function(){}),!1}},app.showCatalog=function(){return $("#catalogBox").length?void $("#catalogBox").modal("show"):void $.get("/category").done(function(e){$("body").append(e),$("#catalogBox").modal("show")})},app.bindHider=function(e){e=e||$(document),e.find(".img-holder.with-hider").each(function(e,t){var o=$(t),a=o.children("img"),i=$("<div class=\"hider active\"><span class=\"hider-toggle\">- - - - - - - - - - - <i class=\"fa fa-scissors\" aria-hidden=\"true\"></i> \u043F\u043E\u043A\u0430\u0437\u0430\u0442\u044C \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 <i class=\"fa fa-scissors\" aria-hidden=\"true\"></i> - - - - - - - - - - -</span> </div>");i.on("click",function(){return $(this).removeClass("active").off("click"),!1}),i.append(a),o.prepend(i)})},$(function(){app.auth.bindAuth(),$("#btn-logout").on("click",function(){return auth.logout(),!1}),$("[data-toggle=\"tooltip\"]").tooltip(),$(".user-action").on("click",function(){var e=$(this);app.userAction(e.data("action"),e.data("id"),e.data("sid"),e.data("params"))}),$("#dpm").off().on("click",function(){var e=$(window).width();if(1.2<window.devicePixelRatio&&1.5>=window.devicePixelRatio&&(e=e/window.devicePixelRatio+459),1260<=e)return window.location.href="/",!1}),app.favs.bindEvents(),app.favs.syncDom(),ItemsController.bindClickableColumns(),new Clipboard(".clip-copy",{}).on("success",function(t){toastr.info($(t.trigger).data("success"))}),$(".navbar-header .dropdown").on("show.bs.dropdown",function(){$(this).find(".dropdown-menu").first().stop(!0,!0).slideDown(200)}),$(".navbar-header .dropdown").on("hide.bs.dropdown",function(){$(this).find(".dropdown-menu").first().stop(!0,!0).hide()}),$(".grid").on("click",".feedly-item",function(){window.location.href=$(this).find("a").attr("href")}),app.ratings.bindRatings(),$(".show-catalog").on("click",function(){return app.showCatalog(),!1}),app.auth.loggedIn()&&app.notifications.init()}),"use strict";var Auth={user:{id:0},_authBox:null,loggedIn:function(){return 0<this.user.id},loginBox:function(e){var t=this,o=function(t){var o=$.Deferred();return t._authBox?(o.resolve("0"),o):($.get("/templates/authbox.html").done(function(a){t._authBox=!0,$("body").append(a),$(".auth-box > .auth-provider").on("click",function(){return auth.login($(this).data("type"),e),!1}),o.resolve("1")}).fail(function(){o.reject("whut")}),o)}(this);return o.then(function(){$("#authBox").modal("show"),$(".tooltip").remove()}).fail(function(){}),!1},loginBoxPromise:function(e){var t=auth,o=new Promise(function(o,a){return t._authBox?void o("0"):void $.get("/templates/authbox.html").done(function(a){t._authBox=!0,$("body").append(a),$(".auth-box > .auth-provider").on("click",function(){return auth.login($(this).data("type"),e),!1}),o("1")}).fail(function(){a("whut")})});return o.then(function(){$("#authBox").modal("show")},function(){}),!1},login:function(e,t){return"undefined"!=typeof t&&t||(t=window.location.pathname),location.href="/auth/"+e+"?redirect="+t,!1},logout:function(){return toastr.info("\u0412\u044B\u0445\u043E\u0434..."),$.get("/lk/logout",function(){}),window.location.href="/",!1},loginDone:function(e){"success"==e.status?(toastr.success("\u041F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044C \u043F\u0440\u043E\u0432\u0435\u0440\u0435\u043D!"),window.location.href="/lk"):toastr.error("Error: You shall not pass!")},bindAuth:function(e){"undefined"==typeof e&&(e=$("body")),e.find(".auth-login").on("click",function(){var e=$(this).attr("href");return auth.loginBox(e),!1})}};app.auth=$.extend({},Auth,app.auth);var auth=app.auth;function Configurator(){function e(e){return $(".configurator-category[data-id="+e+"] > .configurator-positions")}function t(e){var t=new $.Deferred;return f[e]?t.resolve(f[e]):$.post("/api/product/",{id:e},function(o){f[e]=o,t.resolve(f[e])}),t}function o(e){for(var t in m.products){var o=m.products[t];if(o.id==e)return t}return-1}function a(e){return m.products.filter(function(t){return t.category_id==e})}function i(t){var o=e(t.category_id);o.append(p(t))}function r(t){var o=e(t.category_id);o.find(".configurator-product[data-id="+t.id+"]:first").remove()}function s(e){$(".configurator-category[data-id="+e+"] .configurator-slots > span:first-child").text(a(e).length)}function l(e){return m.products.filter(function(t){return t.id==e})}function n(e){return m.categories.find(function(t){if(t.id==e)return!0})}function d(e){return"/category/"+e.slug}function c(e){return"/"+e.sku+"-"+e.slug}function p(e){var t=e.title.replace(/[а-яА-Я]+/g,""),t=t.replace(/\([^\)]+\)/g,""),o=b(e);o=o?o.money():"\u043D\u0435\u0442";var a="<div class=\"configurator-product\" data-id=\""+e.id+"\"><span><a class=\"btn btn-xs btn-danger btn-remove\" onclick=\"configurator.removeProductById("+e.id+");return false;\">x</a><a class=\"configurator-product-link\" href=\""+c(e)+"\">"+t+"</a> <span c1lass=\"label label-xs label-default p1ull-right\" style=\"pa1dding:2px 4px; font-size:11px;\">"+o+"</span> </span></div>";return a}function u(e){e=!("undefined"!=typeof e)||e,$("#configurator-title-input").val(m.title),m.hash&&"0"!=m.hash?($("a#configurator-link").attr("href","/rig/"+m.hash),e&&$("a#configurator-link").removeClass("hidden")):$("a#configurator-link").addClass("hidden")}function g(e){var t="<div class=\"modal fade\">            <div class=\"modal-dialog modal-lg\">            <div class=\"modal-content\">            <div class=\"modal-header\">            <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-hidden=\"true\">\xD7</button>        <h4 class=\"modal-title\"><i class=\"fa fa-exclamation-triangle\" aria-hidden=\"true\"></i> \u0422\u0430\u043A\u0430\u044F \u0441\u0431\u043E\u0440\u043A\u0430 \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442</h4>        </div>        <div class=\"modal-body\">        <p>\u041A\u0442\u043E-\u0442\u043E \u0443\u0436\u0435 \u0441\u043E\u0437\u0434\u0430\u043B \u0442\u0430\u043A\u0443\u044E \u0436\u0435 \u043A\u043E\u043D\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044E.</p>         <p>\u041F\u043E\u0441\u043C\u043E\u0442\u0440\u0435\u0442\u044C \u0441\u0431\u043E\u0440\u043A\u0443 <i class=\"fa fa-cube\" aria-hidden=\"true\"></i> <a class=\"underlined\" href=\"/rig/%slug%\">%title%</a> %value%         </p><p>\u0412\u044B \u0432\u0441\u0435 \u0435\u0449\u0435 \u043C\u043E\u0436\u0435\u0442\u0435 \u0441\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u0432\u0430\u0448\u0443 \u0441\u0431\u043E\u0440\u043A\u0443 \u043F\u043E\u043C\u0435\u0442\u0438\u0432 \u0435\u0435 \u043A\u0430\u043A &laquo;\u043F\u0440\u0438\u0432\u0430\u0442\u043D\u0430\u044F&raquo;.        <p>\u0422\u0430\u043A\u0430\u044F \u0441\u0431\u043E\u0440\u043A\u0430 \u0431\u0443\u0434\u0435\u0442 \u0434\u043E\u0441\u0442\u0443\u043F\u043D\u0430 \u0442\u043E\u043B\u044C\u043A\u043E \u043F\u043E\u043F\u0440\u044F\u043C\u043E\u0439 \u0441\u0441\u044B\u043B\u043A\u0435.         </p><p>\u041F\u0440\u0438\u0432\u0430\u0442\u043D\u044B\u0435 \u0441\u0431\u043E\u0440\u043A\u0438 \u043D\u0435 \u0432\u044B\u0432\u043E\u0434\u044F\u0442\u0441\u044F \u043D\u0430 \u0441\u0430\u0439\u0442\u0435, \u043D\u043E \u043E\u043D\u0438 \u0434\u043E\u0441\u0442\u0443\u043F\u043D\u044B \u0432 \u0432\u0430\u0448\u0435\u043C \u043B\u0438\u0447\u043D\u043E\u043C \u043A\u0430\u0431\u0438\u043D\u0435\u0442\u0435.         </p>        </div>         <div class=\"modal-footer\">            <span class=\"pull-left\">                 <button type=\"button\" class=\"hidden btn btn-primary\">\u041F\u0440\u0438\u0432\u0430\u0442\u043D\u0430\u044F!</button>            </span>             <button type=\"button\" class=\"hidden btn btn-primary\">Save changes</button>            <button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">\u041E\u043A\u0435\u0439</button>            </div>        </div>        </div>        </div>";e.value=(+e.value).money(),t=app.microTemplate(t,e);$(t).modal("show")}var m=this,h={successClass:"btn-default",priceField:"computeruniverse_price",priceField2:"regard_price",rowSelector:".products-list-v2__item"};this.title="",this.id=null,this.hash=null,this.categories=[],this.products=[],this.$content=null,this.sum=0,this._currentCategoryId=app.categoryId;var f={};this.init=function(e){this.restoreProducts(),this.categories=e,this.createContainer(),this.render(),this.bindConfiguratorEvents()},this.bindEvents=function(e){e=e||$(document);e.find(".a-configurator").on("click",function(){var e=$(this),o=$(this).data("id");return e.hasClass("btn-danger")?(toastr.error("\u041F\u0440\u0435\u0432\u044B\u0448\u0435\u043D \u043B\u0438\u043C\u0438\u0442 \u0434\u0430\u043D\u043D\u043E\u0439 \u043A\u0430\u0442\u0435\u0433\u043E\u0440\u0438\u0438!"),!1):(t(o).then(function(e){m.toggleProduct(e)}),!1)});e.find(".configurator-toggle").on("click",function(){var e=m.getContainer(),t=e.hasClass("minimized");return($(".tooltip").remove(),1==$(this).data("force-show"))?(localStorage.hard_4zu_show=1,!e.hasClass("minimized"))?void toastr.info("\u041A\u043E\u043D\u0444\u0438\u0433\u0443\u0440\u0430\u0442\u043E\u0440 \u0443\u0436\u0435 \u043E\u0442\u043A\u0440\u044B\u0442 &darr;"):(e.removeClass("minimized"),void $("#configurator-toggle").removeClass(" minimized").addClass(h.successClass)):void(localStorage.hard_4zu_show=t?"1":"0",e.toggleClass("minimized"),$("#configurator-toggle").toggleClass(h.successClass+" minimized"))})},this.bindConfiguratorEvents=function(){$("#configurator").on("click",".configurator-category > .configurator-positions:empty",function(){var e=$(this).prev("h5").children("a").attr("href");window.location.href=e}),$("#configurator-title-input").on("input",function(){m.title=this.value}),$("#configurator-save").on("click",function(){return m.saveRemote(),!1}),$("#configurator-preview").on("click",function(){return m.previewRig(),!1}),$(window).on("unload",function(){m.saveProducts()}),this.bindEvents()},this.show=function(){$(".tooltip").remove(),localStorage.hard_4zu_show=1,m.getContainer().removeClass("minimized"),$("#configurator-toggle").removeClass("minimized")},this.restoreProducts=function(){var e;this.title=(e=localStorage.getItem("hard_4zu_title"))?e:"",this.id=(e=localStorage.getItem("hard_4zu_id"))?e:0,this.hash=(e=localStorage.getItem("hard_4zu_hash"))?e:0;try{this.products=JSON.parse(window.localStorage.getItem("hard_4zu_products"))}catch(t){this.products=[]}null===this.products&&(this.products=[])},this.saveProducts=function(){window.localStorage.setItem("hard_4zu_products",JSON.stringify(this.products)),localStorage.hard_4zu_title=this.title,localStorage.hard_4zu_id=this.id,localStorage.hard_4zu_hash=this.hash},this.getProduct=function(e){return m.products.find(function(t){return t.id==e})},this.addProduct=function(e){this.products.push(e),i(e)},this.removeProductById=function(e){var t=this.getProduct(e);this.removeProduct(t);s(t.category_id),this.onChange()},this.removeProduct=function(e){var t=o(e.id);return-1!==t&&(1==this.products.length?this.products=[]:this.products.splice(t,1),r(e),!0)},this.toggleProduct=function(t){var i=e(t.category_id),r=o(t.id),l=n(t.category_id),d=1*l.slots,c=a(t.category_id);if(c.length>=d){var p=c[0];this.removeProduct(p)}this.addProduct(t),s(l.id),this.onChange(),this.show()},this.syncButtonsDom=function(e){if(e=e||$(document),!m.products||!m.products.length)return void e.find("a.a-configurator").each(function(){var e=$(this),t=e.data("with-text")||"";e.addClass(h.successClass).removeClass("btn-warning btn-danger"),e.html(t),e.data("count",0)});var t={};e.find("a.a-configurator").each(function(){var e=$(this),o=e.data("with-text")||"",a=e.data("id"),i=e.data("pid");a in t||(t[a]=l(a).length);var r=t[a],s=n(i);if(s){var d=s?1*s.slots:1,c=h.successClass;return d?void(0<r&&r<d?c="btn-warning":0<r&&r==d&&(c="btn-danger"),!e.hasClass(c)&&e.removeClass(h.successClass+" btn-warning btn-danger").addClass(c),c==h.successClass?(e.html(o),e.data("count",0)):(e.html(o+" "+r),e.data("count",r))):void e.hide()}})};var b=function(e){return+e.computeruniverse_price||+e.pleer_price||+e.regard_price};this.onChange=function(){var e=$("#configurator-summary"),t=$("#configurator-buttons"),o=$("#configurator-title-input"),a=this.products.length,r=0;for(var s in this.products){var i=this.products[s];r+=1*b(i)}this.sum=r,$("#configurator-summ").html(0<r?r.money():""),e.find("div[rel=content]").html("<b class=\"lab1el lab1el-default\">\u0418\u0442\u043E\u0433\u043E ="+r.money()+"</b>"),0<r?e.removeClass("hidden"):e.addClass("hidden"),2<a?t.removeClass("hidden"):t.addClass("hidden"),3<a?o.removeClass("hidden"):o.addClass("hidden"),this.syncButtonsDom()},this.getContainer=function(){return $("#configurator")},this.createContainer=function(){var e=app.auth.user&&app.auth.user.id,t=0;"undefined"==typeof localStorage.hard_4zu_show||"1"===localStorage.hard_4zu_show&&(t=1),1600>$(window).width()&&(t=0);var o=t?"":" minimized";$(".navbar-fixed-top").append("<a class=\"btn btn-warning btn-sm configurator-toggle "+o+"\" id=\"configurator-toggle\"><span id=\"configurator-title\" title=\"\u041A\u043E\u043D\u0444\u0438\u0433\u0443\u0440\u0430\u0442\u043E\u0440\"><i class=\"fa fa-cart-plus\"></i></span> <b id=\"configurator-summ\"></b> </a>"),$("body").append("<div id=\"configurator\" class=\"navbar-default "+o+"\"><div rel=\"content\"></div><div id=\"configurator-summary\" class=\"hidden\"><a style=\"float:right\" class=\"btn btn-xs btn-danger\" onclick=\"configurator.cleanDialog();return false;\"><i class=\"fa fa-trash-o\" aria-hidden=\"true\"></i> \u041E\u0447\u0438\u0441\u0442\u0438\u0442\u044C</a><div rel=\"content\"></div></div><p><a id=\"configurator-preview\" class=\"btn-info btn btn-xs\" style=\"width: 100%;\"><i class=\"fa fa-cube\"></i> \u041F\u0440\u043E\u0432\u0435\u0440\u0438\u0442\u044C \u0441\u0431\u043E\u0440\u043A\u0443</a> </p><div id=\"configurator-buttons\">"+(e?"<p style=\"margin-bottom:4px;\"><input title=\"\u041D\u0430\u043F\u0440\u0438\u043C\u0435\u0440, i7 7700 + GTX 1070\" id=\"configurator-title-input\" type=\"text\" class=\"input\" value=\"\" placeholder=\"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 \u0432\u0430\u0448\u0435\u0439 \u0441\u0431\u043E\u0440\u043A\u0438\" style=\"width:100%;margin-bottom:4px;\" minlength=\"8\" maxlength=\"60\"/></p><p><a id=\"configurator-save\" class=\"btn-primary btn btn-xs\" style=\"width: 100%;\"><i class=\"fa fa-save\"></i> \u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C \u0438\u043B\u0438 \u043F\u043E\u0434\u0435\u043B\u0438\u0442\u044C\u0441\u044F</a> </p><p><a id=\"configurator-link\" class=\"btn-success btn btn-xs hidden\" style=\"width: 100%;\" href=\"\" title=\"\u041F\u0435\u0440\u0435\u0439\u0442\u0438 \u043A \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u043D\u043E\u0439 \u0441\u0431\u043E\u0440\u043A\u0435\"><i class=\"fa fa-link\" aria-hidden=\"true\"></i> \u041F\u0435\u0440\u0435\u0439\u0442\u0438 \u043A \u0441\u0431\u043E\u0440\u043A\u0435</a></p>":"<p style=\"margin-bottom:4px;\"><a class=\"btn-primary btn btn-xs auth-login\" style=\"width: 100%;\" href=\""+window.location.href+"\" class=\"\" rel=\"nofollow\"> <i class=\"fa fa-sign-in\" aria-hidden=\"true\"></i> \u0412\u043E\u0439\u0434\u0438\u0442\u0435 \u0447\u0442\u043E\u0431\u044B \u0441\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C</a></p>")+"</div></div>"),this.$content=$("#configurator > div[rel=content]")},this.renderCategory=function(e){var t=this._currentCategoryId==e.id?"active":"",o="<div class=\"configurator-category "+t+"\" data-id=\""+e.id+"\"><h5><a href=\""+d(e)+"\">"+e.title+"</a>  <p class=\"configurator-slots\"><span>"+a(e.id).length+"</span>/<span>"+e.slots+"</span></p></h5>";return o+="<div class=\"configurator-positions\"></div> ",o+="</div>",o},this.render=function(){m.$content.empty(),this.categories.forEach(function(e){m.$content.append(m.renderCategory(e))}),this.products.length&&this.products.forEach(function(t){var o=e(t.category_id);o.append(p(t))}),this.onChange(),u()},this.cleanDialog=function(){var e=confirm("\u041D\u0430\u0447\u0430\u0442\u044C \u043D\u043E\u0432\u0443\u044E \u0441\u0431\u043E\u0440\u043A\u0443?");e&&this.clean()},this.clean=function(){this.title="",this.id="",this.hash="",this.products=[],this.saveProducts(),this.render()},this.previewRig=function(){if(3>this.products.length)return toastr.error("\u0412 \u0441\u0431\u043E\u0440\u043A\u0435 \u0434\u043E\u043B\u0436\u043D\u043E \u0431\u044B\u0442\u044C \u043C\u0438\u043D\u0438\u043C\u0443\u043C \u0442\u0440\u0438 \u0442\u043E\u0432\u0430\u0440\u0430!"),!1;var e="/rig/preview/",t={};this.products.forEach(function(o){"undefined"==typeof t[o.id]&&(t[o.id]=0),t[o.id]++,e+=o.id+","}),e=e.substr(0,e.length-1),window.location.href=e,$("#configurator-preview").attr("disabled","disabled")},this.saveRemote=function(){var e=$("#configurator-save"),t={},o=$("#configurator-title-input").val();return t.title=o?o:this.title,t.products=[],this.products.forEach(function(e){t.products.push(e.id)}),4>t.products.length?(toastr.error("\u0414\u043E\u043F\u043E\u043B\u043D\u0438\u0442\u0435 \u0441\u0431\u043E\u0440\u043A\u0443 \u0434\u043E 4 \u043F\u043E\u0437\u0438\u0446\u0438\u0439!"),!1):8>t.title.length?(toastr.warning("\u041F\u0440\u0438\u0434\u0443\u043C\u0430\u0439\u0442\u0435 \u0432\u0430\u0448\u0435\u0439 \u0441\u0431\u043E\u0440\u043A\u0435 \u043D\u0430\u0437\u0432\u0430\u043D\u0438\u0435, \u043D\u0430\u043F\u0440\u0438\u043C\u0435\u0440, \u041F\u041A \u0434\u043B\u044F \u0434\u0440\u0443\u0433\u0430 i5-9600K + RTX2060"),$("#configurator-title-input").focus(),!1):t.title.hasBadWords()||t.title.match(/^\d+$/)||t.title.match(/test|asdf|qwert|zxc|фыва|йцук|тест/i)||t.title.match(/^[С|с]борка$/)||t.title.match(/(.)\1{6,}/)?(toastr.warning("\u041F\u0440\u0438\u0434\u0443\u043C\u0430\u0439\u0442\u0435 \u0431\u043E\u043B\u0435\u0435 \u043B\u0443\u0447\u0448\u0435\u0435 \u043D\u0430\u0437\u0432\u0430\u043D\u0438\u0435, \u043D\u0430\u043F\u0440\u0438\u043C\u0435\u0440, \u041F\u041A \u0434\u043B\u044F \u0434\u0440\u0443\u0433\u0430 i3-9100 + GTX1660"),$("#configurator-title-input").focus(),!1):t.title.match(/совет|оцен|пожалуйста|менят|изменит|улучшит|заменит|требую|критик|шарю|скажит|помощ|помоги/i)?(toastr.error("\u041F\u0440\u0438\u0434\u0443\u043C\u0430\u0439\u0442\u0435 \u0434\u0440\u0443\u0433\u043E\u0435 \u043D\u0430\u0437\u0432\u0430\u043D\u0438\u0435, \u043D\u0430\u043F\u0440\u0438\u043C\u0435\u0440, \u041F\u041A \u0434\u043B\u044F \u0434\u0440\u0443\u0433\u0430 9600K + RTX2070. \u041F\u043E\u043F\u0440\u043E\u0441\u0438\u0442\u044C \u0441\u043E\u0432\u0435\u0442\u0430 \u0438\u043B\u0438 \u043E\u0446\u0435\u043D\u043A\u0438 \u0432\u044B \u0441\u043C\u043E\u0436\u0435\u0442\u0435 \u043F\u043E\u0441\u043B\u0435 \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u044F \u0441\u0431\u043E\u0440\u043A\u0438 \u043D\u0430\u0436\u0430\u0432 \u043A\u043D\u043E\u043F\u043A\u0443 \"\u041E\u0446\u0435\u043D\u0438\u0442\u0435\". \u0412 \u043D\u0430\u0437\u0432\u0430\u043D\u0438\u0438 \u0441\u0431\u043E\u0440\u043A\u0438 \u044D\u0442\u043E\u0433\u043E \u0434\u0435\u043B\u0430\u0442\u044C \u043D\u0435 \u043D\u0443\u0436\u043D\u043E.","",{timeOut:5e3}),$("#configurator-title-input").focus(),!1):void(t.hash=this.hash?this.hash:"",t.id=this.id?this.id:0,t.sum=this.sum,e.prop("disabled",1),$.post("/rig/save",t,function(t){if(0===t.status&&t.rig)return void g(t.rig);toastr.success("\u0421\u0431\u043E\u0440\u043A\u0430 \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0430"),e.removeClass("btn-danger"),e.prop("disabled",0);var o=t.data;m.id=o.id,m.hash=o.slug,m.title=o.title,u(!0);var a="/rig/"+m.hash;window.location.href=a}).fail(function(e){try{var t=JSON.parse(e.responseText)}catch(t){}toastr.error(t.message||"\u0427\u0442\u043E-\u0442\u043E \u043F\u043E\u0448\u043B\u043E \u043D\u0435 \u0442\u0430\u043A")}))},this.cloneRig=function(){if(confirm("\u041A\u043B\u043E\u043D\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435 \u043F\u0435\u0440\u0435\u0437\u0430\u043F\u0438\u0448\u0435\u0442 \u0432\u0430\u0448\u0443 \u0442\u0435\u043A\u0443\u0449\u0443\u044E \u0441\u0431\u043E\u0440\u043A\u0443 \u0432 \u043A\u043E\u043D\u0444\u0438\u0433\u0443\u0440\u0430\u0442\u043E\u0440\u0435, \u043F\u0440\u043E\u0434\u043E\u043B\u0436\u0438\u0442\u044C?")){this.clean();var e=$(".rig .products-list"),o=[];e.find(h.rowSelector).each(function(){var e=$(this),a=e.data("id");if(a){var r=1*e.find("b.product-count").text();o.push(t(a).then(function(e){for(var t=1;t<=r;t++)m.addProduct(e)}))}}),$.when.apply($,o).then(function(){m.onChange(),m.show()})}},this.rigPrivateAction=function(e){var t=confirm("\u0421\u0431\u043E\u0440\u043A\u0430 \u0431\u0443\u0434\u0435\u0442 \u0434\u043E\u0441\u0442\u0443\u043F\u043D\u0430 \u0442\u043E\u043B\u044C\u043A\u043E \u043F\u043E \u043F\u0440\u044F\u043C\u043E\u0439 \u0441\u0441\u044B\u043B\u043A\u0435. \u0421\u0434\u0435\u043B\u0430\u0442\u044C \u0441\u0431\u043E\u0440\u043A\u0443 \u043F\u0440\u0438\u0432\u0430\u0442\u043D\u043E\u0439?");if(t){var o=$(e);o.attr("disabled","disabled");var a={id:o.data("id")};$.post("/user/rig/private",a,function(){toastr.success("\u0421\u0431\u043E\u0440\u043A\u0430 \u0441\u0442\u0430\u043B\u0430 \u043F\u0440\u0438\u0432\u0430\u0442\u043D\u043E\u0439")}).fail(function(){toastr.error("\u043E\u0448\u0438\u0431\u043A\u0430 \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u044F \u0441\u0431\u043E\u0440\u043A\u0438")})}},this.rigAdviceAction=function(e){var t=$(e);t.attr("disabled","disabled");var o={id:t.data("id")};$.post("/user/rig/advice",o,function(){toastr.success("\u041F\u0430\u0440\u0430\u043C\u0435\u0442\u0440\u044B \u0441\u0431\u043E\u0440\u043A\u0438 \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u044B")}).fail(function(){toastr.error("\u043E\u0448\u0438\u0431\u043A\u0430 \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u044F \u0441\u0431\u043E\u0440\u043A\u0438")})},this.orderRig=function(e){var t=[0,0,0,0,0,0,0],o=$("<table>"),a=$("<tr>");return a.append("<th>\u041D\u0430\u0438\u043C\u0435\u043D\u043E\u0432\u0430\u043D\u0438\u0435</th>"),a.append("<th>\u041A\u043E\u043B-\u0432\u043E</th>"),["\u0420\u0435\u0433\u0430\u0440\u0434","\u041C\u0435\u0433\u0430\u0431\u0438\u0442","\u0421\u0438\u0442\u0438\u043B\u0438\u043D\u043A","\u041F\u043B\u0435\u0435\u0440.\u0440\u0443","CU","\u0414\u041D\u0421","OLDI"].forEach(function(e){a.append("<th>"+e+"</th>")}),o.append(a),$(".products-list-v2__item").each(function(e,i){a=$("<tr>");var r=$(i),s=r.find("a.title"),l=s.text(),n=s.attr("href"),d=0+r.find(".product-count").text();a.append("<th>"+l+(n?" <a href=\"http://hardprice.ru"+n+"\">\u043E\u0442\u043A\u0440\u044B\u0442\u044C</a>":"")+"</th>"),a.append("<th>"+(0<d?d:"")+"</th>"),r.find(".price-column").each(function(e,o){var i=$(o),s=r.is(".out-of-stock"),l=0+i.data("price");t[e]+=d*l,a.append("<th>"+l+"</th>")}),o.append(a)}),a=$("<tr>"),a.append("<th>\u0418\u0442\u043E\u0433\u043E</th>"),a.append("<th></th>"),t.forEach(function(e){a.append("<th>"+e+"</th>")}),o.append(a),a=$("<tr>"),o.append(a),a=$("<tr>"),a.append("<th colspan=\"9\">hardprice.ru <a href=\""+window.location.href+"\">\u043E\u0442\u043A\u0440\u044B\u0442\u044C \u0441\u0431\u043E\u0440\u043A\u0443</a> \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u043E "+new Date().toLocaleString()+"</th>"),o.append(a),ExcellentExport.excel(e,o[0],"rig")},this.orderRig_OLD=function(){var e="<div id=\"order-store-select\">";stores.forEach(function(t){13>=t.id&&0<=t.priority&&(e+="<p style=\"d1isplay:inline-block\"><a data-id=\""+t.id+"\" href=\"#\" class=\"link-no-effect\">&nbsp;"+t.title+"&nbsp;</a>&nbsp;</p>")}),e+="</div>";var t=$("<div class=\"modal fade\">            <div class=\"modal-dialog modal-lg\">            <div class=\"modal-content\">            <div class=\"modal-header\">            <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-hidden=\"true\">\xD7</button>        <h4 class=\"modal-title\">\u042D\u043A\u0441\u043F\u043E\u0440\u0442 \u0442\u043E\u0432\u0430\u0440\u043E\u0432 \u0441\u0431\u043E\u0440\u043A\u0438</h4>        </div>        <div class=\"modal-body\">            <div class=\"row\">            <div class=\"col-xs-4 col-sm-3 col-lg-3\">            <p class=\"help\">             <select id=\"order-store-options\" title=\"\u041E\u043F\u0446\u0438\u0438 \u0444\u043E\u0440\u043C\u044B\">                <option value=\"plain\">\u0411\u0435\u0437 \u0444\u043E\u0440\u043C\u0430\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u044F</option>                <option value=\"html\">\u0412 \u0444\u043E\u0440\u043C\u0430\u0442\u0435 HTML</option>                <option value=\"bbcode\">\u0412 \u0444\u043E\u0440\u043C\u0430\u0442\u0435 BBCODE</option>                <option value=\"skus\">\u0422\u043E\u043B\u044C\u043A\u043E \u0430\u0440\u0442\u0438\u043A\u0443\u043B\u044B</option>            </select>            </p>            <p class=\"help\">\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u043C\u0430\u0433\u0430\u0437\u0438\u043D</p>            "+e+"            </div>            <div class=\"col-xs-8 col-sm-9 col-lg-9\">                        <pre id=\"order-store-links\" class=\"h-scrollbars\" style=\"border:0;border-left:1px solid #e5e5e5;background:#FFF;width:100%;resize: none;height:390px;padding:10px;border-radius:0\"><i class=\"fa fa-spinner fa-spin\"></i> \u0424\u043E\u0440\u043C\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435 \u0441\u043F\u0438\u0441\u043A\u0430 \u0442\u043E\u0432\u0430\u0440\u043E\u0432            <br/><br/>            </pre>             </div>            </div>        </div>        </div>        </div>        </div>").on("shown.bs.modal",function(){var e=$(this).find("#order-store-select > p > a:first");setTimeout(function(){e.trigger("click")},500)}).modal("show");t.find("#order-store-options").on("change",function(){t.find("#order-store-select > p > a.bg-info").trigger("click")}),t.find("#order-store-select > p > a").on("click",function(){t.find("#order-store-select > p > a").removeClass("bg-info"),$(this).addClass("bg-info");var e=$(".rig").data("id"),o=$(this).data("id"),a=t.find("#order-store-links");return a.html(""),$.post("/rig/get_links",{store_id:o,id:e},function(e){var o=t.find("#order-store-options").val(),r="bbcode"==o,s="html"==o;if(!e.length)a.text("\u041D\u0435\u0442 \u043F\u043E\u0434\u0445\u043E\u0434\u044F\u0449\u0438\u0445 \u0442\u043E\u0432\u0430\u0440\u043E\u0432 \u0432 \u0434\u0430\u043D\u043D\u043E\u043C \u043C\u0430\u0433\u0430\u0437\u0438\u043D\u0435");else{var l=1;e.forEach(function(t){0<t.sku&&("skus"==o?(a.append(t.sku),l<e.length&&a.append(",")):r?(a.append(" [b]"+t.price+"[/b] "+t.title+"<br/>"),a.append("&nbsp;  \u0430\u0440\u0442. "+t.sku+" [url="+t.url+"]"+t.store_url+"[/url]<br/>")):s?(a.append("<i>"+t.price+"</i> "+t.title+"&lt;br/&gt;<br/>"),a.append("&nbsp;  \u0430\u0440\u0442. "+t.sku+" &lt;a href=\""+t.url+"\" target=\"_blank\"&gt;"+t.store_url+"&lt;/a&gt;&lt;br/&gt;<br/>")):(a.append(" \u25BA "+t.title+"<br/>"),a.append(t.price+"&nbsp;  \u0430\u0440\u0442. "+t.sku+" <a href="+t.url+" target=\"_blank\">"+t.url+"</a><br/>"))),l++});var n=window.location.href;r?a.append("<br/>[url="+n+"]\u0421\u043E\u0431\u0440\u0430\u043D\u043E \u0432 hardprice.ru[/url]<br/>"):s?a.append("<br/>&lt;br/&gt;&lt;a href=\""+n+"\" target=\"_blank\"&gt;\u0421\u043E\u0431\u0440\u0430\u043D\u043E \u0432 hardprice.ru&lt;/a&gt;<br/>"):a.append("<br/><a href=\""+n+"\" target=\"_blank\">\u0421\u043E\u0431\u0440\u0430\u043D\u043E \u0432 hardprice.ru</a> "+n+"<br/>")}}),!1})},this.renderRigSummary=function(){var e=$(".rig .products-list");if(e&&e.length){e.find("#rig-summary").remove(),e.append("<div id=\"rig-summary\" class=\"products-list-v2__item\"><div class=\"products-list-v2__item-rating-bar\" style=\"background-color:#999\"></div><div class=\"products-list-v2__item-prices\"></div></div>");var t=$("#rig-summary .products-list-v2__item-prices"),o=e.find(".products-list-v2__item:first > .products-list-v2__item-prices > column");var a=!1;if(app.region.current&&"UA_ALL"==app.region.current.slug){a=!0;var i=app.currencies[4].value}o.each(function(o,r){var s=$(r).find(".date").text(),l=0,n=0,d=0;e.find(".products-list-v2__item column:nth-child("+(o+1)+")").each(function(){var e=$(this),t=+e.data("price");if(0<t){var o=+e.parents(".products-list-v2__item").find("b.product-count").text();l+=o*t,n++}else d++});var c=4<o?"x-hidden-1600":"";9>o&&t.append("<column class=\""+c+"\"><p style=\"color:#999;\">"+s+"</p><p class=\"price price-lg text-warning\"><b>"+l.money()+"</b><br/><small class=\"help\">"+(a?"<b>"+(l/i).money("\u0433\u0440\u043D")+"</b><br/>":"")+(l/app.euroRate).money("\u20AC")+"</small></p>"+(d?"<p><small class=\"help\">\u043D\u0435\u043A\u043E\u043C\u043F\u043B\u0435\u043A\u0442 "+d+" \u0448\u0442</small></p>":"")+"</column>")}),t.append("<p>&nbsp;</p>")}};try{var v=JSON.parse(localStorage.getItem("hard_4zu_categories"))}catch(t){}v?this.init(v):$.get("/api/categories",function(e){m.init(e),localStorage.setItem("hard_4zu_categories",JSON.stringify(e))})}app.configurator&&!1===app.configurator.enable||(app.configurator=window.configurator=new Configurator),"use strict",app.comparator={_modal:null,_cachedItems:{},items:[],loadItems:function(){},fetchProduct:function(e){return $.post("/api/content/get/products",{key:"id",id:[e]})},syncDom:function(e){e=e||$(document);var t=this;e.find(".a-compare").each(function(e,o){var a=$(o),i=t.hasItem(a.data("id"));i?a.addClass("btn-primary"):a.removeClass("btn-primary")}),this.updateUrl()},hasItem:function(e){if(!this.items)return!1;for(var t=0,o;t<this.items.length;t++)if(o=this.items[t],o.id==e)return!0;return!1},removeItem:function(e,t){this.items&&(this.items=jQuery.grep(this.items,function(t){return t.id!=e}),t&&($(t).parents(".p10").hide(100),this.syncDom(),!this.items.length&&this._modal&&this._modal.modal("hide")))},updateUrl:function(){if(this.items.length&&this._modal){var e=this._modal.find("[rel=\"comparator-url\"]");if(1==this.items.length)return e.attr("disabled","disabled"),void e.on("click",function(){return!1});e.off("click"),e.removeAttr("disabled");var t=[];$(this.items).each(function(e,o){t.push(o.sku)});var o=t.join(",");e.attr("href","/compare/"+o)}},showComparator:function(){var e="<div class=\"modal fade\">            <div class=\"modal-dialog modal-lg\">            <div class=\"modal-content\">            <div class=\"modal-header\">            <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-hidden=\"true\">\xD7</button>        <h4 class=\"modal-title\"> \u0422\u043E\u0432\u0430\u0440\u044B \u0434\u043B\u044F \u0441\u0440\u0430\u0432\u043D\u0435\u043D\u0438\u044F</h4>        </div>        <div class=\"modal-body\">        <div class=\"r1ow\">         %content%         </div>        %notice%</div>         <div class=\"modal-footer\">            <span class=\"pull-left\">                 <a href=\"#\" rel=\"comparator-url\" target=\"_compare\" class=\"btn btn-default\"><i class=\"fa fa-balance-scale\" aria-hidden=\"true\"></i> \u0421\u0440\u0430\u0432\u043D\u0438\u0442\u044C \u0445\u0430\u0440\u0430\u043A\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043A\u0438</a>            </span>             <button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">\u041E\u043A\u0435\u0439</button>            </div>        </div>        </div>        </div>",t="";$(this.items).each(function(e,o){var a=o.computeruniverse_price||o.regard_price||0;t+="<div class=\"c1ol-md-6 p10\" style=\"white-space: nowrap;overflow: hidden;\"><a href=\""+o.url+"\" target=\"_blank\"><img style=\"max-height:48px;display: inline-block;margin:0;position: relative;top:-2px;vertical-align: top\" src=\""+o.image+"\" class=\"thumbnail\"/></a> &nbsp;<span style=\"display: inline-block;white-space : normal; \">"+o.title+"<br/><small class=\"help\">\u043E\u0442 "+a.money()+"</small><a class=\"btn btn-white btn-xs text-danger\" onclick=\"app.comparator.removeItem("+o.id+", this);return false;\"><i class=\"fa fa-trash-o\" aria-hidden=\"true\"></i> \u0443\u0431\u0440\u0430\u0442\u044C</a></span></div>"});e=app.microTemplate(e,{content:t,notice:""}),this._modal=$(e).modal("show"),this.updateUrl()},_buttonClicked:function(e,t){return 3<this.items.length&&this.items.shift(),this.items.push(this._cachedItems[t]),this.syncDom(),1==this.items.length?void toastr.info("\u0414\u043E\u0431\u0430\u0432\u044C\u0442\u0435 \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0438\u0439 \u0442\u043E\u0432\u0430\u0440 \u0434\u043B\u044F \u0441\u0440\u0430\u0432\u043D\u0435\u043D\u0438\u044F","",{timeOut:2e3}):void this.showComparator()},bindEvents:function(e){e=e||$(document);var t=this;e.find(".a-compare").on("click",function(){var e=$(this),o=e.data("id");return t.hasItem(o)?(t.showComparator(),!1):(t._cachedItems[o]?t._buttonClicked(e,o):t.fetchProduct(o).done(function(a){t._cachedItems[o]=a[0],t._buttonClicked(e,o)}),!1)})}},"use strict";var commentsWidget=function(){function e(){parseInt($(window).height()/2-u("#comment-form-div").height()/2);u("#comment-form-div").removeClass("in");var e=u("input#comment-pid").val();e&&$("div#comment-"+e).removeClass("comment-answer-this")}function t(t){var o=u("input#comment-pid").val(),i=u("div#comment-"+o),r=1+i.data("level");if(o&&i.removeClass("comment-answer-this"),t.status){e(),p.find(".comment-last").each(function(e,t){$(t).removeClass("comment-last")});var d=$("<div>"+t.comment+"</div>"),c=d.find(".comment-text"),g=/(youtu|jpg|jpeg|png)/.test(c.text());app.content.replaceProducts(c),app.content.replaceRigs(c),app.content.replaceContent(c,{links:!0,images:!0,youtube:!0}),d.children(".comment").data("level",r).attr("data-level",r);var m=null;if(0<o?(m=i.next("div.comment-next"),m.append(d)):u(".comments-list").append(d),g){var h=p.find(".commentbox:first");h.data("lightGallery")&&h.data("lightGallery").reinit()}if(u("#branch-"+o).show(),u("div.comment-last").fadeOut(1e3,function(){$(this).fadeIn(2e3)}),u(".commentbox > .no-comments").hide(),a(),u("div#comment-form-div").hide(),toastr.success(t.message),s=new Date,n){var f=u("#comment-"+t.data.id).offset().top-30;$("html,body").animate({scrollTop:f},1e3)}"function"==typeof l&&l(t)}else toastr.error(t.message),t.code&&"parent_was_deleted"===t.code&&u("div#comment-"+o).addClass("alert-danger").find("a.answer").remove()}function o(){return u("#comment-form")}function a(){o().find("textarea").each(function(){this.value=""})}function i(){var e={};return o().find("input[type=text], input[type=hidden], textarea").each(function(){e[this.name]=this.value}),e.user_id=auth.user.id,e}var r=this,s=null,l=null,n=!0,d=!1,c=0,p=null,u=function(e){return p.find(e)},g=function(){return"#comments-widget-"+c};return{init:function(o){return c=o,p=$(g()),u("#comment-form").on("submit",function(){var e=u("#comment-text").val(),o=i();if(/^.{0,3}https?:\/\/[^ $]+.{0,3}$/.test(e))return toastr.error("\u0414\u043E\u0431\u0430\u0432\u044C\u0442\u0435 \u043E\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u043A \u0441\u0441\u044B\u043B\u043A\u0435!"),!1;if(4>e.length)toastr.error("\u0421\u043B\u0438\u0448\u043A\u043E\u043C \u043A\u043E\u0440\u043E\u0442\u043A\u043E\u0435 \u0441\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u0435");else if(e.hasBadWords()||o.username.hasBadWords())toastr.error("\u0412\u0430\u0448\u0435 \u0441\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u0435 \u043D\u0435 \u043F\u0440\u043E\u0439\u0434\u0435\u0442 \u0446\u0435\u043D\u0437\u0443\u0440\u0443, \u0421\u044D\u0440!");else{if(/\sрашк[а|у|и|е]/i.test(e))return toastr.warning("\u0411\u0440\u043E, \u044F \u043D\u0435\u043C\u043D\u043E\u0433\u043E \u043F\u043E\u043F\u0440\u0430\u0432\u0438\u043B \u0442\u0432\u043E\u0435 \u0441\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u0435, \u043F\u0440\u043E\u0432\u0435\u0440\u044C \u0432\u0441\u0435 \u043B\u0438 \u043F\u043E\u0440\u044F\u0434\u043A\u0435? \u0418 \u043E\u0442\u043F\u0440\u0430\u0432\u044C \u0435\u0449\u0435 \u0440\u0430\u0437"),e=e.replace(/рашку/g,"\u0420\u043E\u0441\u0441\u0438\u044E"),e=e.replace(/рашка/g,"\u0420\u043E\u0441\u0441\u0438\u044F"),e=e.replace(/рашк[и|е]/g,"\u0420\u043E\u0441\u0441\u0438\u0438"),u("#comment-text").val(e),!1;if(s){var a=new Date,r=a.getTime()-s.getTime();if(r/=1e3,15>r)return toastr.warning("\u041F\u043E\u0434\u043E\u0436\u0434\u0438\u0442\u0435 "+(16-r).toFixed()+" \u0441\u0435\u043A. \u043F\u0435\u0440\u0435\u0434 \u043E\u0442\u043F\u0440\u0430\u0432\u043A\u043E\u0439 \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0433\u043E \u0441\u043E\u043E\u0431\u0449\u0435\u043D\u0438\u044F!"),!1}var l=u("#comment-form-div .comment-actions").children("a");l.attr("disabled",!0),$.post("/api/comment/modify",o).done(t).fail(function(){toastr.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u0441\u0435\u0442\u0438!")}).always(function(){setTimeout(function(){l.removeAttr("disabled")},1e3)})}return!1}),u("#comment-submit-btn").on("click",function(){return this.hasAttribute("disabled")||u("#comment-submit").click(),!1}),u("#comment-close").click(function(){return e(),!1}),u(".branch-expand").on("click",function(){u(".branch-expand").removeClass("in"),$(this).addClass("in");var e="branch-"+$(this).attr("rel");$(e).toggle();var o=!1;if(u(".comments-list .comment-next-root").each(function(){$(this).attr("id")==e?o=$(this):$(this).hide(300)}),o&&(o.show(300),n)){var a=$(this).offset().top-200;$("html,body").animate({scrollTop:a},600)}}),$(g()).on("click",".answer",function(){var e=$(this);u("div.comment").removeClass("comment-answer-this");var t=$(this).attr("rel");u("input#comment-pid").val(t),t=parseInt(t),t&&u("div#comment-"+t).addClass("comment-answer-this");var o=u("#comment-form-div");o.addClass("in");var a,i,s;if(0==e.attr("rel")){var l=e.parents(".comments-widget");s=l.width()-30,i=e.position().top-23,a=l.position().left+15}else{var l=e.parents(".comment");i=l.position().top+l.height()+15,a=l.position().left+15,s=l.width()+3}return d?d.call(r,o):(o.animate({left:a,top:i,width:s,opacity:"show"},300,function(){u("#comment-text").focus()})),!1}),this},showForm:function(){},hideForm:e,addComment:function(e){u("input#comment-pid").val(e)},formCallback:t,withScroll:function(e){return n=e,this},withPlaceBoxCallback:function(e){return d=e,this},find:u,onCommentPosted:function(e){l=e}}};var commentsUpdater=function(){function e(e,a,r){g=e,m=r,h=a,f=$("#comments-widget-"+m),b=f.find(".comments-list"),y=$("<button style=\"cursor: progress;\" disabled=\"disabled\" class=\"btn btn-xs btn-disabled btn-default text-success pull-right marginT10\" title=\"\u0410\u0432\u0442\u043E\u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u0435 \u043A\u043E\u043C\u043C\u0435\u043D\u0442\u0430\u0440\u0438\u0435\u0432\"> <i class=\"fa fa-refresh fa-spi1n text-muted\"></i> <span class=\"text-muted\"></span> </button>"),y.on("click",i),f.find(".comment-form-footer").append(y),g.onCommentPosted(t),f.on("mouseenter",function(){$(this).off("mouseenter"),$(this).off("touchstart"),o()}).on("touchstart",function(){$(this).off("touchstart"),$(this).off("mouseenter"),o()})}function t(){c=0,p=0,d=16}function o(){u||(u=setInterval(function(){if(app.tabActive){c++,c>d&&(i(),c=0);var e=d-c;y.children("span").text(0<e&&e<d?("0"+e).slice(-2):"UP"),p++,p>61&&r()}},1e3))}function a(e){setTimeout(function(){y.children("i").addClass(e?"fa-spin":"").removeClass(e?"":"fa-spin")},e?0:1e3),e}function i(){v=new Date,a(!0),$.post("/api/comments/updater/get",{entityId:m,lastId:0,classId:h}).done(function(e){if(e.status){var t=l($(e.html).find(".comments-list").first(),!1);if(t){toastr.info("\u0414\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u044B \u043D\u043E\u0432\u044B\u0435 \u043A\u043E\u043C\u043C\u0435\u043D\u0442\u0430\u0440\u0438\u0438","",{timeOut:2e3});var o=f.find(".commentbox:first");o.data("lightGallery")&&o.data("lightGallery").reinit()}t&&r()}}).fail(function(){}).always(function(){a(!1)})}function r(){p=0;var e=new Date;f.find(".comment").each(function(t,o){var a=$(o),i=a.find("[itemprop=\"datePublished\"]").attr("content"),r=a.find(".date"),s=new Date(i),l=s.diffString(e);a.hasClass("comment-dynamic")&&l!==r.text()&&a.removeClass("comment-dynamic"),r.text(l)})}function s(e){return f.find("#comment-"+e).first()}function l(e,t){return t||(w=!1),e.children(".comment").each(function(o,a){var i=$(a),r=i.data("level"),d=i.data("children"),c=i.attr("id").match(/(\d+)$/)[1],p=null;if(!(p=s(c))||!p.length){i.addClass("comment-dynamic"),i.css("transition","background-color 500ms ease"),n(i),w=!0,t?t.append(i):b.append(i);var u=e.find("#branch-"+c);n(u),u.css("animation","fadeInFromNoneSlideIn ease-in 500ms"),t?t.append(u):b.append(u)}else{var u=e.find("#branch-"+c);l(u,p.parent().children("#branch-"+c).first())}}),w}function n(e){app.content.replaceProducts(e.find(".comment-text"),1),app.content.replaceRigs(e.find(".comment-text")),app.content.replaceContent(e.find(".comment-text"),{links:!0,images:!0,youtube:!0})}var d=26,c=0,p=0,u=null,g=null,m=null,h=null,f=null,b=null,v=null,y=null,w=!1;return{init:e,updateComments:i}};(function($){$.extend({tablesorter:new function(){function benchmark(e,t){log(e+","+(new Date().getTime()-t.getTime())+"ms")}function log(){"undefined"==typeof console||"undefined"==typeof console.debug}function buildParserCache(e,t){if(e.config.debug)var o="";if(0!=e.tBodies.length){var a=e.tBodies[0].rows;if(a[0])for(var r=[],s=a[0].cells,n=s.length,l=0,d;l<n;l++)d=!1,$.metadata&&$(t[l]).metadata()&&$(t[l]).metadata().sorter?d=getParserById($(t[l]).metadata().sorter):e.config.headers[l]&&e.config.headers[l].sorter&&(d=getParserById(e.config.headers[l].sorter)),d||(d=detectParserForColumn(e,a,-1,l)),e.config.debug&&(o+="column:"+l+" parser:"+d.id+"\n"),r.push(d);return e.config.debug&&log(o),r}}function detectParserForColumn(e,t,o,a){for(var r=parsers.length,s=!1,l=!1,n=!0;""==l&&n;)o++,t[o]?(s=getNodeFromRowAndCellIndex(t,o,a),l=trimAndGetNodeText(e.config,s),e.config.debug&&log("Checking if value was empty on row:"+o)):n=!1;for(var d=1;d<r;d++)if(parsers[d].is(l,e,s))return parsers[d];return parsers[0]}function getNodeFromRowAndCellIndex(e,t,o){return e[t].cells[o]}function trimAndGetNodeText(e,t){return $.trim(getElementText(e,t))}function getParserById(e){for(var t=parsers.length,o=0;o<t;o++)if(parsers[o].id.toLowerCase()==e.toLowerCase())return parsers[o];return!1}function buildCache(e){if(e.config.debug)var t=new Date;for(var o=e.tBodies[0]&&e.tBodies[0].rows.length||0,a=e.tBodies[0].rows[0]&&e.tBodies[0].rows[0].cells.length||0,r=e.config.parsers,s={row:[],normalized:[]},l=0;l<o;++l){var n=$(e.tBodies[0].rows[l]),d=[];if(n.hasClass(e.config.cssChildRow)){s.row[s.row.length-1]=s.row[s.row.length-1].add(n);continue}s.row.push(n);for(var c=0;c<a;++c)d.push(r[c].format(getElementText(e.config,n[0].cells[c]),e,n[0].cells[c]));d.push(s.normalized.length),s.normalized.push(d),d=null}return e.config.debug&&benchmark("Building cache for "+o+" rows:",t),s}function getElementText(e,t){var o="";return t?(e.supportsTextContent||(e.supportsTextContent=t.textContent||!1),o="simple"==e.textExtraction?e.supportsTextContent?t.textContent:t.childNodes[0]&&t.childNodes[0].hasChildNodes()?t.childNodes[0].innerHTML:t.innerHTML:"function"==typeof e.textExtraction?e.textExtraction(t):$(t).text(),o):""}function appendToTable(e,t){if(e.config.debug)var o=new Date;for(var a=t,s=a.row,r=a.normalized,n=r.length,d=r[0].length-1,c=$(e.tBodies[0]),p=[],u=0,g;u<n;u++)if(g=r[u][d],p.push(s[g]),!e.config.appender)for(var m=s[g].length,l=0;l<m;l++)c[0].appendChild(s[g][l]);e.config.appender&&e.config.appender(e,p),p=null,e.config.debug&&benchmark("Rebuilt table:",o),applyWidget(e),setTimeout(function(){$(e).trigger("sortEnd")},0)}function buildHeaders(e){if(e.config.debug)var t=new Date;var o=!!$.metadata,a=computeTableHeaderCellIndexes(e);return $tableHeaders=$(e.config.selectorHeaders,e).each(function(t){if(this.column=a[this.parentNode.rowIndex+"-"+this.cellIndex],this.order=formatSortingOrder(e.config.sortInitialOrder),this.count=this.order,(checkHeaderMetadata(this)||checkHeaderOptions(e,t))&&(this.sortDisabled=!0),checkHeaderOptionsSortingLocked(e,t)&&(this.order=this.lockedOrder=checkHeaderOptionsSortingLocked(e,t)),!this.sortDisabled){var o=$(this).addClass(e.config.cssHeader);e.config.onRenderHeader&&e.config.onRenderHeader.apply(o)}e.config.headerList[t]=this}),e.config.debug&&(benchmark("Built headers:",t),log($tableHeaders)),$tableHeaders}function computeTableHeaderCellIndexes(e){for(var t=[],o={},a=e.getElementsByTagName("THEAD")[0],r=a.getElementsByTagName("TR"),s=0,n;s<r.length;s++){n=r[s].cells;for(var d=0;d<n.length;d++){var p=n[d],c=p.parentNode.rowIndex,u=c+"-"+p.cellIndex,g=p.rowSpan||1,m=p.colSpan||1,h;"undefined"==typeof t[c]&&(t[c]=[]);for(var f=0;f<t[c].length+1;f++)if("undefined"==typeof t[c][f]){h=f;break}o[u]=h;for(var f=c;f<c+g;f++){"undefined"==typeof t[f]&&(t[f]=[]);for(var b=t[f],v=h;v<h+m;v++)b[v]="x"}}}return o}function checkCellColSpan(e,t,o){for(var a=[],s=e.tHead.rows,r=s[o].cells,l=0,n;l<r.length;l++)n=r[l],1<n.colSpan?a=a.concat(checkCellColSpan(e,headerArr,o++)):(1==e.tHead.length||1<n.rowSpan||!s[o+1])&&a.push(n);return a}function checkHeaderMetadata(e){if($.metadata&&!1===$(e).metadata().sorter)return!0;return!1}function checkHeaderOptions(e,t){if(e.config.headers[t]&&!1===e.config.headers[t].sorter)return!0;return!1}function checkHeaderOptionsSortingLocked(e,t){return!!(e.config.headers[t]&&e.config.headers[t].lockedOrder)&&e.config.headers[t].lockedOrder}function applyWidget(e){for(var t=e.config.widgets,o=t.length,a=0;a<o;a++)getWidgetById(t[a]).format(e)}function getWidgetById(e){for(var t=widgets.length,o=0;o<t;o++)if(widgets[o].id.toLowerCase()==e.toLowerCase())return widgets[o]}function formatSortingOrder(e){return"Number"==typeof e?1==e?1:0:"desc"==e.toLowerCase()?1:0}function isValueInArray(e,t){for(var o=t.length,a=0;a<o;a++)if(t[a][0]==e)return!0;return!1}function setHeadersCss(e,t,o,a){t.removeClass(a[0]).removeClass(a[1]);var r=[];t.each(function(){this.sortDisabled||(r[this.column]=$(this))});for(var s=o.length,l=0;l<s;l++)r[o[l][0]].addClass(a[o[l][1]])}function fixColumnWidth(e){var t=e.config;if(t.widthFixed){var o=$("<colgroup>");$("tr:first td",e.tBodies[0]).each(function(){o.append($("<col>").css("width",$(this).width()))}),$(e).prepend(o)}}function updateHeaderSortCount(e,t){for(var a=e.config,r=t.length,l=0;l<r;l++){var n=t[l],s=a.headerList[n[0]];s.count=n[1],s.count++}}function multisort(table,sortList,cache){if(table.config.debug)var sortTime=new Date;for(var dynamicExp="var sortWrapper = function(a,b) {",l=sortList.length,i=0;i<l;i++){var c=sortList[i][0],order=sortList[i][1],s="text"==table.config.parsers[c].type?0==order?makeSortFunction("text","asc",c):makeSortFunction("text","desc",c):0==order?makeSortFunction("numeric","asc",c):makeSortFunction("numeric","desc",c),e="e"+i;dynamicExp+="var "+e+" = "+s,dynamicExp+="if("+e+") { return "+e+"; } ",dynamicExp+="else { "}var orgOrderCol=cache.normalized[0].length-1;dynamicExp+="return a["+orgOrderCol+"]-b["+orgOrderCol+"];";for(var i=0;i<l;i++)dynamicExp+="}; ";return dynamicExp+="return 0; ",dynamicExp+="}; ",table.config.debug&&benchmark("Evaling expression:"+dynamicExp,new Date),eval(dynamicExp),cache.normalized.sort(sortWrapper),table.config.debug&&benchmark("Sorting on "+sortList.toString()+" and dir "+order+" time:",sortTime),cache}function makeSortFunction(e,t,o){var i="a["+o+"]",a="b["+o+"]";if("text"==e&&"asc"==t)return"("+i+" == "+a+" ? 0 : ("+i+" === null ? Number.POSITIVE_INFINITY : ("+a+" === null ? Number.NEGATIVE_INFINITY : ("+i+" < "+a+") ? -1 : 1 )));";return"text"==e&&"desc"==t?"("+i+" == "+a+" ? 0 : ("+i+" === null ? Number.POSITIVE_INFINITY : ("+a+" === null ? Number.NEGATIVE_INFINITY : ("+a+" < "+i+") ? -1 : 1 )));":"numeric"==e&&"asc"==t?"("+i+" === null && "+a+" === null) ? 0 :("+i+" === null ? Number.POSITIVE_INFINITY : ("+a+" === null ? Number.NEGATIVE_INFINITY : "+i+" - "+a+"));":"numeric"==e&&"desc"==t?"("+i+" === null && "+a+" === null) ? 0 :("+i+" === null ? Number.POSITIVE_INFINITY : ("+a+" === null ? Number.NEGATIVE_INFINITY : "+a+" - "+i+"));":void 0}function makeSortText(e){return"((a["+e+"] < b["+e+"]) ? -1 : ((a["+e+"] > b["+e+"]) ? 1 : 0));"}function makeSortTextDesc(e){return"((b["+e+"] < a["+e+"]) ? -1 : ((b["+e+"] > a["+e+"]) ? 1 : 0));"}function makeSortNumeric(e){return"a["+e+"]-b["+e+"];"}function makeSortNumericDesc(e){return"b["+e+"]-a["+e+"];"}function sortText(e,t){return table.config.sortLocaleCompare?e.localeCompare(t):e<t?-1:e>t?1:0}function sortTextDesc(e,t){return table.config.sortLocaleCompare?t.localeCompare(e):t<e?-1:t>e?1:0}function sortNumeric(e,t){return e-t}function sortNumericDesc(e,t){return t-e}function getCachedSortType(e,t){return e[t].type}var parsers=[],widgets=[];this.defaults={cssHeader:"header",cssAsc:"headerSortUp",cssDesc:"headerSortDown",cssChildRow:"expand-child",sortInitialOrder:"asc",sortMultiSortKey:"shiftKey",sortForce:null,sortAppend:null,sortLocaleCompare:!0,textExtraction:"simple",parsers:{},widgets:[],widgetZebra:{css:["even","odd"]},headers:{},widthFixed:!1,cancelSelection:!0,sortList:[],headerList:[],dateFormat:"us",decimal:"/.|,/g",onRenderHeader:null,selectorHeaders:"thead th",debug:!1},this.benchmark=benchmark;this.construct=function(e){return this.each(function(){if(this.tHead&&this.tBodies){var t,o,a,r;this.config={},r=$.extend(this.config,$.tablesorter.defaults,e),t=$(this),$.data(this,"tablesorter",r),o=buildHeaders(this),this.config.parsers=buildParserCache(this,o),a=buildCache(this);var s=[r.cssDesc,r.cssAsc];fixColumnWidth(this),o.click(function(l){var e=t[0].tBodies[0]&&t[0].tBodies[0].rows.length||0;if(!this.sortDisabled&&0<e){t.trigger("sortStart");var n=$(this),d=this.column;if(this.order=this.count++%2,this.lockedOrder&&(this.order=this.lockedOrder),!l[r.sortMultiSortKey]){if(r.sortList=[],null!=r.sortForce)for(var i=r.sortForce,c=0;c<i.length;c++)i[c][0]!=d&&r.sortList.push(i[c]);r.sortList.push([d,this.order])}else if(isValueInArray(d,r.sortList))for(var c=0;c<r.sortList.length;c++){var p=r.sortList[c],u=r.headerList[p[0]];p[0]==d&&(u.count=p[1],u.count++,p[1]=u.count%2)}else r.sortList.push([d,this.order]);return setTimeout(function(){setHeadersCss(t[0],o,r.sortList,s),appendToTable(t[0],multisort(t[0],r.sortList,a))},1),!1}}).mousedown(function(){if(r.cancelSelection)return this.onselectstart=function(){return!1},!1}),t.bind("update",function(){var e=this;setTimeout(function(){e.config.parsers=buildParserCache(e,o),a=buildCache(e)},1)}).bind("updateCell",function(t,e){var o=this.config,i=[e.parentNode.rowIndex-1,e.cellIndex];a.normalized[i[0]][i[1]]=o.parsers[i[1]].format(getElementText(o,e),e)}).bind("sorton",function(t,e){$(this).trigger("sortStart"),r.sortList=e;var i=r.sortList;updateHeaderSortCount(this,i),setHeadersCss(this,o,i,s),appendToTable(this,multisort(this,i,a))}).bind("appendCache",function(){appendToTable(this,a)}).bind("applyWidgetId",function(t,e){getWidgetById(e).format(this)}).bind("applyWidgets",function(){applyWidget(this)}),$.metadata&&$(this).metadata()&&$(this).metadata().sortlist&&(r.sortList=$(this).metadata().sortlist),0<r.sortList.length&&t.trigger("sorton",[r.sortList]),applyWidget(this)}})},this.addParser=function(e){for(var t=parsers.length,o=!0,r=0;r<t;r++)parsers[r].id.toLowerCase()==e.id.toLowerCase()&&(o=!1);o&&parsers.push(e)},this.addWidget=function(e){widgets.push(e)},this.formatFloat=function(e){var t=parseFloat(e);return isNaN(t)?0:t},this.formatInt=function(e){var t=parseInt(e);return isNaN(t)?0:t},this.isDigit=function(e){return /^[-+]?\d*$/.test($.trim(e.replace(/[,.']/g,"")))},this.clearTableBody=function(e){if($.browser.msie){(function(){for(;this.firstChild;)this.removeChild(this.firstChild)}).apply(e.tBodies[0])}else e.tBodies[0].innerHTML=""}}}),$.fn.extend({tablesorter:$.tablesorter.construct});var ts=$.tablesorter;ts.addParser({id:"text",is:function(){return!0},format:function(e){return $.trim(e.toLocaleLowerCase())},type:"text"}),ts.addParser({id:"digit",is:function(e,t){var o=t.config;return $.tablesorter.isDigit(e,o)},format:function(e){return $.tablesorter.formatFloat(e)},type:"numeric"}),ts.addParser({id:"currency",is:function(e){return /^[£$€?.]/.test(e)},format:function(e){return $.tablesorter.formatFloat(e.replace(new RegExp(/[£$€]/g),""))},type:"numeric"}),ts.addParser({id:"ipAddress",is:function(e){return /^\d{2,3}[\.]\d{2,3}[\.]\d{2,3}[\.]\d{2,3}$/.test(e)},format:function(e){for(var t=e.split("."),o="",a=t.length,s=0,l;s<a;s++)l=t[s],o+=2==l.length?"0"+l:l;return $.tablesorter.formatFloat(o)},type:"numeric"}),ts.addParser({id:"url",is:function(e){return /^(https?|ftp|file):\/\/$/.test(e)},format:function(e){return jQuery.trim(e.replace(new RegExp(/(https?|ftp|file):\/\//),""))},type:"text"}),ts.addParser({id:"isoDate",is:function(e){return /^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(e)},format:function(e){return $.tablesorter.formatFloat(""==e?"0":new Date(e.replace(new RegExp(/-/g),"/")).getTime())},type:"numeric"}),ts.addParser({id:"percent",is:function(e){return /\%$/.test($.trim(e))},format:function(e){return $.tablesorter.formatFloat(e.replace(new RegExp(/%/g),""))},type:"numeric"}),ts.addParser({id:"usLongDate",is:function(e){return e.match(new RegExp(/^[A-Za-z]{3,10}\.? [0-9]{1,2}, ([0-9]{4}|'?[0-9]{2}) (([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(AM|PM)))$/))},format:function(e){return $.tablesorter.formatFloat(new Date(e).getTime())},type:"numeric"}),ts.addParser({id:"shortDate",is:function(e){return /\d{1,2}[\/\-]\d{1,2}[\/\-]\d{2,4}/.test(e)},format:function(e,t){var o=t.config;return e=e.replace(/\-/g,"/"),"us"==o.dateFormat?e=e.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,"$3/$1/$2"):"pt"==o.dateFormat?e=e.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,"$3/$2/$1"):"uk"==o.dateFormat?e=e.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,"$3/$2/$1"):("dd/mm/yy"==o.dateFormat||"dd-mm-yy"==o.dateFormat)&&(e=e.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{2})/,"$1/$2/$3")),$.tablesorter.formatFloat(new Date(e).getTime())},type:"numeric"}),ts.addParser({id:"time",is:function(e){return /^(([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(am|pm)))$/.test(e)},format:function(e){return $.tablesorter.formatFloat(new Date("2000/01/01 "+e).getTime())},type:"numeric"}),ts.addParser({id:"metadata",is:function(){return!1},format:function(e,t,o){var a=t.config,i=a.parserMetadataName?a.parserMetadataName:"sortValue";return $(o).metadata()[i]},type:"numeric"}),ts.addWidget({id:"zebra",format:function(e){if(e.config.debug)var t=new Date;var o=-1,a,i;$("tr:visible",e.tBodies[0]).each(function(){a=$(this),a.hasClass(e.config.cssChildRow)||o++,i=0==o%2,a.removeClass(e.config.widgetZebra.css[i?0:1]).addClass(e.config.widgetZebra.css[i?1:0])}),e.config.debug&&$.tablesorter.benchmark("Applying Zebra widget",t)}})})(jQuery),"use strict",app.categoryFilterConfig=$.extend({},{rowSelector:"table.products-list tr.tr-top",titleSelector:"a.title",branch:"v1"},app.categoryFilterConfig),"v1"==app.categoryFilterConfig.branch&&(app.categoryFilter=function(){function e(e){var t=$(".category-filters [data-filter-group=\""+e+"\"]"),o=t.find("button.btn-success");o.removeClass("btn-success")}function t(){$("table.products-list").addClass("filtered"),$("button.category-reset-filters").removeAttr("disabled")}function o(){t(),l=[],$(".category-filter.btn-success").each(function(e,t){var o=$(t),a=o.parent(),i={group:a.data("filter-group"),multiple:"undefined"!=typeof a.data("filter-multiple"),value:o.data("filter"),property:o.data("property"),check:o.data("check")};o.data("from")&&(i.from=o.data("from"),i.to=o.data("to")),l.push(i)}),r()}function a(){window.history.state&&window.history.state.length&&(t(),l=window.history.state,l.forEach(function(e){var t=$(".btn-group[data-filter-group=\""+e.group+"\"]").find("button[data-filter=\""+e.value+"\"]");t.addClass("btn-success")}),r())}function i(){history.replaceState(l,null)}function r(){var e=0,t=app.categoryFilterConfig.rowSelector,o=app.categoryFilterConfig.titleSelector;$(t).each(function(){var t=$(this),a=!l.length;if(!a){var r=t.find(o).text().trim(),s={};a=!0;for(var n=0;n<l.length;n++){var d=l[n],c=d.value,p=r,u=!1;if(d.property&&(p=t.data(d.property)),"between"==d.check)u=p>=d.from&&p<=d.to;else if("equal"==d.check)u=p==c;else{var g=new RegExp(c,"i");u=g.test(p)}if(l[n].multiple)d.group in s||(s[d.group]=0),s[d.group]=s[d.group]||u;else if(a=u,!a)break}for(var m in s)s[m]||(a=!1)}a?(t.show(),t.next().show(),t.data("last","ok"),e++):(t.hide(),t.next().hide(),t.data("last",""))}),e||toastr.warning("\u041F\u043E\u0434\u0445\u043E\u0434\u044F\u0449\u0438\u0445 \u0442\u043E\u0432\u0430\u0440\u043E\u0432 \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u043E")}function s(){l=[],i(),$(".category-filters .category-filter").removeClass("btn-success"),$("table.products-list tr").show(),$("button.category-reset-filters").attr("disabled","disabled")}var l=[];return{run:function(){$("button.category-reset-filters").attr("disabled","disabled"),$(".category-reset-filters").on("click",s),$(".category-filter").on("click",function(){var t=$(this),a=t.parents(".btn-group"),r=t.data("filter"),s=a.data("filter-group");if(!s)throw"empty filter group";var l="undefined"!=typeof a.data("filter-multiple"),n=a.data("filter-reset");n="undefined"==typeof n?"":n,n=0<n.indexOf(",")?n.split(","):n.length?[n]:[],n.length&&$.each(n,function(t,o){e(o)});var d=t.hasClass("btn-success");l?t.toggleClass("btn-success"):(e(s),!d&&t.addClass("btn-success")),o(),i(),$(window).trigger("scroll")}),a()},applyFilters:o}}()),!function(t,o,a,r){var s=t(o);t.fn.lazyload=function(e){function l(){var e=0;n.each(function(){var o=t(this);if(!p.skip_invisible||o.is(":visible"))if(t.abovethetop(this,p)||t.leftofbegin(this,p));else if(!(t.belowthefold(this,p)||t.rightoffold(this,p)))o.trigger("appear"),e=0;else if(++e>p.failure_limit)return!1})}var n=this,p={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:o,data_attribute:"original",skip_invisible:!1,appear:null,load:null,placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC"},d;return e&&(r!==e.failurelimit&&(e.failure_limit=e.failurelimit,delete e.failurelimit),r!==e.effectspeed&&(e.effect_speed=e.effectspeed,delete e.effectspeed),t.extend(p,e)),d=p.container===r||p.container===o?s:t(p.container),0===p.event.indexOf("scroll")&&d.bind(p.event,function(){return l()}),this.each(function(){var o=this,a=t(o);o.loaded=!1,(a.attr("src")===r||!1===a.attr("src"))&&a.is("img")&&a.attr("src",p.placeholder),a.one("appear",function(){if(!this.loaded){if(p.appear){var e=n.length;p.appear.call(o,e,p)}t("<img />").bind("load",function(){var i=a.attr("data-"+p.data_attribute);a.hide(),a.is("img")?a.attr("src",i):a.css("background-image","url('"+i+"')"),a[p.effect](p.effect_speed),o.loaded=!0;var r=t.grep(n,function(e){return!e.loaded});if(n=t(r),p.load){var e=n.length;p.load.call(o,e,p)}}).attr("src",a.attr("data-"+p.data_attribute))}}),0!==p.event.indexOf("scroll")&&a.bind(p.event,function(){o.loaded||a.trigger("appear")})}),s.bind("resize",function(){l()}),/(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion)&&s.bind("pageshow",function(e){e.originalEvent&&e.originalEvent.persisted&&n.each(function(){t(this).trigger("appear")})}),t(a).ready(function(){l()}),this},t.belowthefold=function(e,a){var i;return i=a.container===r||a.container===o?(o.innerHeight?o.innerHeight:s.height())+s.scrollTop():t(a.container).offset().top+t(a.container).height(),i<=t(e).offset().top-a.threshold},t.rightoffold=function(e,a){var i;return i=a.container===r||a.container===o?s.width()+s.scrollLeft():t(a.container).offset().left+t(a.container).width(),i<=t(e).offset().left-a.threshold},t.abovethetop=function(e,a){var i;return i=a.container===r||a.container===o?s.scrollTop():t(a.container).offset().top,i>=t(e).offset().top+a.threshold+t(e).height()},t.leftofbegin=function(e,a){var i;return i=a.container===r||a.container===o?s.scrollLeft():t(a.container).offset().left,i>=t(e).offset().left+a.threshold+t(e).width()},t.inviewport=function(e,o){return!(t.rightoffold(e,o)||t.leftofbegin(e,o)||t.belowthefold(e,o)||t.abovethetop(e,o))},t.extend(t.expr[":"],{"below-the-fold":function(e){return t.belowthefold(e,{threshold:0})},"above-the-top":function(e){return!t.belowthefold(e,{threshold:0})},"right-of-screen":function(e){return t.rightoffold(e,{threshold:0})},"left-of-screen":function(e){return!t.rightoffold(e,{threshold:0})},"in-viewport":function(e){return t.inviewport(e,{threshold:0})},"above-the-fold":function(e){return!t.belowthefold(e,{threshold:0})},"right-of-fold":function(e){return t.rightoffold(e,{threshold:0})},"left-of-fold":function(e){return!t.rightoffold(e,{threshold:0})}})}(jQuery,window,document),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"==typeof window?"undefined"==typeof global?"undefined"==typeof self?this:self:global:window,t.Clipboard=e()}}(function(){var e;return function d(c,e,t){function a(i,o){if(!e[i]){if(!c[i]){var s="function"==typeof require&&require;if(!o&&s)return s(i,!0);if(r)return r(i,!0);var n=new Error("Cannot find module '"+i+"'");throw n.code="MODULE_NOT_FOUND",n}var p=e[i]={exports:{}};c[i][0].call(p.exports,function(t){var e=c[i][1][t];return a(e?e:t)},p,p.exports,d,c,e,t)}return e[i].exports}for(var r="function"==typeof require&&require,i=0;i<t.length;i++)a(t[i]);return a}({1:[function(e,t){if("undefined"!=typeof Element&&!Element.prototype.matches){var o=Element.prototype;o.matches=o.matchesSelector||o.mozMatchesSelector||o.msMatchesSelector||o.oMatchesSelector||o.webkitMatchesSelector}t.exports=function(e,t){for(;e&&e.nodeType!==9;){if(e.matches(t))return e;e=e.parentNode}}},{}],2:[function(e,t){function o(t,o,i,r){return function(i){i.delegateTarget=a(i.target,o),i.delegateTarget&&r.call(t,i)}}var a=e("./closest");t.exports=function(e,t,a,i,r){var s=o.apply(this,arguments);return e.addEventListener(a,s,r),{destroy:function(){e.removeEventListener(a,s,r)}}}},{"./closest":1}],3:[function(e,t,o){o.node=function(e){return e!==void 0&&e instanceof HTMLElement&&1===e.nodeType},o.nodeList=function(e){var t=Object.prototype.toString.call(e);return e!==void 0&&("[object NodeList]"===t||"[object HTMLCollection]"===t)&&"length"in e&&(0===e.length||o.node(e[0]))},o.string=function(e){return"string"==typeof e||e instanceof String},o.fn=function(e){var t=Object.prototype.toString.call(e);return"[object Function]"===t}},{}],4:[function(e,t){function o(e,t,o){return e.addEventListener(t,o),{destroy:function(){e.removeEventListener(t,o)}}}function a(e,t,o){return Array.prototype.forEach.call(e,function(e){e.addEventListener(t,o)}),{destroy:function(){Array.prototype.forEach.call(e,function(e){e.removeEventListener(t,o)})}}}function i(e,t,o){return s(document.body,e,t,o)}var r=e("./is"),s=e("delegate");t.exports=function(e,t,s){if(!e&&!t&&!s)throw new Error("Missing required arguments");if(!r.string(t))throw new TypeError("Second argument must be a String");if(!r.fn(s))throw new TypeError("Third argument must be a Function");if(r.node(e))return o(e,t,s);if(r.nodeList(e))return a(e,t,s);if(r.string(e))return i(e,t,s);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}},{"./is":3,delegate:2}],5:[function(e,t){t.exports=function(e){var t;if("SELECT"===e.nodeName)e.focus(),t=e.value;else if("INPUT"===e.nodeName||"TEXTAREA"===e.nodeName){var o=e.hasAttribute("readonly");o||e.setAttribute("readonly",""),e.select(),e.setSelectionRange(0,e.value.length),o||e.removeAttribute("readonly"),t=e.value}else{e.hasAttribute("contenteditable")&&e.focus();var a=window.getSelection(),i=document.createRange();i.selectNodeContents(e),a.removeAllRanges(),a.addRange(i),t=a.toString()}return t}},{}],6:[function(e,t){function o(){}o.prototype={on:function(t,o,a){var i=this.e||(this.e={});return(i[t]||(i[t]=[])).push({fn:o,ctx:a}),this},once:function(e,t,o){function a(){i.off(e,a),t.apply(o,arguments)}var i=this;return a._=t,this.on(e,a,o)},emit:function(e){var t=[].slice.call(arguments,1),o=((this.e||(this.e={}))[e]||[]).slice(),a=0,r=o.length;for(a;a<r;a++)o[a].fn.apply(o[a].ctx,t);return this},off:function(t,o){var a=this.e||(this.e={}),e=a[t],r=[];if(e&&o)for(var s=0,l=e.length;s<l;s++)e[s].fn!==o&&e[s].fn._!==o&&r.push(e[s]);return r.length?a[t]=r:delete a[t],this}},t.exports=o},{}],7:[function(t,o,a){(function(i,r){if("function"==typeof e&&e.amd)e(["module","select"],r);else if("undefined"!=typeof a)r(o,t("select"));else{var s={exports:{}};r(s,i.select),i.clipboardAction=s.exports}})(this,function(e,t){'use strict';function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(e){return e&&e.__esModule?e:{default:e}}(t),i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){function e(e,t){for(var o=0,a;o<t.length;o++)a=t[o],a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,o,a){return o&&e(t.prototype,o),a&&e(t,a),t}}(),s=function(){function e(t){o(this,e),this.resolveOptions(t),this.initSelection()}return r(e,[{key:"resolveOptions",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.action=e.action,this.emitter=e.emitter,this.target=e.target,this.text=e.text,this.trigger=e.trigger,this.selectedText=""}},{key:"initSelection",value:function(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function(){var e=this,t="rtl"==document.documentElement.getAttribute("dir");this.removeFake(),this.fakeHandlerCallback=function(){return e.removeFake()},this.fakeHandler=document.body.addEventListener("click",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[t?"right":"left"]="-9999px";var o=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.style.top=o+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,document.body.appendChild(this.fakeElem),this.selectedText=(0,a.default)(this.fakeElem),this.copyText()}},{key:"removeFake",value:function(){this.fakeHandler&&(document.body.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(document.body.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function(){this.selectedText=(0,a.default)(this.target),this.copyText()}},{key:"copyText",value:function(){var e;try{e=document.execCommand(this.action)}catch(t){e=!1}this.handleResult(e)}},{key:"handleResult",value:function(e){this.emitter.emit(e?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function(){this.target&&this.target.blur(),window.getSelection().removeAllRanges()}},{key:"destroy",value:function(){this.removeFake()}},{key:"action",set:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"copy";if(this._action=e,"copy"!==this._action&&"cut"!==this._action)throw new Error("Invalid \"action\" value, use either \"copy\" or \"cut\"")},get:function(){return this._action}},{key:"target",set:function(e){if(void 0!==e)if(e&&"object"===("undefined"==typeof e?"undefined":i(e))&&1===e.nodeType){if("copy"===this.action&&e.hasAttribute("disabled"))throw new Error("Invalid \"target\" attribute. Please use \"readonly\" instead of \"disabled\" attribute");if("cut"===this.action&&(e.hasAttribute("readonly")||e.hasAttribute("disabled")))throw new Error("Invalid \"target\" attribute. You can't cut text from elements with \"readonly\" or \"disabled\" attributes");this._target=e}else throw new Error("Invalid \"target\" value, use a valid Element")},get:function(){return this._target}}]),e}();e.exports=s})},{select:5}],8:[function(t,o,a){(function(i,r){if("function"==typeof e&&e.amd)e(["module","./clipboard-action","tiny-emitter","good-listener"],r);else if("undefined"!=typeof a)r(o,t("./clipboard-action"),t("tiny-emitter"),t("good-listener"));else{var s={exports:{}};r(s,i.clipboardAction,i.tinyEmitter,i.goodListener),i.clipboard=s.exports}})(this,function(e,t,o,a){'use strict';function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:e}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function n(e,t){var o="data-clipboard-"+e;return t.hasAttribute(o)?t.getAttribute(o):void 0}var d=i(t),c=i(o),p=i(a),u=function(){function e(e,t){for(var o=0,a;o<t.length;o++)a=t[o],a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,o,a){return o&&e(t.prototype,o),a&&e(t,a),t}}(),g=function(e){function t(e,o){r(this,t);var a=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a.resolveOptions(o),a.listenClick(e),a}return l(t,e),u(t,[{key:"resolveOptions",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof e.action?e.action:this.defaultAction,this.target="function"==typeof e.target?e.target:this.defaultTarget,this.text="function"==typeof e.text?e.text:this.defaultText}},{key:"listenClick",value:function(e){var t=this;this.listener=(0,p.default)(e,"click",function(o){return t.onClick(o)})}},{key:"onClick",value:function(t){var e=t.delegateTarget||t.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new d.default({action:this.action(e),target:this.target(e),text:this.text(e),trigger:e,emitter:this})}},{key:"defaultAction",value:function(e){return n("action",e)}},{key:"defaultTarget",value:function(e){var t=n("target",e);if(t)return document.querySelector(t)}},{key:"defaultText",value:function(e){return n("text",e)}},{key:"destroy",value:function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}],[{key:"isSupported",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:["copy","cut"],t="string"==typeof e?[e]:e,o=!!document.queryCommandSupported;return t.forEach(function(e){o=o&&!!document.queryCommandSupported(e)}),o}}]),t}(c.default);e.exports=g})},{"./clipboard-action":7,"good-listener":4,"tiny-emitter":6}]},{},[8])(8)}),"use strict",app.productBottomWidget=function(e){function t(){$.get(e,function(e){a.html(e),app.configurator.bindEvents(a),app.configurator.syncButtonsDom(a),app.favs.bindEvents(a),app.favs.syncDom(a)})}var o=window.product,a=$("#productBottomWidget");a.html("<p class=\"loading\"><i class=\"fa fa-spin fa-spinner\"></i> \u0420\u0435\u043A\u043E\u043C\u0435\u043D\u0434\u0443\u0435\u043C\u044B\u0435 \u043A\u043E\u043C\u043F\u043B\u0435\u043A\u0442\u0443\u044E\u0449\u0438\u0435...</p>"),$(window).on("scroll",function(){$(this).scrollTop()>=a.offset().top-window.innerHeight&&(t(),$(window).off("scroll"))}),a.show()},app.bottomWidget=function(){function e(e,t,o,a){for(o=e.length;o;)t=0|Math.random()*(--o+1),a=e[o],e[o]=e[t],e[t]=a}function t(e){return app.microTemplate("    <a class=\"item\" href=\"%url%\" target=\"_blank\" rel=\"nofollow\">\n        <div class=\"img\"\n                 style=\"background-image:url('%image%')\">\n <span class=\"item-price\">\n                %price%\n            </span>\n\n            <div class=\"item-panel\">\n\n            <h2>%title%</h2>\n            </div>\n        </div>\n\n    </a>",e)}function o(o){e(o);var a=Math.ceil(screen.width/256);var r=$("#bottomWidget").append("<section>").children();r.width(260*a);for(var s=0,l;s<=a;s++)l=o[s].title,r.append(t(o[s]))}function a(){$.getJSON("/tests/lp/pleer/top200/items.json",function(e){e.forEach(function(e,t){e.url="/out/promo/pleer-top200/"+(1+t),e.price=parseInt(e.price).money()}),o(e)})}800<=screen.width?($(window).on("scroll",function(){var e=$("#bottomWidget");$(this).scrollTop()>=e.offset().top-window.innerHeight&&(a(),$(window).off("scroll"))}),$("#bottomWidget").show()):$("#bottomWidget").remove()},app.content={bindLightbox:function(e){e.lightGallery({selector:".img-lightbox",thumbnail:!1,controls:!1,counter:!1,download:!1,fullscreen:!1})},replaceRigs:function(e){if(!e.is(".rigs-replaced")){var t={source:[],replace:{}},o=/https?:\/\/hardprice.ru\/rig\/(?!preview)([a-z0-9]{4,7})/g;e.addClass("rigs-replaced"),e.each(function(e,a){var i=$(a).html(),r=i.replace(/https?:\/\/hardprice.ru\/rig\/preview\/[0-9,]+/g,"<a target=\"_blank\" class=\"underlined text-muted\" href=\"$&\" style=\"white-space: nowrap\"><i class=\"fa fa-cube\" aria-hidden=\"true\"></i>&nbsp;\u041F\u0440\u0435\u0434\u0432\u0430\u0440\u0438\u0442\u0435\u043B\u044C\u043D\u0430\u044F \u0441\u0431\u043E\u0440\u043A\u0430</a>");for(i!==r&&$(a).html(r);match=o.exec(i);)match[1]&&-1===$.inArray(match[1],t.source)&&t.source.push(match[1])}),t.source.length&&$.post("/api/content/get/rigs",{key:"slug",id:t.source},function(a){a.forEach(function(e){t.replace[e.slug]=e}),e.each(function(e,a){var i=$(a).html(),r=i.replace(o,function(e,o){var a=t.replace[o];if(!a)return"<s class=\"text-muted\">"+e+"</s>";var i=+a.value;return" <a target=\"_blank\" class=\"underlined\" href=\""+e+"\"><i class=\"fa fa-cube\" aria-hidden=\"true\" style=\"white-space: nowrap\"></i>&nbsp;"+a.title+"</a> <small class=\"text-muted\">"+i.money()+"</small>"});i!==r&&$(a).html(r)})})}},_replaceProductsCache:{},replaceProducts:function(e,t){var o={source:[],replace:{}},a=/https?:\/\/hardprice.ru\/([0-9]{4,10})/g;if(t=t||0,!e.is(".products-replaced")){e.addClass("products-replaced"),e.each(function(e,t){for(var i=$(t).text();match=a.exec(i);)match[1]&&-1===$.inArray(match[1],o.source)&&o.source.push(match[1])}),a=/https?:\/\/hardprice.ru\/([0-9]{4,10})[a-z0-9\-]*/g;var i=function(i){i.forEach(function(e){o.replace[e.sku]=e}),e.each(function(e,i){var r=$(i).html(),s="",l=r.replace(a,function(e,a){var i=o.replace[a];if(!i)return" <s class=\"text-muted\">\u0441\u0441\u044B\u043B\u043A\u0430 \u043D\u0430 \u043D\u0435\u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044E\u0449\u0438\u0439 \u0442\u043E\u0432\u0430\u0440</s>";if(t){var r=i.id.toString(),l="/images/informers/"+r.substr(0,1)+"/"+r+".png";s+="<a href=\""+e+"\" target=\"_blank\"><img src=\""+l+"\"/></a>"}var n=+(i.computeruniverse_price?i.computeruniverse_price:i.pleer_price?i.pleer_price:i.regard_price);return" <a target=\"_blank\" class=\"underlined\" href=\""+e+"\"><i class=\"fa fa-check\" aria-hidden=\"true\"></i>&nbsp;"+i.title+"</a> <small class=\"text-muted\">"+n.money()+"</small>"});s&&(l+="<div class=\"user-informers\">"+s+"</div>"),r!==l&&$(i).html(l)})},r=this,s=[],l=[];o.source.length&&(o.source.forEach(function(e){r._replaceProductsCache[e]?s.push(r._replaceProductsCache[e]):l.push(e)}),l.length?$.post("/api/content/get/products",{key:"sku",id:l},function(e){e.forEach(function(e){r._replaceProductsCache[e.sku]||(r._replaceProductsCache[e.sku]=e)}),s.length&&(Array.prototype.push.apply(e,s),void 0),i(e)}):i(s))}},_replaceYoutube:function(e,t){var o={default:{from:/http(?:s?):\/\/(?:www\.)?youtu(?:\.be|be\.com)\/(?:watch\?v=|embed\/)?([a-z0-9\-\_\%]+)(([\?&]|&amp;)t=[0-9s]+)?((&|&amp;)feature=youtu\.be)?/i,to:"<div class=\"img-lightbox-container\"><a href=\"$&\" class=\"img-lightbox video-lightbox\" target=\"_blank\" rel=\"nofollow noopener\"><img loading=\"lazy\" src=\"http://img.youtube.com/vi/$1/0.jpg\" class=\"thumbnail\" style=\"max-height:520px;max-width:360px;animation: fadeInFromNone 0.3s ease-in;\"/></a></div>"},full:{from:/http(?:s?):\/\/(?:www\.)?youtu(?:\.be|be\.com)\/(?:watch\?v=|embed\/)?([a-z0-9\-\_\%]+)(([\?&]|&amp;)t=[0-9s]+)?((&|&amp;)feature=youtu\.be)?/i,to:"<iframe style=\"max-width: 100%;\" width=\"800\" height=\"315\" src=\"https://www.youtube.com/embed/$1?rel=0&controls=1&showinfo=0\" frameborder=\"0\" allowfullscreen></iframe>"},simple:{from:/http(?:s?):\/\/(?:www\.)?youtu(?:\.be|be\.com)\/(?:watch\?v=|embed\/)?([a-z0-9\-\_\%]+)(([\?&]|&amp;)t=[0-9s]+)?((&|&amp;)feature=youtu\.be)?/i,to:"<a href=\"$&\" target=\"_blank\" rel=\"nofollow noopener\" class=\"link-no-effect underlined\"><i class=\"fa fa-youtube-play\" style=\"font-size:11px\"></i>&nbsp;youtube</a>"}},a="string"==typeof t?t:"default",i=o[a].from,r=o[a].to;return e.replace(i,r)},replaceContent:function(e,t){if(!e.is(".content-replaced")){var o=this;"undefined"==typeof t&&(t={images:!0,links:!0});var a=/\b(https?:\/\/(www\.)?)?([-a-zA-Z0-9\.]{2,256}\.(ru|com|net|ua|me|org|cc|bb|io|gg))(?:[\-а-яА-Яa-zA-Z0-9\%_\+\?\&\/=\.\,]*)\.(jpg|jpeg|png)/g,r=["www.e-katalog.ru","market.yandex.ru","www.amazon.com","www.pleer.ru","www.citilink.ru","www.computeruniverse.net"],s=[{regex:/^https?:\/\/hardprice.ru\/rig/,skip:!0},{regex:/^https?:\/\/hardprice.ru\/[0-9]+/,skip:!0}],l={links:{from:/(\s)(https?:\/\/(([a-z\d]{2,10}\.)?)?[-a-zA-Z0-9]{1,256}\.(?:ru|com|net|de|ua|me|by|org|bb|cc|co\.uk|uk|io|gg))(?:[\-а-яА-Яa-zA-Z0-9\%_\+\#\?\&\/=\.\,;]*)(?![\.\,])/g,to:function(e,t,o){if(e.match(/\.(jpg|png|jpeg)$/))return e;e=e.trim(),0!==e.indexOf("http")&&(e="http://"+e),o=o.replace(/^http[s]?:\/\//,"");var a=e.substr(-1,1);"."===a||","===a?e=e.substr(0,e.length-1):a="";var l=o;if("hardprice.ru"===o){for(var n in s){var i=s[n];if(i.regex.test(e)){return t+e}}}return-1!==r.indexOf(o)&&(e=e.replace(/^http[s]?:\/\//,"/out/http/")),t+"<a class=\"underlined\" href=\""+e+"\" target=\"_blank\" rel=\"nofollow noopener\" title=\"\u0441\u0441\u044B\u043B\u043A\u0430 \u043D\u0430 \u0432\u043D\u0435\u0448\u043D\u0438\u0439 \u0441\u0430\u0439\u0442\" style=\"white-space: nowrap\"><i class=\"fa fa-external-link\" aria-hidden=\"true\" style=\"font-size:10px\"></i>&nbsp;"+l+"</a>"+a}},images:{from:a,to:"<div class=\"img-lightbox-container\"><a href=\"$&\" target=\"_blank\" rel=\"nofollow noopener\" class=\"img-lightbox\"><img loading=\"lazy\" src=\"$&\" class=\"thumbnail\" style=\"max-height:480px;max-width:340px;animation: fadeInFromNone 0.3s ease-in;\"/></a></div>"},images_simple:{from:a,to:"<a href=\"$&\" target=\"_blank\" rel=\"nofollow noopener\" class=\"link-no-effect underlined\"><i class=\"fa fa-picture-o\" style=\"font-size:10px\"></i>&nbsp;\u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435</a>"},images_full:{from:a,to:"<img loading=\"lazy\" src=\"$&\" class=\"p10 img-responsive\"/>"}};e.addClass("content-replaced"),e.each(function(e,a){var i=str=$(a).html();if(t.images){var r="images"+("string"==typeof t.images?"_"+t.images:"");i=i.replace(l[r].from,l[r].to)}t.youtube&&(i=o._replaceYoutube(i,t.youtube)),t.links&&(i=i.replace(l.links.from,l.links.to)),str!==i&&$(a).html(i)})}}},"use strict";var ItemsController=function(){this.$root=$(".products-list"),this.source="/media/data/c/cpu.json",this.itemTemplate=document.querySelector("#product-item-template").innerHTML,this._data=[],this.data=[],this.renderedData={},this.perPage=12,this.onLoadCallback=null,this.onAppendItemCallback=null,this.onPrepareItemCallback=null;var e=this;this.onLoad=function(e){this.onLoadCallback=e},this.onPrepareItem=function(e){this.onPrepareItemCallback=e},this.onAppendItem=function(e){this.onAppendItemCallback=e},this.isFiltered=function(){return this.data.length!==this._data.length},this.renderItem=function(e){if(this.renderedData[e.id])return this.renderedData[e.id];this.onPrepareItemCallback&&this.onPrepareItemCallback(e);var t=app.microTemplate(this.itemTemplate,e);return this.renderedData[e.id]=t,t},this.appendItem=function(e){this.lastViewCounter>this.perPage&&(e.item_class="products-list-v2__item--paged");var t=this.renderItem(e),o=$(t);this.onAppendItemCallback&&this.onAppendItemCallback(o),this.$root.append(o)},this.renderItems=function(e,t){e=e||0,t=t||this.perPage,this.lastViewCounter=e+t;var o=this;this.data.slice(e,this.lastViewCounter).forEach(function(e){o.appendItem(e)})},this.renderMore=function(){this.lastViewCounter<this.data.length&&this.renderItems(this.lastViewCounter,this.perPage),this.lastViewCounter>=this.data.length&&(this.scrollEnabled=!1)},this.fetch=function(){return $.getJSON(this.source)},this._loader=null,this.createLoader=function(){this._loader=$("#products-loader")},this.hideLoader=function(){setTimeout(function(){e._loader.hide(100)},300)},this.lastViewCounter=0,this.load=function(){this.createLoader(),this.fetch().done(function(t){e.data=t,e._data=$.extend([],t),e.onLoadCallback&&e.onLoadCallback.call(e),e.hideLoader()}).fail(function(){e.hideLoader()})},this.triggerChange=function(e){this.data=null===e?this.getData():e,this.empty(),this.data<=this.perPage&&(this.scrollEnabled=!1),this.renderItems()},this.getData=function(){return $.extend([],this._data)},this.empty=function(){this.lastViewCounter=0,this.scrollEnabled=!0,this.scrollNextTriggerY=0,this.$root.children(".products-list-v2__item").each(function(){$(this).animate({opacity:.5},200,function(){this.remove()})})},this.scrollNextTriggerY=0,this.scrollEnabled=!0,this.onScroll=function(){if(!e.scrollEnabled)return!1;var t=$(window).scrollTop();e.scrollNextTriggerY<t&&t>=e.$root.offset().top+e.$root.outerHeight()-window.innerHeight-200&&(e.renderMore(),e.scrollNextTriggerY=e.$root.offset().top+e.$root.outerHeight()-window.innerHeight+100,void 0)}};
"use strict",app.categoryFilterConfig=$.extend({},{branch:"v2"},app.categoryFilterConfig),"v2"==app.categoryFilterConfig.branch&&(app.categoryFilter=function(){function e(e){$(".category-filters [data-filter-group=\""+e+"\"] button.btn-success").removeClass("btn-success")}function t(){$("table.products-list").addClass("filtered"),$("button.category-reset-filters").removeAttr("disabled")}function o(){t(),p=[],$(".category-filter.btn-success").each(function(e,t){var o=$(t),a=o.parents(".btn-group"),i={group:a.data("filter-group"),multiple:"undefined"!=typeof a.data("filter-multiple"),value:o.data("filter"),property:o.data("property"),check:o.data("check"),options:o.data()};o.data("from")&&(i.from=o.data("from"),i.to=o.data("to")),p.push(i)}),r()}function a(){window.history.state&&window.history.state.length?(t(),p=window.history.state,p.forEach(function(e){var t=$(".btn-group[data-filter-group=\""+e.group+"\"]").find("button[data-filter=\""+e.value+"\"]");t.addClass("btn-success")}),c&&c.stateRestored&&c.stateRestored(p),r()):c&&c.renderItems()}function i(){history.replaceState(p,null)}function r(){var e=null;if(!p.length)return l("apply reset",c._data.length),void c.triggerChange(null);"sort"==p[p.length-1].group&&(e=p.pop());var t=c.getData();window.console&&window.console.time&&void 0;var o=[];$(t).each(function(){var e=!p.length;if(!e){var t=this.title,a={};e=!0;for(var r=0;r<p.length;r++){var s=p[r],l=s.value,n=t,d=!1;if(s.property&&(n=this[s.property]),"between"===s.check)d=n>=s.from&&n<=s.to;else if("equal"===s.check)d=n==l;else if("contain"===s.check)d=-1!==n.indexOf(l);else{var c=s.options.casesensetive||0,u=new RegExp(l,c?"":"i");d=u.test(n)}if(p[r].multiple)s.group in a||(a[s.group]=0),a[s.group]=a[s.group]||d;else if(e=d,!e)break}for(var g in a)a[g]||(e=!1)}e&&o.push(this)}),o.length?e&&(l("sort",e),o=o.sort(function(t,o){var a=e.options&&e.options.value||"asc",i="desc"===a?-1:1,r,s;if(s=r=e.property,o[s]||(s=e.options&&e.options.propertyAlt),t[r]||(r=e.options&&e.options.propertyAlt),!s||!o[s])return-1;var l=+t[r]||0,n=+o[s]||0,d=l<n?-1:l>n?1:0;return i*d})):!d&&toastr.warning("\u041F\u043E\u0434\u0445\u043E\u0434\u044F\u0449\u0438\u0445 \u0442\u043E\u0432\u0430\u0440\u043E\u0432 \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u043E"),l("apply",p.length,"|",o?o.length:"-","of",c._data.length),e&&p.push(e),c.triggerChange(o,p),window.console&&window.console.time&&void 0}function s(){p=[],i(),$(".category-filters .category-filter").removeClass("btn-success"),$("table.products-list tr").show(),$("button.category-reset-filters").attr("disabled","disabled")}function l(){var e=$("#filters-debug"),t=""}function n(){return c}var d=!1,c=null,p=[];return{applyFilters:o,setDataSource:function(e){return c=e,this},getDataSource:n,initialize:function(t){!1,t=t||$(document),t.find("button.category-reset-filters").attr("disabled","disabled"),t.find(".category-reset-filters").on("click",s),t.find(".category-filter").on("click",function(){var t=$(this),a=t.parents(".btn-group"),r=t.data("filter"),s=a.data("filter-group"),l="undefined"!=typeof a.data("filter-multiple"),n=a.data("filter-reset");if(n="undefined"==typeof n?"":n,n=0<n.indexOf(",")?n.split(","):n.length?[n]:[],!s)throw"empty filter group";n.length&&$.each(n,function(t,o){e(o)});var d=t.hasClass("btn-success");l?t.toggleClass("btn-success"):(e(s),!d&&t.addClass("btn-success")),o(),i()}),a()},setSilent:function(e){return d=e,this}}}()),"use strict",ItemsController.bindClickableColumns=function(e){e="undefined"==typeof e?$(document):e,e.find(".products-list-v2__item-prices .column-content").on("click",function(){window.location.href=$(this).parents(".products-list-v2__item-prices").prev(".products-list-v2__item-head").children("a.products-list-v2__item-image:first").attr("href")})},ItemsController.syncItemDom=function(e,t){t=t||{};var o=t.configurator||1,a=t.clickableColumn||1,i=t.favorites||1,r=t.compare||1;o&&(app.configurator.bindEvents(e),app.configurator.syncButtonsDom(e)),i&&(app.favs.bindEvents(e),app.favs.syncDom(e)),r&&(app.comparator.bindEvents(e),app.comparator.syncDom(e)),a&&ItemsController.bindClickableColumns(e)},ItemsController.run=function(e,t){var o=Math.abs,a=Math.round;t=t||$(".products-list");var i=t.hasClass("product-list-with-configurator"),r=new ItemsController;r.onAppendItem(function(e){ItemsController.syncItemDom(e,{configurator:i})}),r.onPrepareItem(function(e){var t={year:"numeric",month:"numeric",day:"numeric"},r;for(var s in e){if(r=s.match(/([a-z]+)_price_delta$/)){null!==e[s]&&(e[r[1]+"_price_delta_pc"]=(100*e[s]/e[r[1]+"_price"]).toFixed(1),0<e[r[1]+"_price_delta_pc"]?(e[r[1]+"_price_class"]="danger",e[r[1]+"_price_direction"]="up"):0>e[r[1]+"_price_delta_pc"]&&(e[r[1]+"_price_class"]="success",e[r[1]+"_price_direction"]="down"));var l=e[r[1]+"_price_date"];if(l){var n=new Date(e[r[1]+"_price_date"]);e["sz_"+r[1]+"_price_date"]=n.toLocaleDateString("ru-RU",t)}else e["sz_"+r[1]+"_price_date"]="";e[r[1]+"_column_class"]="";var d=-1*e[r[1]+"_price_delta_pc"];10<=d?e[r[1]+"_column_class"]="success":5<=d?e[r[1]+"_column_class"]="warning":-10>=d?e[r[1]+"_column_class"]="danger":-5>=d&&(e[r[1]+"_column_class"]="info"),e[r[1]+"_price_delta_pc"]=o(d||0),e[r[1]+"_price"]||(e[r[1]+"_column_class"]+=" out-of-stock")}(r=s.match(/(_price)$/))&&(e["sz_"+s]=0<e[s]?(+e[s]).money():"<small>\u043E\u0436\u0438\u0434\u0430\u0435\u0442\u0441\u044F</small>"),(r=s.match(/(price_delta)$/))&&(e["sz_"+s]=null===e[s]?"":o(+e[s]).money())}e.parts_url=i?"/parts"+e.url:"#";var c=+e.rates_up,p=+e.rates_down;e.rates_sum=c-p,c||p?(e.rates_up_pc=100*(c/(c+p)),e.rates_down_pc=100*(p/(c+p)),e.rates_up_pc=a(100*e.rates_up_pc-.1)/100,e.rates_down_pc=a(100*e.rates_down_pc-.1)/100):e.rates_up_pc=e.rates_down_pc=0,e.inactive_message="0"==e.active?"<span data-toggle=\"tooltip\" data-placement=\"left\" title=\"\u0422\u043E\u0432\u0430\u0440 \u0440\u0430\u0441\u043F\u0440\u043E\u0434\u0430\u043D\"> <i class=\"text-muted fa fa-exclamation-triangle\" aria-hidden=\"true\"></i></span>":"",e.sz_comment_count=0<(e.comment_count||0)?"<span title=\"\u041E\u0442\u0432\u0435\u0442\u044B\" class=\"label label-white lab1el-xs views-widget\"><i class=\"fa fa-commenting-o\" aria-hidden=\"true\"></i>&nbsp;"+e.comment_count+"</span>":"",e.sz_rates_up=c?"<span title=\"\u0414\u0430\" class=\"label label-white lab1el-xs views-widget\"><i class=\"fa fa-thumbs-o-up text-success\" aria-hidden=\"true\"></i>&nbsp;<span class=\"value\">"+c+"</span></span>":"",e.sz_rates_down=p?"<span title=\"\u041D\u0435\u0442\" class=\"label label-white lab1el-xs views-widget\"><i class=\"fa fa-thumbs-o-down text-danger\" aria-hidden=\"true\"></i>&nbsp;<span class=\"value\">"+p+"</span></span>":""}),r.source=e,r.load(),r.onLoad(function(){app.categoryFilter.setDataSource(this).initialize()}),$(window).on("scroll",r.onScroll)},"use strict",app.notifications={_intervalId:null,_shownIds:[],_lastNotifications:[],clean:function(){$.post("/user/notifications/clear");var e=$(".nav-user > a > .badge");e.popover("hide").popover("disable").off("mouseenter").off("mouseleave").off("click"),e.hide(100)},callback:function(e){var t="";if(e&&e.length){t+="<ul class=\"list-group\">",e.forEach(function(e){t+="<li class=\"list-group-item\" style=\"color:#333\">"+e.message+" <span class=\"text-muted\">"+(e.created_at_string?e.created_at_string+" \u043D\u0430\u0437\u0430\u0434":"\u0442\u043E\u043B\u044C\u043A\u043E \u0447\u0442\u043E")+"</span> </li>"}),t+="</ul>",t+="<p class=\"text-center\"><a class=\"btn btn-xs btn-default\" onclick=\"app.notifications.clean();return false;\"><i class=\"fa fa-trash-o\" aria-hidden=\"true\"></i> \u041E\u0447\u0438\u0441\u0442\u0438\u0442\u044C \u0443\u0432\u0435\u0434\u043E\u043C\u043B\u0435\u043D\u0438\u044F</a></p>";var o=$(".nav-user > a");o.tooltip("disable");var a=null;if((a=o.children(".badge"))&&a.length){a.text(e.length);var i=a.data("bs.popover");return void(i.options.content=t)}o.prepend("<span class=\"badge progress-bar-success\">"+e.length+"<span>");o.children(".badge").popover({trigger:"manual",html:!0,animation:!1,content:t,placement:"bottom",title:!1}).on("click",function(){var e=$(this),t=e.data("bs.popover").tip().hasClass("in");return t?e.trigger("mouseleave"):e.trigger("mouseenter"),!1}).on("mouseenter",function(){var e=this;return e._timer&&clearTimeout(e._timer),$(this).popover("show"),$(".popover").on("mouseleave",function(){$(e).popover("hide")}),!1}).on("mouseleave",function(){var e=this;e._timer=setTimeout(function(){$(".popover:hover").length||$(e).popover("hide")},600)})}},ping:function(){if(app.tabActive){let e=this;$.post("/user/notifications",this.callback).fail(t=>{t&&401===t.status&&(e._intervalId&&clearInterval(e._intervalId),toastr.warning("\u0412\u044B\u043F\u043E\u043B\u043D\u0435\u043D \u0432\u044B\u0445\u043E\u0434 \u0438\u0437 \u0430\u043A\u043A\u0430\u0443\u043D\u0442\u0430!"),app.auth.user.id=0,$("#btn-lk > span.badge").remove(),$("#btn-lk > span > img").attr("src","/images/upics/guest-100.png"),$("#btn-lk").addClass("auth-login").off("click").on("click",t=>(t.preventDefault(),app.auth.loginBox(),!1)))})}},init:function(){var e=(30+30*Math.random()).toFixed();var t=this;setTimeout(function(){t.ping(),t._intervalId=setInterval(function(){t.ping()},800*e)},5e3)}},"use strict",app.bindCheckboxes=function(e){e.find(".btn-checkbox").each(function(){function e(e){e=e||0,e&&a.is("[type=radio]")&&$("[name=\""+a.attr("name")+"\"]").each(function(e,t){t!==o&&t.btnchk_updateDisplay(0)});var t=a.is(":checked");o.data("state",t?"on":"off"),o.find(".state-icon").removeClass().addClass("state-icon "+r[o.data("state")].icon),t?o.removeClass("btn-default").addClass("btn-"+i+" active"):o.removeClass("btn-"+i+" active").addClass("btn-default")}var t=$(this),o=t.find("button"),a=t.find("input:checkbox,input:radio"),i=o.data("color"),r={on:{icon:"glyphicon glyphicon-check"},off:{icon:"glyphicon glyphicon-unchecked"}};o.on("click",function(){a.prop("checked",!a.is(":checked")),a.triggerHandler("change")}),a.on("change",function(){e(1)}),a.get(0).btnchk_updateDisplay=e,function(){e(),0==o.find(".state-icon").length&&o.prepend("<i class=\"state-icon "+r[o.data("state")].icon+"\"></i>\xA0")}()})},function(){var e,t;e=function(e,t){this.date1=e,this.date2=t,this.difference=Math.floor(e-t)},t={days:86400000,hours:3600000,minutes:60000,seconds:1e3},e.prototype.weeks=function(){return this._roundIt(this.days()/7)},e.prototype.days=function(){return this._roundIt(this.difference/t.days)},e.prototype.hours=function(){return this._roundIt(this.difference/t.hours)},e.prototype.minutes=function(){return this._roundIt(this.difference/t.minutes)},e.prototype.seconds=function(){return this._roundIt(this.difference/t.seconds)},e.prototype.months=function(){var e,t;return t=12*(this.date1.getFullYear()-this.date2.getFullYear()),t+=this.date1.getMonth()-this.date2.getMonth(),e=this.endOfMonth(this.date2).getDate(),t+=this.date1.getDate()/e-this.date2.getDate()/e,this._roundIt(t)},e.prototype.years=function(){var e;return e=this.date1.getFullYear()-this.date2.getFullYear(),e+=(this.dayOfYear(this.date1)-this.dayOfYear(this.date2))/this.daysInYear(this.date2),this._roundIt(e)},e.prototype.endOfMonth=function(e){return new Date(e.getFullYear(),e.getMonth()+1,0)},e.prototype.endOfYear=function(e){return new Date(e.getFullYear()+1,0,0)},e.prototype.beginOfYear=function(e){return new Date(e.getFullYear(),0,0)},e.prototype.dayOfYear=function(e){return(e-this.beginOfYear(e))/t.days},e.prototype.daysInYear=function(e){return(this.endOfYear(e)-this.beginOfYear(e))/t.days},e.prototype._roundIt=function(e){return parseFloat(e.toFixed(1))},Date.diff=function(t,o){return new e(t,o)},this.DateDiff=e,"undefined"!=typeof module&&(module.exports=e)}.call(this),!function(t){t(["jquery"],function(_){return function(){function e(o,e,t){return d({type:u.error,iconClass:f().iconClasses.error,message:o,optionsOverride:t,title:e})}function i(e,o){return e||(e=f()),m=_("#"+e.containerId),m.length?m:(o&&(m=s(e)),m)}function t(s,e){var t=f();m||i(t),r(s,t,e)||a(t)}function o(e){var t=f();return m||i(t),e&&0===_(":focus",e).length?void c(e):void(m.children().length&&m.remove())}function a(e){for(var t=m.children(),a=t.length-1;0<=a;a--)r(_(t[a]),e)}function r(e,t,a){var o=a&&a.force&&a.force;return e&&(o||0===_(":focus",e).length)&&(e[t.hideMethod]({duration:t.hideDuration,easing:t.hideEasing,complete:function(){c(e)}}),!0)}function s(e){return m=_("<div/>").attr("id",e.containerId).addClass(e.positionClass),m.appendTo(_(e.target)),m}function l(){return{tapToDismiss:!0,toastClass:"toast",containerId:"toast-container",debug:!1,showMethod:"fadeIn",showDuration:300,showEasing:"swing",onShown:void 0,hideMethod:"fadeOut",hideDuration:1e3,hideEasing:"swing",onHidden:void 0,closeMethod:!1,closeDuration:!1,closeEasing:!1,closeOnHover:!0,extendedTimeOut:1e3,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},iconClass:"toast-info",positionClass:"toast-top-right",timeOut:5e3,titleClass:"toast-title",messageClass:"toast-message",escapeHtml:!1,target:"body",closeHtml:"<button type=\"button\">&times;</button>",closeClass:"toast-close-button",newestOnTop:!0,preventDuplicates:!1,progressBar:!1,progressClass:"toast-progress",rtl:!1}}function n(t){h&&h(t)}function d(h){function t(t){return null==t&&(t=""),t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function e(){r(),l(),u(),d(),w(),g(),v(),o()}function o(){var t="";switch(h.iconClass){case"toast-success":case"toast-info":t="polite";break;default:t="assertive";}L.attr("aria-live",t)}function s(){x.closeOnHover&&L.hover(A,S),!x.onclick&&x.tapToDismiss&&L.click(T),x.closeButton&&H&&H.click(function(t){t.stopPropagation?t.stopPropagation():void 0!==t.cancelBubble&&!0!==t.cancelBubble&&(t.cancelBubble=!0),x.onCloseClick&&x.onCloseClick(t),T(!0)}),x.onclick&&L.click(function(t){x.onclick(t),T()})}function a(){L.hide(),L[x.showMethod]({duration:x.showDuration,easing:x.showEasing,complete:x.onShown}),0<x.timeOut&&(z=setTimeout(T,x.timeOut),q.maxHideTime=parseFloat(x.timeOut),q.hideEta=new Date().getTime()+q.maxHideTime,x.progressBar&&(q.intervalId=setInterval(D,10)))}function r(){h.iconClass&&L.addClass(x.toastClass).addClass(O)}function v(){x.newestOnTop?m.prepend(L):m.append(L)}function l(){if(h.title){var o=h.title;x.escapeHtml&&(o=t(h.title)),I.append(o).addClass(x.titleClass),L.append(I)}}function u(){if(h.message){var o=h.message;x.escapeHtml&&(o=t(h.message)),N.append(o).addClass(x.messageClass),L.append(N)}}function d(){x.closeButton&&(H.addClass(x.closeClass).attr("role","button"),L.prepend(H))}function w(){x.progressBar&&(B.addClass(x.progressClass),L.prepend(B))}function g(){x.rtl&&L.addClass("rtl")}function C(o,e){if(o.preventDuplicates){if(e.message===b)return!0;b=e.message}return!1}function T(e){var t=e&&!1!==x.closeMethod?x.closeMethod:x.hideMethod,a=e&&!1!==x.closeDuration?x.closeDuration:x.hideDuration,o=e&&!1!==x.closeEasing?x.closeEasing:x.hideEasing;if(!_(":focus",L).length||e)return clearTimeout(q.intervalId),L[t]({duration:a,easing:o,complete:function(){c(L),clearTimeout(z),x.onHidden&&"hidden"!==F.state&&x.onHidden(),F.state="hidden",F.endTime=new Date,n(F)}})}function S(){(0<x.timeOut||0<x.extendedTimeOut)&&(z=setTimeout(T,x.extendedTimeOut),q.maxHideTime=parseFloat(x.extendedTimeOut),q.hideEta=new Date().getTime()+q.maxHideTime)}function A(){clearTimeout(z),q.hideEta=0,L.stop(!0,!0)[x.showMethod]({duration:x.showDuration,easing:x.showEasing})}function D(){var t=100*((q.hideEta-new Date().getTime())/q.maxHideTime);B.width(t+"%")}var x=f(),O=h.iconClass||x.iconClass;if("undefined"!=typeof h.optionsOverride&&(x=_.extend(x,h.optionsOverride),O=h.optionsOverride.iconClass||O),!C(x,h)){p++,m=i(x,!0);var z=null,L=_("<div/>"),I=_("<div/>"),N=_("<div/>"),B=_("<div/>"),H=_(x.closeHtml),q={intervalId:null,hideEta:null,maxHideTime:null},F={toastId:p,state:"visible",startTime:new Date,options:x,map:h};return e(),a(),s(),n(F),x.debug&&console&&void 0,L}}function f(){return _.extend({},l(),g.options)}function c(t){m||(m=i()),t.is(":visible")||(t.remove(),t=null,0===m.children().length&&(m.remove(),b=void 0))}var p=0,u={error:"error",info:"info",success:"success",warning:"warning"},g={clear:t,remove:o,error:e,getContainer:i,info:function(o,e,t){return d({type:u.info,iconClass:f().iconClasses.info,message:o,optionsOverride:t,title:e})},options:{},subscribe:function(t){h=t},success:function(o,e,t){return d({type:u.success,iconClass:f().iconClasses.success,message:o,optionsOverride:t,title:e})},version:"2.1.4",warning:function(o,e,t){return d({type:u.warning,iconClass:f().iconClasses.warning,message:o,optionsOverride:t,title:e})}},m,h,b;return g}()})}("function"==typeof define&&define.amd?define:function(o,e){"undefined"!=typeof module&&module.exports?module.exports=e(require("jquery")):window.toastr=e(window.jQuery)}),!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e:e(jQuery)}(function(t){var a=Math.max,u=Math.abs;function m(e){var f=e||window.event,g=d.call(arguments,1),h=0,C=0,x=0,k=0,_=0,T=0;if(e=t.event.fix(f),e.type="mousewheel","detail"in f&&(x=-1*f.detail),"wheelDelta"in f&&(x=f.wheelDelta),"wheelDeltaY"in f&&(x=f.wheelDeltaY),"wheelDeltaX"in f&&(C=-1*f.wheelDeltaX),"axis"in f&&f.axis===f.HORIZONTAL_AXIS&&(C=-1*x,x=0),h=0===x?C:x,"deltaY"in f&&(x=-1*f.deltaY,h=x),"deltaX"in f&&(C=f.deltaX,0===x&&(h=-1*C)),0!==x||0!==C){if(1===f.deltaMode){var S=t.data(this,"mousewheel-line-height");h*=S,x*=S,C*=S}else if(2===f.deltaMode){var E=t.data(this,"mousewheel-page-height");h*=E,x*=E,C*=E}if(k=a(u(x),u(C)),(!y||y>k)&&(y=k,c(f,k)&&(y/=40)),c(f,k)&&(h/=40,C/=40,x/=40),h=Math[1<=h?"floor":"ceil"](h/y),C=Math[1<=C?"floor":"ceil"](C/y),x=Math[1<=x?"floor":"ceil"](x/y),w.settings.normalizeOffset&&this.getBoundingClientRect){var r=this.getBoundingClientRect();_=e.clientX-r.left,T=e.clientY-r.top}return e.deltaX=C,e.deltaY=x,e.deltaFactor=y,e.offsetX=_,e.offsetY=T,e.deltaMode=0,g.unshift(e,h,C,x),i&&clearTimeout(i),i=setTimeout(v,200),(t.event.dispatch||t.event.handle).apply(this,g)}}function v(){y=null}function c(e,t){return w.settings.adjustOldDeltas&&"mousewheel"===e.type&&0==t%120}var o=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],r="onwheel"in document||9<=document.documentMode?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],d=Array.prototype.slice,i,y;if(t.event.fixHooks)for(var s=o.length;s;)t.event.fixHooks[o[--s]]=t.event.mouseHooks;var w=t.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var e=r.length;e;)this.addEventListener(r[--e],m,!1);else this.onmousewheel=m;t.data(this,"mousewheel-line-height",w.getLineHeight(this)),t.data(this,"mousewheel-page-height",w.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var e=r.length;e;)this.removeEventListener(r[--e],m,!1);else this.onmousewheel=null;t.removeData(this,"mousewheel-line-height"),t.removeData(this,"mousewheel-page-height")},getLineHeight:function(e){var o=t(e),a=o["offsetParent"in t.fn?"offsetParent":"parent"]();return a.length||(a=t("body")),parseInt(a.css("fontSize"),10)||parseInt(o.css("fontSize"),10)||16},getPageHeight:function(e){return t(e).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};t.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})}),function(e,t){"function"==typeof define&&define.amd?define(["jquery"],function(e){return t(e)}):"object"==typeof exports?module.exports=t(require("jquery")):t(e.jQuery)}(this,function(t){var e=Math.abs;(function(){'use strict';function o(e,o){if(this.el=e,this.$el=t(e),this.s=t.extend({},a,o),this.s.dynamic&&"undefined"!==this.s.dynamicEl&&this.s.dynamicEl.constructor===Array&&!this.s.dynamicEl.length)throw"When using dynamic mode, you must also define dynamicEl as an Array.";return this.modules={},this.lGalleryOn=!1,this.lgBusy=!1,this.hideBartimeout=!1,this.isTouch="ontouchstart"in document.documentElement,this.s.slideEndAnimatoin&&(this.s.hideControlOnEnd=!1),this.$items=this.s.dynamic?this.s.dynamicEl:"this"===this.s.selector?this.$el:""===this.s.selector?this.$el.children():this.s.selectWithin?t(this.s.selectWithin).find(this.s.selector):this.$el.find(t(this.s.selector)),this.$slide="",this.$outer="",this.init(),this}var a={mode:"lg-slide",cssEasing:"ease",easing:"linear",speed:600,height:"100%",width:"100%",addClass:"",startClass:"lg-start-zoom",backdropDuration:150,hideBarsDelay:6e3,useLeft:!1,closable:!0,loop:!0,escKey:!0,keyPress:!0,controls:!0,slideEndAnimatoin:!0,hideControlOnEnd:!1,mousewheel:!0,getCaptionFromTitleOrAlt:!0,appendSubHtmlTo:".lg-sub-html",subHtmlSelectorRelative:!1,preload:1,showAfterLoad:!0,selector:"",selectWithin:"",nextHtml:"",prevHtml:"",index:!1,iframeMaxWidth:"100%",download:!0,counter:!0,appendCounterTo:".lg-toolbar",swipeThreshold:50,enableSwipe:!0,enableDrag:!0,dynamic:!1,dynamicEl:[],galleryId:1};o.prototype.reinit=function(){var e=this;return e.$items=e.$items=e.$el.find(t(this.s.selector)),e.init(),e},o.prototype.init=function(){var e=this;e.s.preload>e.$items.length&&(e.s.preload=e.$items.length);var o=window.location.hash;0<o.indexOf("lg="+this.s.galleryId)&&(e.index=parseInt(o.split("&slide=")[1],10),t("body").addClass("lg-from-hash"),!t("body").hasClass("lg-on")&&(setTimeout(function(){e.build(e.index)}),t("body").addClass("lg-on"))),e.s.dynamic?(e.$el.trigger("onBeforeOpen.lg"),e.index=e.s.index||0,!t("body").hasClass("lg-on")&&setTimeout(function(){e.build(e.index),t("body").addClass("lg-on")})):e.$items.on("click.lgcustom",function(o){try{o.preventDefault(),o.preventDefault()}catch(e){o.returnValue=!1}e.$el.trigger("onBeforeOpen.lg"),e.index=e.s.index||e.$items.index(this),t("body").hasClass("lg-on")||(e.build(e.index),t("body").addClass("lg-on"))})},o.prototype.build=function(e){var o=this;o.structure(),t.each(t.fn.lightGallery.modules,function(e){o.modules[e]=new t.fn.lightGallery.modules[e](o.el)}),o.slide(e,!1,!1,!1),o.s.keyPress&&o.keyPress(),1<o.$items.length?(o.arrow(),setTimeout(function(){o.enableDrag(),o.enableSwipe()},50),o.s.mousewheel&&o.mousewheel()):o.$slide.on("click.lg",function(){o.$el.trigger("onSlideClick.lg")}),o.counter(),o.closeGallery(),o.$el.trigger("onAfterOpen.lg"),o.$outer.on("mousemove.lg click.lg touchstart.lg",function(){o.$outer.removeClass("lg-hide-items"),clearTimeout(o.hideBartimeout),o.hideBartimeout=setTimeout(function(){o.$outer.addClass("lg-hide-items")},o.s.hideBarsDelay)}),o.$outer.trigger("mousemove.lg")},o.prototype.structure=function(){var e="",o="",a=0,r="",s=this,l;for(t("body").append("<div class=\"lg-backdrop\"></div>"),t(".lg-backdrop").css("transition-duration",this.s.backdropDuration+"ms"),a=0;a<this.$items.length;a++)e+="<div class=\"lg-item\"></div>";if(this.s.controls&&1<this.$items.length&&(o="<div class=\"lg-actions\"><button class=\"lg-prev lg-icon\">"+this.s.prevHtml+"</button><button class=\"lg-next lg-icon\">"+this.s.nextHtml+"</button></div>"),".lg-sub-html"===this.s.appendSubHtmlTo&&(r="<div class=\"lg-sub-html\"></div>"),l="<div class=\"lg-outer "+this.s.addClass+" "+this.s.startClass+"\"><div class=\"lg\" style=\"width:"+this.s.width+"; height:"+this.s.height+"\"><div class=\"lg-inner\">"+e+"</div><div class=\"lg-toolbar lg-group\"><span class=\"lg-close lg-icon\"></span></div>"+o+r+"</div></div>",t("body").append(l),this.$outer=t(".lg-outer"),this.$slide=this.$outer.find(".lg-item"),this.s.useLeft?(this.$outer.addClass("lg-use-left"),this.s.mode="lg-slide"):this.$outer.addClass("lg-use-css3"),s.setTop(),t(window).on("resize.lg orientationchange.lg",function(){setTimeout(function(){s.setTop()},100)}),this.$slide.eq(this.index).addClass("lg-current"),this.doCss()?this.$outer.addClass("lg-css3"):(this.$outer.addClass("lg-css"),this.s.speed=0),this.$outer.addClass(this.s.mode),this.s.enableDrag&&1<this.$items.length&&this.$outer.addClass("lg-grab"),this.s.showAfterLoad&&this.$outer.addClass("lg-show-after-load"),this.doCss()){var n=this.$outer.find(".lg-inner");n.css("transition-timing-function",this.s.cssEasing),n.css("transition-duration",this.s.speed+"ms")}setTimeout(function(){t(".lg-backdrop").addClass("in")}),setTimeout(function(){s.$outer.addClass("lg-visible")},this.s.backdropDuration),this.s.download&&this.$outer.find(".lg-toolbar").append("<a id=\"lg-download\" target=\"_blank\" download class=\"lg-download lg-icon\"></a>"),this.prevScrollTop=t(window).scrollTop()},o.prototype.setTop=function(){if("100%"!==this.s.height){var e=t(window).height(),o=(e-parseInt(this.s.height,10))/2,a=this.$outer.find(".lg");e>=parseInt(this.s.height,10)?a.css("top",o+"px"):a.css("top","0px")}},o.prototype.doCss=function(){var e=function(){var e=["transition","MozTransition","WebkitTransition","OTransition","msTransition","KhtmlTransition"],t=document.documentElement,o=0;for(o=0;o<e.length;o++)if(e[o]in t.style)return!0};return!!e()},o.prototype.isVideo=function(e,t){var o;if(o=this.s.dynamic?this.s.dynamicEl[t].html:this.$items.eq(t).attr("data-html"),!e)return o?{html5:!0}:(!1);var a=e.match(/\/\/(?:www\.)?youtu(?:\.be|be\.com)\/(?:watch\?v=|embed\/)?([a-z0-9\-\_\%]+)/i),i=e.match(/\/\/(?:www\.)?vimeo.com\/([0-9a-z\-_]+)/i),r=e.match(/\/\/(?:www\.)?dai.ly\/([0-9a-z\-_]+)/i),s=e.match(/\/\/(?:www\.)?(?:vk\.com|vkontakte\.ru)\/(?:video_ext\.php\?)(.*)/i);return a?{youtube:a}:i?{vimeo:i}:r?{dailymotion:r}:s?{vk:s}:void 0},o.prototype.counter=function(){this.s.counter&&t(this.s.appendCounterTo).append("<div id=\"lg-counter\"><span id=\"lg-counter-current\">"+(parseInt(this.index,10)+1)+"</span> / <span id=\"lg-counter-all\">"+this.$items.length+"</span></div>")},o.prototype.addHtml=function(e){var o=null,a,i;if(this.s.dynamic?this.s.dynamicEl[e].subHtmlUrl?a=this.s.dynamicEl[e].subHtmlUrl:o=this.s.dynamicEl[e].subHtml:(i=this.$items.eq(e),i.attr("data-sub-html-url")?a=i.attr("data-sub-html-url"):(o=i.attr("data-sub-html"),this.s.getCaptionFromTitleOrAlt&&!o&&(o=i.attr("title")||i.find("img").first().attr("alt")))),!a)if("undefined"!=typeof o&&null!==o){var r=o.substring(0,1);("."===r||"#"===r)&&(this.s.subHtmlSelectorRelative&&!this.s.dynamic?o=i.find(o).html():o=t(o).html())}else o="";".lg-sub-html"===this.s.appendSubHtmlTo?a?this.$outer.find(this.s.appendSubHtmlTo).load(a):this.$outer.find(this.s.appendSubHtmlTo).html(o):a?this.$slide.eq(e).load(a):this.$slide.eq(e).append(o),"undefined"!=typeof o&&null!==o&&(""===o?this.$outer.find(this.s.appendSubHtmlTo).addClass("lg-empty-html"):this.$outer.find(this.s.appendSubHtmlTo).removeClass("lg-empty-html")),this.$el.trigger("onAfterAppendSubHtml.lg",[e])},o.prototype.preload=function(e){var t=1,o=1;for(t=1;t<=this.s.preload&&!(t>=this.$items.length-e);t++)this.loadContent(e+t,!1,0);for(o=1;o<=this.s.preload&&!(0>e-o);o++)this.loadContent(e-o,!1,0)},o.prototype.loadContent=function(e,o,a){var i=this,r=!1,s=function(e){for(var o=[],a=[],r=0,s;r<e.length;r++)s=e[r].split(" "),""===s[0]&&s.splice(0,1),a.push(s[0]),o.push(s[1]);for(var l=t(window).width(),d=0;d<o.length;d++)if(parseInt(o[d],10)>l){n=a[d];break}},l,n,d,c,p,u;if(i.s.dynamic){if(i.s.dynamicEl[e].poster&&(r=!0,d=i.s.dynamicEl[e].poster),u=i.s.dynamicEl[e].html,n=i.s.dynamicEl[e].src,i.s.dynamicEl[e].responsive){var g=i.s.dynamicEl[e].responsive.split(",");s(g)}c=i.s.dynamicEl[e].srcset,p=i.s.dynamicEl[e].sizes}else{if(i.$items.eq(e).attr("data-poster")&&(r=!0,d=i.$items.eq(e).attr("data-poster")),u=i.$items.eq(e).attr("data-html"),n=i.$items.eq(e).attr("href")||i.$items.eq(e).attr("data-src"),i.$items.eq(e).attr("data-responsive")){var m=i.$items.eq(e).attr("data-responsive").split(",");s(m)}c=i.$items.eq(e).attr("data-srcset"),p=i.$items.eq(e).attr("data-sizes")}var h=!1;i.s.dynamic?i.s.dynamicEl[e].iframe&&(h=!0):"true"===i.$items.eq(e).attr("data-iframe")&&(h=!0);var f=i.isVideo(n,e);if(!i.$slide.eq(e).hasClass("lg-loaded")){if(h)i.$slide.eq(e).prepend("<div class=\"lg-video-cont lg-has-iframe\" style=\"max-width:"+i.s.iframeMaxWidth+"\"><div class=\"lg-video\"><iframe class=\"lg-object\" frameborder=\"0\" src=\""+n+"\"  allowfullscreen=\"true\"></iframe></div></div>");else if(r){var b="";b=f&&f.youtube?"lg-has-youtube":f&&f.vimeo?"lg-has-vimeo":"lg-has-html5",i.$slide.eq(e).prepend("<div class=\"lg-video-cont "+b+" \"><div class=\"lg-video\"><span class=\"lg-video-play\"></span><img class=\"lg-object lg-has-poster\" src=\""+d+"\" /></div></div>")}else f?(i.$slide.eq(e).prepend("<div class=\"lg-video-cont \"><div class=\"lg-video\"></div></div>"),i.$el.trigger("hasVideo.lg",[e,n,u])):i.$slide.eq(e).prepend("<div class=\"lg-img-wrap\"><img class=\"lg-object lg-image\" src=\""+n+"\" /></div>");if(i.$el.trigger("onAferAppendSlide.lg",[e]),l=i.$slide.eq(e).find(".lg-object"),p&&l.attr("sizes",p),c){l.attr("srcset",c);try{picturefill({elements:[l[0]]})}catch(t){}}".lg-sub-html"!==this.s.appendSubHtmlTo&&i.addHtml(e),i.$slide.eq(e).addClass("lg-loaded")}i.$slide.eq(e).find(".lg-object").on("load.lg error.lg",function(){var o=0;a&&!t("body").hasClass("lg-from-hash")&&(o=a),setTimeout(function(){i.$slide.eq(e).addClass("lg-complete"),i.$el.trigger("onSlideItemLoad.lg",[e,a||0])},o)}),f&&f.html5&&!r&&i.$slide.eq(e).addClass("lg-complete"),!0===o&&(i.$slide.eq(e).hasClass("lg-complete")?i.preload(e):i.$slide.eq(e).find(".lg-object").on("load.lg error.lg",function(){i.preload(e)}))},o.prototype.slide=function(e,o,a,i){var r=this.$outer.find(".lg-current").index(),s=this;if(!(s.lGalleryOn&&r===e)){var l=this.$slide.length,n=s.lGalleryOn?this.s.speed:0;if(!s.lgBusy){if(this.s.download){var d;d=s.s.dynamic?!1!==s.s.dynamicEl[e].downloadUrl&&(s.s.dynamicEl[e].downloadUrl||s.s.dynamicEl[e].src):"false"!==s.$items.eq(e).attr("data-download-url")&&(s.$items.eq(e).attr("data-download-url")||s.$items.eq(e).attr("href")||s.$items.eq(e).attr("data-src")),d?(t("#lg-download").attr("href",d),s.$outer.removeClass("lg-hide-download")):s.$outer.addClass("lg-hide-download")}if(this.$el.trigger("onBeforeSlide.lg",[r,e,o,a]),s.lgBusy=!0,clearTimeout(s.hideBartimeout),".lg-sub-html"===this.s.appendSubHtmlTo&&setTimeout(function(){s.addHtml(e)},n),this.arrowDisable(e),i||(e<r?i="prev":e>r&&(i="next")),!o)s.$outer.addClass("lg-no-trans"),this.$slide.removeClass("lg-prev-slide lg-next-slide"),"prev"===i?(this.$slide.eq(e).addClass("lg-prev-slide"),this.$slide.eq(r).addClass("lg-next-slide")):(this.$slide.eq(e).addClass("lg-next-slide"),this.$slide.eq(r).addClass("lg-prev-slide")),setTimeout(function(){s.$slide.removeClass("lg-current"),s.$slide.eq(e).addClass("lg-current"),s.$outer.removeClass("lg-no-trans")},50);else{this.$slide.removeClass("lg-prev-slide lg-current lg-next-slide");var c,p;2<l?(c=e-1,p=e+1,0===e&&r===l-1?(p=0,c=l-1):e==l-1&&0===r&&(p=0,c=l-1)):(c=0,p=1),"prev"===i?s.$slide.eq(p).addClass("lg-next-slide"):s.$slide.eq(c).addClass("lg-prev-slide"),s.$slide.eq(e).addClass("lg-current")}s.lGalleryOn?(setTimeout(function(){s.loadContent(e,!0,0)},this.s.speed+50),setTimeout(function(){s.lgBusy=!1,s.$el.trigger("onAfterSlide.lg",[r,e,o,a])},this.s.speed)):(s.loadContent(e,!0,s.s.backdropDuration),s.lgBusy=!1,s.$el.trigger("onAfterSlide.lg",[r,e,o,a])),s.lGalleryOn=!0,this.s.counter&&t("#lg-counter-current").text(e+1)}s.index=e}},o.prototype.goToNextSlide=function(e){var t=this,o=t.s.loop;e&&3>t.$slide.length&&(o=!1),t.lgBusy||(t.index+1<t.$slide.length?(t.index++,t.$el.trigger("onBeforeNextSlide.lg",[t.index]),t.slide(t.index,e,!1,"next")):o?(t.index=0,t.$el.trigger("onBeforeNextSlide.lg",[t.index]),t.slide(t.index,e,!1,"next")):t.s.slideEndAnimatoin&&!e&&(t.$outer.addClass("lg-right-end"),setTimeout(function(){t.$outer.removeClass("lg-right-end")},400)))},o.prototype.goToPrevSlide=function(e){var t=this,o=t.s.loop;e&&3>t.$slide.length&&(o=!1),t.lgBusy||(0<t.index?(t.index--,t.$el.trigger("onBeforePrevSlide.lg",[t.index,e]),t.slide(t.index,e,!1,"prev")):o?(t.index=t.$items.length-1,t.$el.trigger("onBeforePrevSlide.lg",[t.index,e]),t.slide(t.index,e,!1,"prev")):t.s.slideEndAnimatoin&&!e&&(t.$outer.addClass("lg-left-end"),setTimeout(function(){t.$outer.removeClass("lg-left-end")},400)))},o.prototype.keyPress=function(){var o=this;1<this.$items.length&&t(window).on("keyup.lg",function(t){1<o.$items.length&&(37===t.keyCode&&(t.preventDefault(),o.goToPrevSlide()),39===t.keyCode&&(t.preventDefault(),o.goToNextSlide()))}),t(window).on("keydown.lg",function(t){!0===o.s.escKey&&27===t.keyCode&&(t.preventDefault(),o.$outer.hasClass("lg-thumb-open")?o.$outer.removeClass("lg-thumb-open"):o.destroy())})},o.prototype.arrow=function(){var e=this;this.$outer.find(".lg-prev").on("click.lg",function(){e.goToPrevSlide()}),this.$outer.find(".lg-next").on("click.lg",function(){e.goToNextSlide()})},o.prototype.arrowDisable=function(e){!this.s.loop&&this.s.hideControlOnEnd&&(e+1<this.$slide.length?this.$outer.find(".lg-next").removeAttr("disabled").removeClass("disabled"):this.$outer.find(".lg-next").attr("disabled","disabled").addClass("disabled"),0<e?this.$outer.find(".lg-prev").removeAttr("disabled").removeClass("disabled"):this.$outer.find(".lg-prev").attr("disabled","disabled").addClass("disabled"))},o.prototype.setTranslate=function(e,t,o){this.s.useLeft?e.css("left",t):e.css({transform:"translate3d("+t+"px, "+o+"px, 0px)"})},o.prototype.touchMove=function(o,a){var i=a-o;15<e(i)&&(this.$outer.addClass("lg-dragging"),this.setTranslate(this.$slide.eq(this.index),i,0),this.setTranslate(t(".lg-prev-slide"),-this.$slide.eq(this.index).width()+i,0),this.setTranslate(t(".lg-next-slide"),this.$slide.eq(this.index).width()+i,0))},o.prototype.touchEnd=function(t){var o=this;"lg-slide"!==o.s.mode&&o.$outer.addClass("lg-slide"),this.$slide.not(".lg-current, .lg-prev-slide, .lg-next-slide").css("opacity","0"),setTimeout(function(){o.$outer.removeClass("lg-dragging"),0>t&&e(t)>o.s.swipeThreshold?o.goToNextSlide(!0):0<t&&e(t)>o.s.swipeThreshold?o.goToPrevSlide(!0):5>e(t)&&o.$el.trigger("onSlideClick.lg"),o.$slide.removeAttr("style")}),setTimeout(function(){o.$outer.hasClass("lg-dragging")||"lg-slide"===o.s.mode||o.$outer.removeClass("lg-slide")},o.s.speed+100)},o.prototype.enableSwipe=function(){var t=this,o=0,a=0,i=!1;t.s.enableSwipe&&t.doCss()&&(t.$slide.on("touchstart.lg",function(a){t.$outer.hasClass("lg-zoomed")||t.lgBusy||(a.preventDefault(),t.manageSwipeClass(),o=a.originalEvent.targetTouches[0].pageX)}),t.$slide.on("touchmove.lg",function(r){t.$outer.hasClass("lg-zoomed")||(r.preventDefault(),a=r.originalEvent.targetTouches[0].pageX,t.touchMove(o,a),i=!0)}),t.$slide.on("touchend.lg",function(){t.$outer.hasClass("lg-zoomed")||(i?(i=!1,t.touchEnd(a-o)):t.$el.trigger("onSlideClick.lg"))}))},o.prototype.enableDrag=function(){var o=this,a=0,i=0,r=!1,s=!1;o.s.enableDrag&&o.doCss()&&(o.$slide.on("mousedown.lg",function(i){!o.$outer.hasClass("lg-zoomed")&&(t(i.target).hasClass("lg-object")||t(i.target).hasClass("lg-video-play"))&&(i.preventDefault(),!o.lgBusy&&(o.manageSwipeClass(),a=i.pageX,r=!0,o.$outer.scrollLeft+=1,o.$outer.scrollLeft-=1,o.$outer.removeClass("lg-grab").addClass("lg-grabbing"),o.$el.trigger("onDragstart.lg")))}),t(window).on("mousemove.lg",function(t){r&&(s=!0,i=t.pageX,o.touchMove(a,i),o.$el.trigger("onDragmove.lg"))}),t(window).on("mouseup.lg",function(l){s?(s=!1,o.touchEnd(i-a),o.$el.trigger("onDragend.lg")):(t(l.target).hasClass("lg-object")||t(l.target).hasClass("lg-video-play"))&&o.$el.trigger("onSlideClick.lg"),r&&(r=!1,o.$outer.removeClass("lg-grabbing").addClass("lg-grab"))}))},o.prototype.manageSwipeClass=function(){var e=this.index+1,t=this.index-1;this.s.loop&&2<this.$slide.length&&(0===this.index?t=this.$slide.length-1:this.index===this.$slide.length-1&&(e=0)),this.$slide.removeClass("lg-next-slide lg-prev-slide"),-1<t&&this.$slide.eq(t).addClass("lg-prev-slide"),this.$slide.eq(e).addClass("lg-next-slide")},o.prototype.mousewheel=function(){var t=this;t.$outer.on("mousewheel.lg",function(o){o.deltaY&&(0<o.deltaY?t.goToPrevSlide():t.goToNextSlide(),o.preventDefault())})},o.prototype.closeGallery=function(){var o=this,a=!1;this.$outer.find(".lg-close").on("click.lg",function(){o.destroy()}),o.s.closable&&(o.$outer.on("mousedown.lg",function(o){a=!!(t(o.target).is(".lg-outer")||t(o.target).is(".lg-item ")||t(o.target).is(".lg-img-wrap"))}),o.$outer.on("mouseup.lg",function(i){(t(i.target).is(".lg-outer")||t(i.target).is(".lg-item ")||t(i.target).is(".lg-img-wrap")&&a)&&!o.$outer.hasClass("lg-dragging")&&o.destroy()}))},o.prototype.destroy=function(e){var o=this;e||(o.$el.trigger("onBeforeClose.lg"),t(window).scrollTop(o.prevScrollTop)),e&&(!o.s.dynamic&&this.$items.off("click.lg click.lgcustom"),t.removeData(o.el,"lightGallery")),this.$el.off(".lg.tm"),t.each(t.fn.lightGallery.modules,function(e){o.modules[e]&&o.modules[e].destroy()}),this.lGalleryOn=!1,clearTimeout(o.hideBartimeout),this.hideBartimeout=!1,t(window).off(".lg"),t("body").removeClass("lg-on lg-from-hash"),o.$outer&&o.$outer.removeClass("lg-visible"),t(".lg-backdrop").removeClass("in"),setTimeout(function(){o.$outer&&o.$outer.remove(),t(".lg-backdrop").remove(),e||o.$el.trigger("onCloseAfter.lg")},o.s.backdropDuration+50)},t.fn.lightGallery=function(e){return this.each(function(){if(!t.data(this,"lightGallery"))t.data(this,"lightGallery",new o(this,e));else try{t(this).data("lightGallery").init()}catch(e){}})},t.fn.lightGallery.modules={}})()}),function(e,t){"function"==typeof define&&define.amd?define(["jquery"],function(e){return t(e)}):"object"==typeof module&&module.exports?module.exports=t(require("jquery")):t(e.jQuery)}(this,function(e){(function(){'use strict';function t(e,t,o,a){var i=this;if(i.core.$slide.eq(t).find(".lg-video").append(i.loadVideo(o,"lg-object",!0,t,a)),a)if(i.core.s.videojs)try{videojs(i.core.$slide.eq(t).find(".lg-html5").get(0),i.core.s.videojsOptions,function(){!i.videoLoaded&&i.core.s.autoplayFirstVideo&&this.play()})}catch(t){}else!i.videoLoaded&&i.core.s.autoplayFirstVideo&&i.core.$slide.eq(t).find(".lg-html5").get(0).play()}function o(e,t){var o=this.core.$slide.eq(t).find(".lg-video-cont");o.hasClass("lg-has-iframe")||(o.css("max-width",this.core.s.videoMaxWidth),this.videoLoaded=!0)}function a(t,o,a){var i=this,r=i.core.$slide.eq(o),s=r.find(".lg-youtube").get(0),l=r.find(".lg-vimeo").get(0),n=r.find(".lg-dailymotion").get(0),d=r.find(".lg-vk").get(0),c=r.find(".lg-html5").get(0);if(s)s.contentWindow.postMessage("{\"event\":\"command\",\"func\":\"pauseVideo\",\"args\":\"\"}","*");else if(l)try{$f(l).api("pause")}catch(t){}else if(n)n.contentWindow.postMessage("pause","*");else if(c)if(i.core.s.videojs)try{videojs(c).pause()}catch(t){}else c.pause();d&&e(d).attr("src",e(d).attr("src").replace("&autoplay","&noplay"));var p=i.core.s.dynamic?i.core.s.dynamicEl[a].src:i.core.$items.eq(a).attr("href")||i.core.$items.eq(a).attr("data-src");var u=i.core.isVideo(p,a)||{};(u.youtube||u.vimeo||u.dailymotion||u.vk)&&i.core.$outer.addClass("lg-hide-download")}var i={videoMaxWidth:"855px",autoplayFirstVideo:!0,youtubePlayerParams:!1,vimeoPlayerParams:!1,dailymotionPlayerParams:!1,vkPlayerParams:!1,videojs:!1,videojsOptions:{}},r=function(t){return this.core=e(t).data("lightGallery"),this.$el=e(t),this.core.s=e.extend({},i,this.core.s),this.videoLoaded=!1,this.init(),this};r.prototype.init=function(){var i=this;i.core.$el.on("hasVideo.lg.tm",t.bind(this)),i.core.$el.on("onAferAppendSlide.lg.tm",o.bind(this)),i.core.doCss()&&1<i.core.$items.length&&(i.core.s.enableSwipe||i.core.s.enableDrag)?i.core.$el.on("onSlideClick.lg.tm",function(){var e=i.core.$slide.eq(i.core.index);i.loadVideoOnclick(e)}):i.core.$slide.on("click.lg",function(){i.loadVideoOnclick(e(this))}),i.core.$el.on("onBeforeSlide.lg.tm",a.bind(this)),i.core.$el.on("onAfterSlide.lg.tm",function(e,t){i.core.$slide.eq(t).removeClass("lg-video-playing")}),i.core.s.autoplayFirstVideo&&i.core.$el.on("onAferAppendSlide.lg.tm",function(t,e){if(!i.core.lGalleryOn){var o=i.core.$slide.eq(e);setTimeout(function(){i.loadVideoOnclick(o)},100)}})},r.prototype.loadVideo=function(t,o,i,r,s){var l="",n=1,d="",c=this.core.isVideo(t,r)||{};if(i&&(this.videoLoaded?n=0:n=this.core.s.autoplayFirstVideo?1:0),c.youtube)d="?wmode=opaque&autoplay="+n+"&enablejsapi=1",this.core.s.youtubePlayerParams&&(d=d+"&"+e.param(this.core.s.youtubePlayerParams)),l="<iframe class=\"lg-video-object lg-youtube "+o+"\" width=\"560\" height=\"315\" src=\"//www.youtube.com/embed/"+c.youtube[1]+d+"\" frameborder=\"0\" allowfullscreen></iframe>";else if(c.vimeo)d="?autoplay="+n+"&api=1",this.core.s.vimeoPlayerParams&&(d=d+"&"+e.param(this.core.s.vimeoPlayerParams)),l="<iframe class=\"lg-video-object lg-vimeo "+o+"\" width=\"560\" height=\"315\"  src=\"//player.vimeo.com/video/"+c.vimeo[1]+d+"\" frameborder=\"0\" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>";else if(c.dailymotion)d="?wmode=opaque&autoplay="+n+"&api=postMessage",this.core.s.dailymotionPlayerParams&&(d=d+"&"+e.param(this.core.s.dailymotionPlayerParams)),l="<iframe class=\"lg-video-object lg-dailymotion "+o+"\" width=\"560\" height=\"315\" src=\"//www.dailymotion.com/embed/video/"+c.dailymotion[1]+d+"\" frameborder=\"0\" allowfullscreen></iframe>";else if(c.html5){var p=s.substring(0,1);("."===p||"#"===p)&&(s=e(s).html()),l=s}else c.vk&&(d="&autoplay="+n,this.core.s.vkPlayerParams&&(d=d+"&"+e.param(this.core.s.vkPlayerParams)),l="<iframe class=\"lg-video-object lg-vk "+o+"\" width=\"560\" height=\"315\" src=\"//vk.com/video_ext.php?"+c.vk[1]+d+"\" frameborder=\"0\" allowfullscreen></iframe>");return l},r.prototype.loadVideoOnclick=function(e){var t=this;if(e.find(".lg-object").hasClass("lg-has-poster")&&e.find(".lg-object").is(":visible"))if(!e.hasClass("lg-has-video")){e.addClass("lg-video-playing lg-has-video");var o=function(o,a){if(e.find(".lg-video").append(t.loadVideo(o,"",!1,t.core.index,a)),a)if(t.core.s.videojs)try{videojs(t.core.$slide.eq(t.core.index).find(".lg-html5").get(0),t.core.s.videojsOptions,function(){this.play()})}catch(t){}else t.core.$slide.eq(t.core.index).find(".lg-html5").get(0).play()},a,i;t.core.s.dynamic?(a=t.core.s.dynamicEl[t.core.index].src,i=t.core.s.dynamicEl[t.core.index].html,o(a,i)):(a=t.core.$items.eq(t.core.index).attr("href")||t.core.$items.eq(t.core.index).attr("data-src"),i=t.core.$items.eq(t.core.index).attr("data-html"),o(a,i));var r=e.find(".lg-object");e.find(".lg-video").append(r),e.find(".lg-video-object").hasClass("lg-html5")||(e.removeClass("lg-complete"),e.find(".lg-video-object").on("load.lg error.lg",function(){e.addClass("lg-complete")}))}else{var s=e.find(".lg-youtube").get(0),l=e.find(".lg-vimeo").get(0),n=e.find(".lg-dailymotion").get(0),d=e.find(".lg-html5").get(0);if(s)s.contentWindow.postMessage("{\"event\":\"command\",\"func\":\"playVideo\",\"args\":\"\"}","*");else if(l)try{$f(l).api("play")}catch(t){}else if(n)n.contentWindow.postMessage("play","*");else if(d)if(t.core.s.videojs)try{videojs(d).play()}catch(t){}else d.play();e.addClass("lg-video-playing")}},r.prototype.destroy=function(){this.videoLoaded=!1},e.fn.lightGallery.modules.video=r})()}),function(e,t){"function"==typeof define&&define.amd?define(["jquery"],function(e){return t(e)}):"object"==typeof exports?module.exports=t(require("jquery")):t(jQuery)}(this,function(t){var o=Math.abs;(function(){'use strict';var e={scale:1,zoom:!0,actualSize:!0,enableZoomAfter:300,useLeftForZoom:function(){var e=!1,t=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);return t&&54>parseInt(t[2],10)&&(e=!0),e}()},a=function(o){return this.core=t(o).data("lightGallery"),this.core.s=t.extend({},e,this.core.s),this.core.s.zoom&&this.core.doCss()&&(this.init(),this.zoomabletimeout=!1,this.pageX=t(window).width()/2,this.pageY=t(window).height()/2+t(window).scrollTop()),this};a.prototype.init=function(){var e=this,o="<span id=\"lg-zoom-in\" class=\"lg-icon\"></span><span id=\"lg-zoom-out\" class=\"lg-icon\"></span>";e.core.s.actualSize&&(o+="<span id=\"lg-actual-size\" class=\"lg-icon\"></span>"),e.core.s.useLeftForZoom?e.core.$outer.addClass("lg-use-left-for-zoom"):e.core.$outer.addClass("lg-use-transition-for-zoom"),this.core.$outer.find(".lg-toolbar").append(o),e.core.$el.on("onSlideItemLoad.lg.tm.zoom",function(o,a,i){var r=e.core.s.enableZoomAfter+i;t("body").hasClass("lg-from-hash")&&i?r=0:t("body").removeClass("lg-from-hash"),e.zoomabletimeout=setTimeout(function(){e.core.$slide.eq(a).addClass("lg-zoomable")},r+30)});var a=1,i=function(o){var a=e.core.$outer.find(".lg-current .lg-image"),i=(t(window).width()-a.prop("offsetWidth"))/2,r=(t(window).height()-a.prop("offsetHeight"))/2+t(window).scrollTop(),s,l;s=e.pageX-i,l=e.pageY-r;var n=(o-1)*s,d=(o-1)*l;a.css("transform","scale3d("+o+", "+o+", 1)").attr("data-scale",o),e.core.s.useLeftForZoom?a.parent().css({left:-n+"px",top:-d+"px"}).attr("data-x",n).attr("data-y",d):a.parent().css("transform","translate3d(-"+n+"px, -"+d+"px, 0)").attr("data-x",n).attr("data-y",d)},r=function(){1<a?e.core.$outer.addClass("lg-zoomed"):e.resetZoom(),1>a&&(a=1),i(a)},s=function(o,i,s,l){var n=i.prop("offsetWidth"),d;d=e.core.s.dynamic?e.core.s.dynamicEl[s].width||i[0].naturalWidth||n:e.core.$items.eq(s).attr("data-width")||i[0].naturalWidth||n;var c;e.core.$outer.hasClass("lg-zoomed")?a=1:d>n&&(c=d/n,a=c||2),l?(e.pageX=t(window).width()/2,e.pageY=t(window).height()/2+t(window).scrollTop()):(e.pageX=o.pageX||o.originalEvent.targetTouches[0].pageX,e.pageY=o.pageY||o.originalEvent.targetTouches[0].pageY),r(),setTimeout(function(){e.core.$outer.removeClass("lg-grabbing").addClass("lg-grab")},10)},l=!1;e.core.$el.on("onAferAppendSlide.lg.tm.zoom",function(t,o){var a=e.core.$slide.eq(o).find(".lg-image");a.on("dblclick",function(e){s(e,a,o)}),a.on("touchstart",function(e){l?(clearTimeout(l),l=null,s(e,a,o)):l=setTimeout(function(){l=null},300),e.preventDefault()})}),t(window).on("resize.lg.zoom scroll.lg.zoom orientationchange.lg.zoom",function(){e.pageX=t(window).width()/2,e.pageY=t(window).height()/2+t(window).scrollTop(),i(a)}),t("#lg-zoom-out").on("click.lg",function(){e.core.$outer.find(".lg-current .lg-image").length&&(a-=e.core.s.scale,r())}),t("#lg-zoom-in").on("click.lg",function(){e.core.$outer.find(".lg-current .lg-image").length&&(a+=e.core.s.scale,r())}),t("#lg-actual-size").on("click.lg",function(t){s(t,e.core.$slide.eq(e.core.index).find(".lg-image"),e.core.index,!0)}),e.core.$el.on("onBeforeSlide.lg.tm",function(){a=1,e.resetZoom()}),e.zoomDrag(),e.zoomSwipe()},a.prototype.resetZoom=function(){this.core.$outer.removeClass("lg-zoomed"),this.core.$slide.find(".lg-img-wrap").removeAttr("style data-x data-y"),this.core.$slide.find(".lg-image").removeAttr("style data-scale"),this.pageX=t(window).width()/2,this.pageY=t(window).height()/2+t(window).scrollTop()},a.prototype.zoomSwipe=function(){var t=this,a={},i={},r=!1,s=!1,l=!1;t.core.$slide.on("touchstart.lg",function(o){if(t.core.$outer.hasClass("lg-zoomed")){var e=t.core.$slide.eq(t.core.index).find(".lg-object");l=e.prop("offsetHeight")*e.attr("data-scale")>t.core.$outer.find(".lg").height(),s=e.prop("offsetWidth")*e.attr("data-scale")>t.core.$outer.find(".lg").width(),(s||l)&&(o.preventDefault(),a={x:o.originalEvent.targetTouches[0].pageX,y:o.originalEvent.targetTouches[0].pageY})}}),t.core.$slide.on("touchmove.lg",function(n){if(t.core.$outer.hasClass("lg-zoomed")){var e=t.core.$slide.eq(t.core.index).find(".lg-img-wrap"),d,c;n.preventDefault(),r=!0,i={x:n.originalEvent.targetTouches[0].pageX,y:n.originalEvent.targetTouches[0].pageY},t.core.$outer.addClass("lg-zoom-dragging"),c=l?-o(e.attr("data-y"))+(i.y-a.y):-o(e.attr("data-y")),d=s?-o(e.attr("data-x"))+(i.x-a.x):-o(e.attr("data-x")),(15<o(i.x-a.x)||15<o(i.y-a.y))&&(t.core.s.useLeftForZoom?e.css({left:d+"px",top:c+"px"}):e.css("transform","translate3d("+d+"px, "+c+"px, 0)"))}}),t.core.$slide.on("touchend.lg",function(){t.core.$outer.hasClass("lg-zoomed")&&r&&(r=!1,t.core.$outer.removeClass("lg-zoom-dragging"),t.touchendZoom(a,i,s,l))})},a.prototype.zoomDrag=function(){var a=this,i={},r={},s=!1,l=!1,n=!1,d=!1;a.core.$slide.on("mousedown.lg.zoom",function(o){var e=a.core.$slide.eq(a.core.index).find(".lg-object");d=e.prop("offsetHeight")*e.attr("data-scale")>a.core.$outer.find(".lg").height(),n=e.prop("offsetWidth")*e.attr("data-scale")>a.core.$outer.find(".lg").width(),a.core.$outer.hasClass("lg-zoomed")&&t(o.target).hasClass("lg-object")&&(n||d)&&(o.preventDefault(),i={x:o.pageX,y:o.pageY},s=!0,a.core.$outer.scrollLeft+=1,a.core.$outer.scrollLeft-=1,a.core.$outer.removeClass("lg-grab").addClass("lg-grabbing"))}),t(window).on("mousemove.lg.zoom",function(t){if(s){var e=a.core.$slide.eq(a.core.index).find(".lg-img-wrap"),c,p;l=!0,r={x:t.pageX,y:t.pageY},a.core.$outer.addClass("lg-zoom-dragging"),p=d?-o(e.attr("data-y"))+(r.y-i.y):-o(e.attr("data-y")),c=n?-o(e.attr("data-x"))+(r.x-i.x):-o(e.attr("data-x")),a.core.s.useLeftForZoom?e.css({left:c+"px",top:p+"px"}):e.css("transform","translate3d("+c+"px, "+p+"px, 0)")}}),t(window).on("mouseup.lg.zoom",function(t){s&&(s=!1,a.core.$outer.removeClass("lg-zoom-dragging"),l&&(i.x!==r.x||i.y!==r.y)&&(r={x:t.pageX,y:t.pageY},a.touchendZoom(i,r,n,d)),l=!1),a.core.$outer.removeClass("lg-grabbing").addClass("lg-grab")})},a.prototype.touchendZoom=function(e,t,a,i){var r=this,s=r.core.$slide.eq(r.core.index).find(".lg-img-wrap"),l=r.core.$slide.eq(r.core.index).find(".lg-object"),n=-o(s.attr("data-x"))+(t.x-e.x),d=-o(s.attr("data-y"))+(t.y-e.y),c=(r.core.$outer.find(".lg").height()-l.prop("offsetHeight"))/2,p=o(l.prop("offsetHeight")*o(l.attr("data-scale"))-r.core.$outer.find(".lg").height()+c),u=(r.core.$outer.find(".lg").width()-l.prop("offsetWidth"))/2,g=o(l.prop("offsetWidth")*o(l.attr("data-scale"))-r.core.$outer.find(".lg").width()+u);(15<o(t.x-e.x)||15<o(t.y-e.y))&&(i&&(d<=-p?d=-p:d>=-c&&(d=-c)),a&&(n<=-g?n=-g:n>=-u&&(n=-u)),i?s.attr("data-y",o(d)):d=-o(s.attr("data-y")),a?s.attr("data-x",o(n)):n=-o(s.attr("data-x")),r.core.s.useLeftForZoom?s.css({left:n+"px",top:d+"px"}):s.css("transform","translate3d("+n+"px, "+d+"px, 0)"))},a.prototype.destroy=function(){var e=this;e.core.$el.off(".lg.zoom"),t(window).off(".lg.zoom"),e.core.$slide.off(".lg.zoom"),e.core.$el.off(".lg.tm.zoom"),e.resetZoom(),clearTimeout(e.zoomabletimeout),e.zoomabletimeout=!1},t.fn.lightGallery.modules.zoom=a})()}),function(e,t){"function"==typeof define&&define.amd?define(["jquery"],function(e){return t(e)}):"object"==typeof exports?module.exports=t(require("jquery")):t(jQuery)}(this,function(e){var t=Math.abs;(function(){'use strict';var o={thumbnail:!0,animateThumb:!0,currentPagerPosition:"middle",thumbWidth:100,thumbHeight:"80px",thumbContHeight:100,thumbMargin:5,exThumbImage:!1,showThumbByDefault:!0,toogleThumb:!0,pullCaptionUp:!0,enableThumbDrag:!0,enableThumbSwipe:!0,swipeThreshold:50,loadYoutubeThumbnail:!0,youtubeThumbSize:1,loadVimeoThumbnail:!0,vimeoThumbSize:"thumbnail_small",loadDailymotionThumbnail:!0},a=function(t){return this.core=e(t).data("lightGallery"),this.core.s=e.extend({},o,this.core.s),this.$el=e(t),this.$thumbOuter=null,this.thumbOuterWidth=0,this.thumbTotalWidth=this.core.$items.length*(this.core.s.thumbWidth+this.core.s.thumbMargin),this.thumbIndex=this.core.index,this.core.s.animateThumb&&(this.core.s.thumbHeight="100%"),this.left=0,this.init(),this};a.prototype.init=function(){var e=this;this.core.s.thumbnail&&1<this.core.$items.length&&(this.core.s.showThumbByDefault&&setTimeout(function(){e.core.$outer.addClass("lg-thumb-open")},700),this.core.s.pullCaptionUp&&this.core.$outer.addClass("lg-pull-caption-up"),this.build(),this.core.s.animateThumb&&this.core.doCss()?(this.core.s.enableThumbDrag&&this.enableThumbDrag(),this.core.s.enableThumbSwipe&&this.enableThumbSwipe(),this.thumbClickable=!1):this.thumbClickable=!0,this.toogle(),this.thumbkeyPress())},a.prototype.build=function(){function t(e,t,i){var s=o.core.isVideo(e,i)||{},l="",n;s.youtube||s.vimeo||s.dailymotion?s.youtube?o.core.s.loadYoutubeThumbnail?n="//img.youtube.com/vi/"+s.youtube[1]+"/"+o.core.s.youtubeThumbSize+".jpg":n=t:s.vimeo?o.core.s.loadVimeoThumbnail?(n="//i.vimeocdn.com/video/error_"+r+".jpg",l=s.vimeo[1]):n=t:s.dailymotion&&(o.core.s.loadDailymotionThumbnail?n="//www.dailymotion.com/thumbnail/video/"+s.dailymotion[1]:n=t):n=t,a+="<div data-vimeo-id=\""+l+"\" class=\"lg-thumb-item\" style=\"width:"+o.core.s.thumbWidth+"px; height: "+o.core.s.thumbHeight+"; margin-right: "+o.core.s.thumbMargin+"px\"><img src=\""+n+"\" /></div>",l=""}var o=this,a="",r="",s;switch(this.core.s.vimeoThumbSize){case"thumbnail_large":r="640";break;case"thumbnail_medium":r="200x150";break;case"thumbnail_small":r="100x75";}if(o.core.$outer.addClass("lg-has-thumb"),o.core.$outer.find(".lg").append("<div class=\"lg-thumb-outer\"><div class=\"lg-thumb lg-group\"></div></div>"),o.$thumbOuter=o.core.$outer.find(".lg-thumb-outer"),o.thumbOuterWidth=o.$thumbOuter.width(),o.core.s.animateThumb&&o.core.$outer.find(".lg-thumb").css({width:o.thumbTotalWidth+"px",position:"relative"}),this.core.s.animateThumb&&o.$thumbOuter.css("height",o.core.s.thumbContHeight+"px"),o.core.s.dynamic)for(var l=0;l<o.core.s.dynamicEl.length;l++)t(o.core.s.dynamicEl[l].src,o.core.s.dynamicEl[l].thumb,l);else o.core.$items.each(function(a){o.core.s.exThumbImage?t(e(this).attr("href")||e(this).attr("data-src"),e(this).attr(o.core.s.exThumbImage),a):t(e(this).attr("href")||e(this).attr("data-src"),e(this).find("img").attr("src"),a)});o.core.$outer.find(".lg-thumb").html(a),s=o.core.$outer.find(".lg-thumb-item"),s.each(function(){var t=e(this),a=t.attr("data-vimeo-id");a&&e.getJSON("//www.vimeo.com/api/v2/video/"+a+".json?callback=?",{format:"json"},function(e){t.find("img").attr("src",e[0][o.core.s.vimeoThumbSize])})}),s.eq(o.core.index).addClass("active"),o.core.$el.on("onBeforeSlide.lg.tm",function(){s.removeClass("active"),s.eq(o.core.index).addClass("active")}),s.on("click.lg touchend.lg",function(){var t=e(this);setTimeout(function(){(!o.thumbClickable||o.core.lgBusy)&&o.core.doCss()||(o.core.index=t.index(),o.core.slide(o.core.index,!1,!0,!1))},50)}),o.core.$el.on("onBeforeSlide.lg.tm",function(){o.animateThumb(o.core.index)}),e(window).on("resize.lg.thumb orientationchange.lg.thumb",function(){setTimeout(function(){o.animateThumb(o.core.index),o.thumbOuterWidth=o.$thumbOuter.width()},200)})},a.prototype.setTranslate=function(e){this.core.$outer.find(".lg-thumb").css({transform:"translate3d(-"+e+"px, 0px, 0px)"})},a.prototype.animateThumb=function(e){var t=this.core.$outer.find(".lg-thumb");if(this.core.s.animateThumb){var o;switch(this.core.s.currentPagerPosition){case"left":o=0;break;case"middle":o=this.thumbOuterWidth/2-this.core.s.thumbWidth/2;break;case"right":o=this.thumbOuterWidth-this.core.s.thumbWidth;}this.left=(this.core.s.thumbWidth+this.core.s.thumbMargin)*e-1-o,this.left>this.thumbTotalWidth-this.thumbOuterWidth&&(this.left=this.thumbTotalWidth-this.thumbOuterWidth),0>this.left&&(this.left=0),this.core.lGalleryOn?(!t.hasClass("on")&&this.core.$outer.find(".lg-thumb").css("transition-duration",this.core.s.speed+"ms"),!this.core.doCss()&&t.animate({left:-this.left+"px"},this.core.s.speed)):!this.core.doCss()&&t.css("left",-this.left+"px"),this.setTranslate(this.left)}},a.prototype.enableThumbDrag=function(){var o=this,a=0,i=0,r=!1,s=!1,l=0;o.$thumbOuter.addClass("lg-grab"),o.core.$outer.find(".lg-thumb").on("mousedown.lg.thumb",function(t){o.thumbTotalWidth>o.thumbOuterWidth&&(t.preventDefault(),a=t.pageX,r=!0,o.core.$outer.scrollLeft+=1,o.core.$outer.scrollLeft-=1,o.thumbClickable=!1,o.$thumbOuter.removeClass("lg-grab").addClass("lg-grabbing"))}),e(window).on("mousemove.lg.thumb",function(t){r&&(l=o.left,s=!0,i=t.pageX,o.$thumbOuter.addClass("lg-dragging"),l-=i-a,l>o.thumbTotalWidth-o.thumbOuterWidth&&(l=o.thumbTotalWidth-o.thumbOuterWidth),0>l&&(l=0),o.setTranslate(l))}),e(window).on("mouseup.lg.thumb",function(){s?(s=!1,o.$thumbOuter.removeClass("lg-dragging"),o.left=l,t(i-a)<o.core.s.swipeThreshold&&(o.thumbClickable=!0)):o.thumbClickable=!0,r&&(r=!1,o.$thumbOuter.removeClass("lg-grabbing").addClass("lg-grab"))})},a.prototype.enableThumbSwipe=function(){var o=this,a=0,i=0,r=!1,s=0;o.core.$outer.find(".lg-thumb").on("touchstart.lg",function(t){o.thumbTotalWidth>o.thumbOuterWidth&&(t.preventDefault(),a=t.originalEvent.targetTouches[0].pageX,o.thumbClickable=!1)}),o.core.$outer.find(".lg-thumb").on("touchmove.lg",function(t){o.thumbTotalWidth>o.thumbOuterWidth&&(t.preventDefault(),i=t.originalEvent.targetTouches[0].pageX,r=!0,o.$thumbOuter.addClass("lg-dragging"),s=o.left,s-=i-a,s>o.thumbTotalWidth-o.thumbOuterWidth&&(s=o.thumbTotalWidth-o.thumbOuterWidth),0>s&&(s=0),o.setTranslate(s))}),o.core.$outer.find(".lg-thumb").on("touchend.lg",function(){o.thumbTotalWidth>o.thumbOuterWidth?r?(r=!1,o.$thumbOuter.removeClass("lg-dragging"),t(i-a)<o.core.s.swipeThreshold&&(o.thumbClickable=!0),o.left=s):o.thumbClickable=!0:o.thumbClickable=!0})},a.prototype.toogle=function(){var e=this;e.core.s.toogleThumb&&(e.core.$outer.addClass("lg-can-toggle"),e.$thumbOuter.append("<span class=\"lg-toogle-thumb lg-icon\"></span>"),e.core.$outer.find(".lg-toogle-thumb").on("click.lg",function(){e.core.$outer.toggleClass("lg-thumb-open")}))},a.prototype.thumbkeyPress=function(){var t=this;e(window).on("keydown.lg.thumb",function(o){38===o.keyCode?(o.preventDefault(),t.core.$outer.addClass("lg-thumb-open")):40===o.keyCode&&(o.preventDefault(),t.core.$outer.removeClass("lg-thumb-open"))})},a.prototype.destroy=function(){this.core.s.thumbnail&&1<this.core.$items.length&&(e(window).off("resize.lg.thumb orientationchange.lg.thumb keydown.lg.thumb"),this.$thumbOuter.remove(),this.core.$outer.removeClass("lg-has-thumb"))},e.fn.lightGallery.modules.Thumbnail=a})()});